{"version":3,"file":"bundle.js","sources":["../lib/MessagePacker.js","../lib/WebP2P.js","../lib/connectors/PubNub.js","../lib/connectors/core/Connector.js","../lib/connectors/core/DataChannel.js","../lib/connectors/core/HandshakeConnector.js","../lib/errors.js","../lib/index.js","../lib/managers/HandshakeManager.js","../lib/managers/Manager.js","../lib/managers/PeersManager.js","../node_modules/grunt-browserify/node_modules/browserify/node_modules/events/events.js","../node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/buffer.js","../node_modules/uuid/rng-browser.js","../node_modules/uuid/uuid.js","../node_modules/wrtc/lib/browser.js","../shim/pubnub.min.js"],"names":["MessagePacker","sessionID","storeResponse","message","dest","id","stored","response","timeout","setTimeout","clearTimeout","responses","BASE_TIMEOUT","self","this","requestID","requests","pack","result","Array","type","PRESENCE","OFFER","ANSWER","error","Error","from","Math","min","ttl","MAX_TTL_DEFAULT","sdp","unpack","reply","request_ids","request","callback","presence","offer","dispatchCallback","cancel","Object","keys","length","ERROR","module","exports","WebP2P","options","onerror","emit","createPeerConnection","callbackType","pc","RTCPeerConnection","iceServers","url","stun_server","optional","DtlsSrtpKeyAgreement","addEventListener","event","candidate","localDescription","console","signalingState","channels","_channels","peersManager","add","offers","defineProperty","value","initPeerConnection_Offer","labels","routingLabel","concat","commonLabels","label","i","channel","createDataChannel","push","splice","indexOf","mediaConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","createOffer","setLocalDescription","log","initPeerConnection_Answer","setRemoteDescription","RTCSessionDescription","createAnswer","answer","forward","connector","warn","peer","_connectors","send","handshakeManager","initManagerEvents","manager","connectionProcessed","get","peerConnection","close","on","status","handshake_servers","uuid","v4","messagepacker","HandshakeManager","PeersManager","__defineGetter__","peers","connectTo","Function","SyntaxError","undefined","debug","increaseConnections","window","EventEmitter","require","prototype","__proto__","constructor","Connector_PubNub","config_init","config_mess","max_connections","HandshakeConnector","call","pubnub","PUBNUB","init","subscribe","restore","backfill","connect","_open","_message","disconnect","_close","_error","unsubscribe","publish","Connector","TypeError","Connector_DataChannel","datachannel","JSON","parse","data","stringify","shouldConnect","connections","Number","POSITIVE_INFINITY","ERROR_NETWORK_UNKNOWN","msg","ERROR_NETWORK_OFFLINE","ERROR_REQUEST_FAILURE","ERROR_REQUEST_EMPTY","ERROR_NO_PEERS","createConnector","config","connectorConstructor","handshakeConnectorConstructors","_initConnector","_messageUnpacked","handshake","configs","index","Manager","registerConnectorConstructor","configs_infinity","addConfigs_byObject","addConfigs_byArray","configuration","addConfigs_byUri","json_uri","dispatchError","http_request","XMLHttpRequest","open","onload","errors","navigator","onLine","addConfigs","incomingConnector","initDataChannel","initDataChannel_listener","target","removeEventListener","_events","_maxListeners","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","n","isNaN","er","handler","len","args","listeners","arguments","apply","slice","addListener","listener","m","newListener","warned","trace","once","g","removeListener","fired","list","position","removeAllListeners","key","ret","listenerCount","emitter","e","t","r","s","o","u","a","f","PcZj9L","Buffer","subject","encoding","noZero","stringtrim","coerce","byteLength","buf","browserSupport","augment","Uint8Array","isBuffer","set","isArrayish","readUInt8","write","_hexWrite","string","offset","remaining","strLen","byte","parseInt","substr","_charsWritten","_utf8Write","blitBuffer","utf8ToBytes","_asciiWrite","asciiToBytes","_binaryWrite","_base64Write","base64ToBytes","_base64Slice","start","end","base64","fromByteArray","_utf8Slice","res","tmp","decodeUtf8Char","String","fromCharCode","toString","_asciiSlice","_binarySlice","_hexSlice","out","toHex","_readUInt16","littleEndian","noAssert","assert","_dataview","getUint16","dv","DataView","ArrayBuffer","setUint8","val","_readUInt32","getUint32","_readInt16","getInt16","neg","_readInt32","getInt32","_readFloat","getFloat32","ieee754","read","_readDouble","getFloat64","_writeUInt16","verifuint","setUint16","getUint8","j","_writeUInt32","setUint32","_writeInt16","verifsint","setInt16","_writeInt32","setInt32","_writeFloat","verifIEEE754","setFloat32","_writeDouble","setFloat64","BufferToArrayBuffer","buffer","str","trim","replace","arr","_isBuffer","BP","toLocaleString","toJSON","copy","readUInt16LE","readUInt16BE","readUInt32LE","readUInt32BE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","fill","inspect","toArrayBuffer","byteOffset","clamp","defaultValue","ceil","isArray","byteArray","charCodeAt","h","encodeURIComponent","charAt","split","toByteArray","src","dst","decodeURIComponent","err","max","floor","test","SlowBuffer","INSPECT_MAX_BYTES","poolSize","foo","isEncoding","toLowerCase","b","totalLength","pos","item","isFinite","swap","_arr","target_start","source","subarray","sliceLen","newBuf","getInt8","setInt8","join","base64-js","native-buffer-browserify","3","elt","b64ToByteArray","b64","l","placeHolders","lookup","uint8ToBase64","uint8","tripletToBase64","num","temp","extraBytes","output","4","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","NaN","Infinity","pow","c","rt","abs","LN2","global","rng","crypto","getRandomValues","_rnds8","_rnds","random","ii","oct","_hexToByte","unparse","bth","_byteToHex","v1","clockseq","_clockseq","msecs","Date","getTime","nsecs","_lastNSecs","dt","_lastMSecs","tl","tmh","node","_nodeId","BufferClass","rnds","_rng","_seedBytes","RTCIceCandidate","mozRTCIceCandidate","webkitRTCIceCandidate","mozRTCPeerConnection","webkitRTCPeerConnection","mozRTCSessionDescription","webkitRTCSessionDescription","x","ga","aa","J","ka","ca","Q","da","la","na","oa","fa","ja","hasOwnProperty","pa","qa","sort","ra","C","ba","I","valueOf","lastIndex","H","p","q","k","\\b","\\t","\\n","\\f","\\r","\"","\\\\","eval","G","P","ha","sa","CryptoJS","HmacSHA256","enc","Base64","ta","document","getElementById","ua","va","getElementsByTagName","U","cancelBubble","preventDefault","stopPropagation","attachEvent","xa","V","setAttribute","getAttribute","ya","style","Ba","createElement","Da","Ca","W","Fa","M","ea","N","O","D","parentNode","removeChild","L","responseText","abort","XDomainRequest","onabort","onloadend","onreadystatechange","readyState","pnsdk","Ea","Ga","appendChild","Ha","Ia","userAgent","opera","postError","Ja","Ka","localStorage","getItem","cookie","match","RegExp","setItem","Y","unbind","bind","fire","Z","La","ia","z","time","R","Na","E","Oa","y","A","shift","jsonp","subscribe_key","xdr","db","_is_online","jsonp_cb","PNSDK","hmac_SHA256","windowing","keepalive","noleave","publish_key","auth_key","secret_key","ssl","origin","K","wa","za","Aa","ma","S","no_wait_for_pending","F","T","B","LEAVE","X","auth","v","history","count","limit","reverse","w","stringtoken","replay","destination","stop","Pa","prepend","action","name","reconnect","idle","noheresync","timetoken","here_now","uuids","timestamp","occupancy","grant","signature","audit","revoke","set_uuid","get_uuid","ready","map","each","each-channel","grep","offline","supplant","now","unique","updater","css","$","create","head","search","attr","events","notest","location","href","jQuery","top","innerHTML","rdx","unescape","Ma","ws","protocol","CONNECTING","OPEN","CLOSING","CLOSED","CLOSE_NORMAL","CLOSE_GOING_AWAY","CLOSE_PROTOCOL_ERROR","CLOSE_UNSUPPORTED","CLOSE_TOO_LARGE","CLOSE_NO_STATUS","CLOSE_ABNORMAL","onclose","onmessage","onopen","onsend","binaryType","extensions","bufferedAmount","trasnmitting","code","reason","wasClean"],"mappings":"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","sourcesContent":["/**\n * Based on code from RPC-Builder\n */\n\n\nconst ERROR    = 0;\nconst PRESENCE = 1;\nconst OFFER    = 2;\nconst ANSWER   = 3;\n\nconst MAX_TTL_DEFAULT = 5;\n\nconst BASE_TIMEOUT = 5000;\n\n\nfunction MessagePacker(sessionID)\n{\n  var self = this;\n\n  var requestID = 0;\n\n  var requests  = {};\n  var responses = {};\n\n\n  /**\n   * Store the response to prevent to process duplicate request later\n   */\n  function storeResponse(message, dest, id)\n  {\n    message.stored = true;\n\n    var response =\n    {\n      message: message,\n      id: id,\n      timeout: setTimeout(function()\n      {\n        clearTimeout(response.timeout);\n        delete responses[dest];\n      },\n      BASE_TIMEOUT)\n    };\n    responses[dest] = response;\n  };\n\n\n  //\n  // Pack & Unpack\n  //\n\n  this.pack = function(message, id)\n  {\n    var result = new Array(6);\n\n    // Type\n    var type = message.type;\n    switch(type)\n    {\n      case \"presence\":\n        result[0] = PRESENCE;\n      break;\n\n      case \"offer\":\n        result[0] = OFFER;\n      break;\n\n      case \"answer\":\n        result[0] = ANSWER;\n      break;\n\n      default:\n      {\n        var error = Error(\"Unknown message type '\"+type+\"'\");\n            error.message = message;\n\n        throw error;\n      };\n    };\n\n    // From\n    result[1] = message.from || sessionID;\n\n    // Offer & Answer\n\n    if(result.type != PRESENCE)\n    {\n      result[2] = message.dest;\n      result[3] = id || requestID++;\n      result[4] = Math.min(message.ttl || MAX_TTL_DEFAULT, MAX_TTL_DEFAULT);\n      result[5] = message.sdp;\n    };\n\n    return result;\n  };\n\n  this.unpack = function(message)\n  {\n    var result = {};\n\n    var from = message[1];\n    var id   = message[3];\n\n    // Type\n    var type = message[0];\n    switch(type)\n    {\n      case PRESENCE:\n        result.type = \"presence\";\n      break;\n\n      case OFFER:\n        result.type = \"offer\";\n      break;\n\n      case ANSWER:\n        result.type = \"answer\";\n      break;\n\n      default:\n      {\n        var error = Error(\"Unknown message type '\"+type+\"'\");\n            error.message = message;\n\n        throw error;\n      };\n    };\n\n    // From\n    result.from = from;\n\n    // Offer & Answer\n\n    if(type != PRESENCE)\n    {\n      result.dest = message[2];\n      result.ttl  = message[4];\n      result.sdp  = message[5];\n\n      result.pack = function()\n      {\n        return self.pack(this, id);\n      };\n    };\n\n    // Dispatch responses callbacks\n    if(result.type == 'offer')\n    {\n      // Check if it's a re-try\n      var response = responses[from];\n      if(response)\n      {\n        // Old message, ignore it\n        if(response.id > id)\n          return;\n\n        // Updated message (or duplicated one), delete old response\n        clearTimeout(response.timeout);\n        delete responses[from];\n\n        // Duplicated message, re-send it\n        if(response.id == id)\n        {\n          var message = response.message;\n\n          // Store the response to prevent to process duplicate request later\n          storeResponse(message, from, id);\n\n          // Return the stored response so it can be directly send back\n          return message;\n        };\n      }\n      else\n        result.reply = function(dest, sdp)\n        {\n          var message = self.pack(\n          {\n            type: \"answer\",\n            dest: dest,\n            sdp:  sdp\n          }, id);\n\n          // Store the response to prevent to process duplicate request later\n          storeResponse(message, dest, id);\n\n          // Return the packed message\n          return message;\n        };\n    };\n\n    if(result.type == 'answer')\n    {\n      var request_ids = requests[from];\n      if(request_ids)\n      {\n        var request = request_ids[id];\n        if(request)\n        {\n          request.callback(error, result);\n\n//          // Return undefined to notify message has been processed\n//          return;\n        };\n      };\n    };\n\n    // Return unpacked message\n    return result;\n  };\n\n\n  //\n  // Application dependent messages\n  //\n\n  this.presence = function()\n  {\n    var message = this.pack(\n    {\n      type: \"presence\"\n    });\n\n    // Return the packed message\n    return message;\n  };\n\n  this.offer = function(dest, sdp, callback)\n  {\n    var message =\n    {\n      type: \"offer\",\n      dest: dest,\n      sdp:  sdp\n    };\n\n    // If we have not set a callback, it's an answer for a presence message.\n    // Set ttl = 1 so the offer doesn't propagate beyond the handshake channel.\n    if(!callback) message.ttl = 1;\n\n    message = this.pack(message);\n    message.cancel = function(){};\n\n    // Store callback if defined to be executed when received the response\n    if(callback)\n    {\n      var request_ids = requests[dest] = requests[dest] || {};\n\n      var id = message[3];\n\n      var request = request_ids[id] =\n      {\n        message: message,\n        callback: dispatchCallback,\n        timeout:  setTimeout(function()\n        {\n          var error = new Error('Timed Out');\n              error.request = message;\n\n          dispatchCallback(error)\n        },\n        BASE_TIMEOUT)\n      };\n\n      message.cancel = function()\n      {\n        clearTimeout(request.timeout);\n\n        delete request_ids[id];\n        if(!Object.keys(request_ids).length)\n          delete requests[dest];\n      };\n\n      function dispatchCallback(error, result)\n      {\n        message.cancel();\n\n        callback(error, result);\n      };\n    };\n\n    // Return the packed message\n    return message;\n  };\n};\n\n\nmodule.exports = MessagePacker;","var EventEmitter = require(\"events\").EventEmitter;\n\nvar RTCPeerConnection = require('wrtc').RTCPeerConnection;\nvar uuid = require('uuid');\n\nvar HandshakeManager = require('./managers/HandshakeManager');\nvar PeersManager     = require('./managers/PeersManager');\n\nvar MessagePacker = require('./MessagePacker');\n\n\n/**\n * @classdesc Init and connect to the WebP2P.io network\n *\n * @constructor\n */\nfunction WebP2P(options)\n{\n  var self = this;\n\n\n  var options = options || {};\n\n  // Internal options\n  var commonLabels      = options.commonLabels || [];\n  var handshake_servers = options.handshake_servers;\n  var stun_server       = options.stun_server || 'stun.l.google.com:19302';\n\n  // Read-only options\n  Object.defineProperty(this, \"routingLabel\",\n  {\n    value: options.routingLabel || \"webp2p\"\n  });\n  Object.defineProperty(this, \"sessionID\",\n  {\n    value: options.sessionID || uuid.v4()\n  });\n\n\n  var messagepacker = new MessagePacker(this.sessionID);\n\n  var handshakeManager = new HandshakeManager(messagepacker, handshake_servers);\n  var peersManager     = new PeersManager(messagepacker, self.routingLabel);\n\n  this.__defineGetter__('status', function()\n  {\n    if(peersManager.status == 'connected')\n      return 'connected';\n\n    return handshakeManager.status;\n  });\n\n  this.__defineGetter__(\"peers\", function()\n  {\n    return peersManager.peers;\n  });\n\n\n  function onerror(error)\n  {\n    self.emit('error', new Error(error));\n  };\n\n\n  var offers = {};\n\n  /**\n   * Create a new RTCPeerConnection\n   * @param {UUID} sessionID Identifier of the other peer so later can be accessed.\n   *\n   * @return {RTCPeerConnection}\n   */\n  function createPeerConnection(sessionID, callbackType, callback)\n  {\n    var pc = new RTCPeerConnection\n    (\n      {iceServers: [{url: 'stun:'+stun_server}]},\n      {optional: [{DtlsSrtpKeyAgreement: true}]}\n    );\n\n    pc.addEventListener('icecandidate', function(event)\n    {\n      // There's a candidate, ignore it\n      if(event.candidate)\n        return;\n\n      // There's no candidate, send the full SDP\n      var type = this.localDescription.type;\n      var sdp  = this.localDescription.sdp;\n\n      if(type == callbackType)\n        callback(sdp)\n      else\n        console.error(type+\" SDP type is not equal to \"+callbackType+\" callback type\");\n    });\n\n    pc.addEventListener('signalingstatechange', function(event)\n    {\n      // Add PeerConnection object to available ones when gets open\n      if(pc.signalingState == 'stable')\n      {\n        var channels = pc._channels || [];\n\n        peersManager.add(sessionID, pc, channels);\n\n        var request = offers[sessionID];\n        if(request)\n        {\n          delete offers[sessionID];\n\n          var callback = request.callback;\n          if(callback)\n             callback(null, pc, channels);\n        };\n\n        self.emit('peerconnection', pc, channels);\n      };\n    });\n\n    // Set ID of the PeerConnection\n    Object.defineProperty(pc, \"sessionID\", {value : sessionID});\n\n    return pc;\n  };\n\n\n  function initPeerConnection_Offer(pc, labels)\n  {\n    // Set channels for this PeerConnection object\n    labels = [self.routingLabel].concat(commonLabels, labels);\n\n    var channels = [];\n\n    for(var i=0, label; label=labels[i]; i++)\n    {\n      var channel = pc.createDataChannel(label);\n\n      channels.push(channel);\n\n      channel.addEventListener('close', function(event)\n      {\n        channels.splice(channels.indexOf(channel), 1);\n      });\n    };\n\n    pc._channels = channels;\n\n    // Send offer\n    var mediaConstraints =\n    {\n      mandatory:\n      {\n        OfferToReceiveAudio: false,\n        OfferToReceiveVideo: false\n      }\n    };\n\n    pc.createOffer(function(offer)\n    {\n      // Set the peer local description\n      pc.setLocalDescription(offer,\n      function()\n      {\n        console.log('['+self.sessionID+'] Offer LocalDescription created and set');\n      },\n      onerror);\n    },\n    onerror,\n    mediaConstraints);\n  };\n\n  function initPeerConnection_Answer(pc, sdp)\n  {\n    // Process offer\n    pc.setRemoteDescription(new RTCSessionDescription(\n    {\n      sdp:  sdp,\n      type: 'offer'\n    }),\n    function()\n    {\n      // Send answer\n      pc.createAnswer(function(answer)\n      {\n        // Set the peer local description\n        pc.setLocalDescription(answer,\n        function()\n        {\n          console.log('['+self.sessionID+'] Answer LocalDescription created and set');\n        },\n        onerror);\n      },\n      onerror)\n    },\n    onerror);\n  };\n\n\n  //\n  // Connection methods\n  //\n\n  /**\n   * Callback to send the offer. If not defined send it to all connected peers.\n   *\n   * @callback WebP2P~ConnectToCallback\n   * @param {Error} error\n   * @param {RTCPeerConnection} peer - The (newly created) peer\n   */\n\n  /**\n   * Connects to another peer based on its UID. If we are already connected,\n   * it does nothing.\n   *\n   * @param {UUID} sessionID - Identifier of the other peer to be connected.\n   * @param {string[]} [labels] - Per-connection labels\n   * @param {WebP2P~ConnectToCallback} callback\n   */\n  this.connectTo = function(dest, labels, callback)\n  {\n    if(labels instanceof Function)\n    {\n      if(callback)\n        throw new SyntaxError(\"Nothing can be defined after the callback\");\n\n      callback = labels;\n      labels = undefined;\n    };\n\n    // Don't connect to ourself\n    if(dest == self.sessionID)\n      return callback(new Error(\"Connecting to ourself\"));\n\n    var pc = peersManager.get(dest);\n    if(pc)\n      callback(null, pc)\n\n    else\n    {\n      pc = createPeerConnection(dest, \"offer\", function(offer)\n      {\n        var message = messagepacker.offer(dest, offer, function(error, message)\n        {\n          if(error)\n            return callback(error);\n\n          console.debug('['+self.sessionID+'] Received offer for connectTo from '+message.from);\n        });\n\n        offers[dest] =\n        {\n          callback: callback,\n          message: message,\n          peerConnection: pc\n        };\n\n        handshakeManager.send(message);\n        peersManager.send(message);\n      });\n\n      initPeerConnection_Offer(pc, labels);\n    }\n  };\n\n\n  //\n  // Managers\n  //\n\n  function forward(message, connector)\n  {\n    // Don't forward the message if TTL has been achieved\n    if(--message.ttl <= 0)\n      return console.warn(\"TTL achieved:\",message);\n\n    var dest = message.dest;\n\n    message = message.pack();\n\n    // Search the peer between the ones currently connected\n    for(var i=0, peer; peer=peersManager._connectors[i]; i++)\n      if(peer.sessionID == dest)\n        return peer.send(message);\n\n    // Peer was not found, forward message to all the connectors\n    peersManager.send(message, connector);\n    handshakeManager.send(message, connector);\n  };\n\n\n  handshakeManager.on('connected', function()\n  {\n    self.emit('handshakeManager.connected', handshakeManager);\n  });\n  handshakeManager.on('disconnected', function()\n  {\n    self.emit('handshakeManager.disconnected', handshakeManager);\n  });\n\n  peersManager.on('connected', function()\n  {\n    self.emit('peersManager.connected', peersManager);\n  });\n  peersManager.on('disconnected', function()\n  {\n    self.emit('peersManager.disconnected', peersManager);\n  });\n\n  function initManagerEvents(manager)\n  {\n    //\n    // Basic events\n    //\n\n    manager.on('connected', function()\n    {\n      if(handshakeManager.status != peersManager.status)\n        self.emit('connected');\n    });\n    manager.on('disconnected', function()\n    {\n      if(handshakeManager.status == peersManager.status)\n        self.emit('disconnected');\n    });\n    manager.on('error', function(error)\n    {\n      self.emit('error', error);\n    });\n\n    //\n    // Offer & answer events\n    //\n\n    /**\n     * Check if it's a request from a peer we are already connected or trying to\n     * connect to, so we can prevent to do crossed connections\n     *\n     * @param sessionID - ID of the other peer\n     *\n     * @returns {Boolean} - If we are already connected or trying to connect\n     */\n    function connectionProcessed(sessionID)\n    {\n      // Check if we are already connected to the requester peer\n      var peer = peersManager.get(sessionID);\n      if(peer)\n      {\n        // We are already connected to that peer, ignore the request\n        console.log(\"[\"+self.sessionID+\"] Already connected to \"+sessionID);\n        return true;\n      };\n\n      // Check if we are already trying to connect to that peer\n      var offer = offers[sessionID];\n      if(offer)\n      {\n        // We are already trying to connected to that peer, ignore the request\n        console.log(\"[\"+self.sessionID+\"] Already offered connection to \"+sessionID);\n\n        // We have higher precedence, ignore incoming connection request\n        if(self.sessionID < sessionID)\n          return true;  // Should send an error to the other end\n\n        // We have less precedence, cancel our connection request and prepare to\n        // incoming one\n        offer.message.cancel();\n        offer.peerConnection.close();\n\n        delete offers[sessionID];\n      };\n\n      // Connection request is a genuinely new one, process it as usual\n      return false;\n    };\n\n    manager.on('offer', function(message, connector)\n    {\n      var from = message.from;\n      var dest = message.dest;\n\n      // Ignore messages send by us\n      if(from == self.sessionID) return;\n\n      // Message is for us\n      if(dest == self.sessionID)\n      {\n        console.log(\"[\"+self.sessionID+\"] Received connection request from \"+from);\n\n        if(connectionProcessed(from))\n          return;\n\n        var request = message;\n\n        // Search the peer between the list of currently connected ones,\n        // or create it if it's not connected\n        var pc = createPeerConnection(from, \"answer\", function(answer)\n        {\n          var message = request.reply(from, answer);\n\n          // Send back the connection request over the same connector, since\n          // this should be the shortest path to connect both peers\n          connector.send(message);\n        });\n\n        initPeerConnection_Answer(pc, message.sdp);\n      }\n\n      // Forward message\n      else\n        forward(message, connector);\n    });\n\n    manager.on('answer', function(message, connector)\n    {\n      var from = message.from;\n      var dest = message.dest;\n\n      // Ignore messages send by us\n      if(from == self.sessionID) return;\n\n      // Message is for us\n      if(dest == self.sessionID)\n      {\n        console.log(\"[\"+self.sessionID+\"] Received connection response from \"+from);\n\n        var peer = offers[from];\n        if(peer)\n        {\n          peer.peerConnection.setRemoteDescription(new RTCSessionDescription(\n          {\n            sdp: message.sdp,\n            type: 'answer'\n          }),\n          function()\n          {\n            console.log(\"Successfuly generated RemoteDescription for \"+from);\n          },\n          onerror);\n        }\n        else\n          console.warn(\"[\"+self.sessionID+\"] Connection with peer '\" + from + \"' was not previously requested\");\n      }\n\n      // Forward message\n      else\n        forward(message, connector);\n    });\n  };\n\n  // Init managers events\n\n  initManagerEvents(handshakeManager);\n  initManagerEvents(peersManager);\n\n  handshakeManager.on('presence', function(from, connector)\n  {\n    // Ignore messages send by us\n    if(from == self.sessionID) return;\n\n    var peer = peersManager.get(from);\n    if(!peer)\n    {\n      var pc = createPeerConnection(from, \"offer\", function(offer)\n      {\n        var message = messagepacker.offer(from, offer);\n\n        offers[from] =\n        {\n          message: message,\n          peerConnection: pc\n        };\n\n        // Send back the connection request over the same connector, since this\n        // should be the shortest path to connect both peers\n        connector.send(message);\n      });\n\n      pc.addEventListener('signalingstatechange', function(event)\n      {\n        // If PeerConnection object gets open, increase number of connections\n        // fetch over this connector so it can decide if it could close\n        if(pc.signalingState == 'stable')\n          connector.increaseConnections();\n      });\n\n      initPeerConnection_Offer(pc);\n    }\n  });\n\n\n  //\n  // Clossing functions\n  //\n\n  this.close = function()\n  {\n    handshakeManager.close();\n    peersManager.close();\n  };\n\n  // Close all connections when user goes out of the page\n  if(window)\n    window.addEventListener('beforeunload', function(event)\n    {\n      self.close();\n    });\n};\nWebP2P.prototype.__proto__   = EventEmitter.prototype;\nWebP2P.prototype.constructor = WebP2P;\n\n\nmodule.exports = WebP2P;\n","var HandshakeConnector = require(\"./core/HandshakeConnector\");\n\nvar PUBNUB = require(\"pubnub\");\n\n\n/**\n * Handshake connector for PubNub\n * @param {Object} configuration Configuration object.\n */\nfunction Connector_PubNub(config_init, config_mess, max_connections)\n{\n  HandshakeConnector.call(this, max_connections);\n\n  var self = this;\n\n  var channel = config_mess.channel;\n\n\n  // Connect a handshake connector to the PubNub server\n  var pubnub = PUBNUB.init(config_init);\n\n  // Configure handshake connector\n  pubnub.subscribe(\n  {\n    channel: channel,\n    restore: false,\n    backfill: false,\n\n    connect:    self._open,\n    message:    self._message,\n    disconnect: self._close,\n\n    error: function(response)\n    {\n      self._error(new Error(response ? response.error : 'Undefined error'))\n    }\n  });\n\n\n  // Define methods\n\n  /**\n   * Close the connection with this handshake server\n   */\n  this.close = function()\n  {\n    pubnub.unsubscribe(\n    {\n      channel: channel\n    });\n\n    // This shouldn't be necesary, but seems 'disconnect' event is not being\n    // dispatched by the PubNub channel, so we close the connector explicitly\n    self._close();\n  }\n\n  /**\n   * Send the message\n   */\n  this.send = function(message)\n  {\n    pubnub.publish(\n    {\n      channel: channel,\n      message: message\n    });\n  };\n}\nConnector_PubNub.prototype.__proto__   = HandshakeConnector.prototype;\nConnector_PubNub.prototype.constructor = Connector_PubNub;\n\n// Class constants\nConnector_PubNub.prototype.max_connections = 50;\nObject.defineProperty(Connector_PubNub.prototype, 'max_chars', {value: 1800});\n\n\nmodule.exports = Connector_PubNub;\n","var EventEmitter = require(\"events\").EventEmitter;\n\n\nfunction Connector()\n{\n  EventEmitter.call(this);\n\n  var self = this;\n\n\n  /**\n   * Notify that the connection to this handshake server is open\n   */\n  this._open = function()\n  {\n    self.emit('open');\n  };\n\n  this._message = function(message)\n  {\n    self.emit(\"message\", message);\n  };\n\n  this._close = function()\n  {\n    self.emit('close');\n  };\n\n  this._error = function(error)\n  {\n    self.emit('error', error);\n  };\n};\nConnector.prototype.__proto__   = EventEmitter.prototype;\nConnector.prototype.constructor = Connector;\n\nConnector.prototype.close = function()\n{\n  throw new TypeError(\"Connector.close should be defined in a child class\");\n};\nConnector.prototype.send = function(message)\n{\n  throw new TypeError(\"Connector.send should be defined in a child class\");\n};\n\n\nmodule.exports = Connector;","var Connector = require(\"./Connector\");\n\n\nfunction Connector_DataChannel(datachannel)\n{\n  Connector.call(this);\n\n  var self = this;\n\n\n  datachannel.addEventListener('open',  self._open);\n  datachannel.addEventListener('message', function(event)\n  {\n    self._message(JSON.parse(event.data));\n  });\n  datachannel.addEventListener('close', self._close);\n  datachannel.addEventListener('error', self._error);\n\n\n  // Define methods\n\n  /**\n   * Close the connection with the peer\n   */\n  this.close = function()\n  {\n    datachannel.close();\n  };\n\n  /**\n   * Send the message\n   */\n  this.send = function(message)\n  {\n    datachannel.send(JSON.stringify(message));\n  };\n};\nConnector_DataChannel.prototype.__proto__   = Connector.prototype;\nConnector_DataChannel.prototype.constructor = Connector_DataChannel;\n\n\nmodule.exports = Connector_DataChannel;","var Connector = require(\"./Connector\");\n\n\nfunction HandshakeConnector(max_connections)\n{\n  Connector.call(this);\n\n  var self = this;\n\n\n  if(max_connections != undefined)\n    this.max_connections = Math.min(max_connections, this.max_connections);\n\n  /**\n   * Check if we should connect this new peer or ignore it to increase entropy\n   * in the network mesh\n   *\n   * @returns {Boolean}\n   */\n  this.shouldConnect = function()\n  {\n    return true;\n  };\n\n\n  // Count the maximum number of pending connections allowed to be\n  // done with this handshake server (undefined == unlimited)\n  var connections = 0;\n\n  this.increaseConnections = function()\n  {\n    // Increase the number of connections reached throught\n    // this handshake server\n    connections++;\n\n    // Close connection with handshake server if we got its quota of peers\n    if(connections >= self.max_connections)\n       self.close();\n  };\n};\nHandshakeConnector.prototype.__proto__   = Connector.prototype;\nHandshakeConnector.prototype.constructor = HandshakeConnector;\n\n// Class constants\nHandshakeConnector.prototype.max_connections = Number.POSITIVE_INFINITY;\n\n\nmodule.exports = HandshakeConnector;","const ERROR_NETWORK_UNKNOWN = {id: 0, msg: 'Unable to fetch handshake servers configuration'};\nconst ERROR_NETWORK_OFFLINE = {id: 1, msg: \"There's no available network\"};\nconst ERROR_REQUEST_FAILURE = {id: 2, msg: 'Unable to fetch handshake servers configuration'};\nconst ERROR_REQUEST_EMPTY   = {id: 3, msg: 'Handshake servers configuration is empty'};\n\nconst ERROR_NO_PEERS        = {id: 4, msg: 'Not connected to any peer'};\n\n\nexports.ERROR_NETWORK_UNKNOWN = ERROR_NETWORK_UNKNOWN;\nexports.ERROR_NETWORK_OFFLINE = ERROR_NETWORK_OFFLINE;\nexports.ERROR_REQUEST_FAILURE = ERROR_REQUEST_FAILURE;\nexports.ERROR_REQUEST_EMPTY   = ERROR_REQUEST_EMPTY;\nexports.ERROR_NO_PEERS        = ERROR_NO_PEERS;","/**\n * New node file\n */\nvar HandshakeConnector = require('./connectors/core/HandshakeConnector');\nvar WebP2P             = require('./WebP2P');\n\n\nmodule.exports = WebP2P;\nmodule.exports.HandshakeConnector = HandshakeConnector;","var Manager = require('./Manager');\n\nvar errors = require('../errors');\n\n\nvar Connector_PubNub = require('../connectors/PubNub');\n\n\n/**\n * Manage the handshake connectors using several servers\n *\n * @constructor\n * @param {String} json_uri URI of the handshake servers configuration.\n */\nfunction HandshakeManager(messagepacker, handshake_servers)\n{\n  Manager.call(this, messagepacker);\n\n  var self = this;\n\n\n  var handshakeConnectorConstructors = {};\n\n  this.registerConnectorConstructor = function(type, constructor)\n  {\n    handshakeConnectorConstructors[type] = constructor\n  };\n\n\n  // Default handshake connectors\n  this.registerConnectorConstructor('PubNub', Connector_PubNub);\n\n\n  function createConnector(config)\n  {\n    var type            = config.type;\n    var config_init     = config.config_init;\n    var config_mess     = config.config_mess;\n    var max_connections = config.max_connections;\n\n    // Check if connector constructor is from a valid handshake server\n    var connectorConstructor = handshakeConnectorConstructors[type];\n    if(!connectorConstructor)\n      throw Error(\"Invalid handshake server type '\" + type + \"'\");\n\n    var connector = new connectorConstructor(config_init, config_mess, max_connections);\n\n    self._initConnector(connector);\n\n    connector.on('open', function()\n    {\n      // Notify our presence to the other peers\n      connector.send(messagepacker.presence());\n    });\n\n    var _messageUnpacked = connector._messageUnpacked;\n    connector._messageUnpacked = function(message)\n    {\n      if(message.type == 'presence')\n      {\n        if(connector.shouldConnect())\n          self.emit(\"presence\", message.from, connector);\n      }\n      else\n        _messageUnpacked.call(connector, message);\n    };\n\n    return connector;\n  };\n\n\n  var configs = [];\n  var index = 0;\n\n  var configs_infinity = [];\n\n  /**\n   * Get a random handshake connector or test for the next one\n   * @param {Object} configuration Handshake servers configuration.\n   */\n  function handshake()\n  {\n    if(!configs.length)\n      throw Error('No handshake servers defined')\n\n    for(; index < configs.length; index++)\n    {\n      var connector = createConnector(configs[index]);\n          connector.on('close', function()\n      {\n        // Handshake connector has been closed, try to get an alternative one\n        index++;\n        handshake();\n      });\n\n      // Connector successfully created\n      return;\n    };\n\n    // All configured handshake servers has been consumed\n    // Get ready to start again from beginning of handshake servers list\n    index = 0;\n  };\n\n\n  this.addConfigs_byObject = function(config)\n  {\n    // Check if connector constructor is from a valid handshake server\n    var connectorConstructor = handshakeConnectorConstructors[config.type];\n    if(!connectorConstructor)\n    {\n      console.error(\"Invalid handshake server config: \", config);\n      return;\n    };\n\n    if(connectorConstructor.prototype.max_connections == Number.POSITIVE_INFINITY\n    && !config.max_connections)\n    {\n      configs_infinity.push(config)\n\n      // Start handshaking\n      createConnector(config);\n    }\n    else\n    {\n      configs.push(config);\n\n      // Start handshaking\n      if(self.status == 'disconnected')\n      {\n        if(index == undefined)\n           index = 0;\n\n        handshake();\n      }\n    }\n  };\n\n  this.addConfigs_byArray = function(configuration)\n  {\n    for(var i=0, config; config=configuration[i]; i++)\n      self.addConfigs_byObject(config);\n  };\n\n  this.addConfigs_byUri = function(json_uri)\n  {\n    function dispatchError(error)\n    {\n      self.emit('error', error);\n    };\n\n    // Request the handshake servers configuration file\n    var http_request = new XMLHttpRequest();\n\n    http_request.open('GET', json_uri);\n    http_request.onload = function(event)\n    {\n      if(this.status == 200)\n      {\n        var configuration = JSON.parse(http_request.response);\n\n        // We got some config entries\n        if(configuration.length)\n          this.addConfigs_byArray(configuration)\n\n        // Config was empty\n        else\n          dispatchError(errors.ERROR_REQUEST_EMPTY)\n      }\n\n      // Request returned an error\n      else\n        dispatchError(errors.ERROR_REQUEST_FAILURE)\n    };\n\n    // Connection error\n    http_request.onerror = function(event)\n    {\n      dispatchError(navigator.onLine ? errors.ERROR_NETWORK_UNKNOWN\n                                     : errors.ERROR_NETWORK_OFFLINE)\n    };\n\n    http_request.send();\n  };\n\n  this.addConfigs = function(configuration)\n  {\n    if(typeof configuration == 'string')\n      this.addConfigs_byUri(configuration)\n\n    else if(configuration instanceof Array)\n      this.addConfigs_byArray(configuration)\n\n    else\n      this.addConfigs_byObject(configuration)\n  };\n\n\n  // Add handshake servers configuration\n  if(handshake_servers)\n    this.addConfigs(handshake_servers)\n};\nHandshakeManager.prototype.__proto__   = Manager.prototype;\nHandshakeManager.prototype.constructor = HandshakeManager;\n\n\nmodule.exports = HandshakeManager;","var EventEmitter = require(\"events\").EventEmitter;\n\n\nfunction Manager(messagepacker)\n{\n  EventEmitter.call(this);\n\n  var self = this;\n\n\n  this._connectors = [];\n\n  this.__defineGetter__(\"status\", function()\n  {\n    return this._connectors.length ? 'connected' : 'disconnected';\n  });\n\n\n  this._initConnector = function(connector)\n  {\n    connector.on('open', function()\n    {\n//      for(var i=0, conn; conn=self._connectors[i]; i++)\n//        if(conn===connector)\n//          console.error('Duplicate connector',connector);\n\n      self._connectors.push(connector);\n\n      if(self._connectors.length == 1)\n         self.emit('connected');\n    });\n    connector.on('close', function()\n    {\n      self._connectors.splice(self._connectors.indexOf(connector), 1);\n\n      if(self._connectors.length == 0)\n         self.emit('disconnected');\n    });\n    connector.on('error', function(error)\n    {\n      connector.close();\n\n      self.emit('error', error);\n    });\n\n    connector._messageUnpacked = function(message)\n    {\n      switch(message.type)\n      {\n        case 'offer':\n        case 'answer':\n          self.emit(message.type, message, connector);\n        break;\n\n        default:\n          console.error(\"Unknown message type '\"+type+\"'\");\n          console.error(message);\n      };\n    };\n\n    connector.on('message', function(message)\n    {\n      message = messagepacker.unpack(message);\n      if(message)\n      {\n        // Response was previously stored, send it directly\n        if(message.stored)\n          connector.send(message)\n\n        // Normal message, process it\n        else\n          connector._messageUnpacked(message);\n      };\n    });\n  };\n\n\n  /**\n   * {Object} message - Message to be send\n   * {Connector} [incomingConnector] - {Connector} to don't send the message\n   */\n  this.send = function(message, incomingConnector)\n  {\n    for(var i=0, connector; connector=this._connectors[i]; i++)\n    {\n      // Don't send the message to the same connector where we received it\n      if(connector === incomingConnector)\n        continue;\n\n      connector.send(message);\n    };\n  };\n\n\n  /**\n   * Close all the connections\n   */\n  this.close = function()\n  {\n    for(var i=0, connector; connector=this._connectors[i]; i++)\n      connector.close();\n  };\n};\nManager.prototype.__proto__   = EventEmitter.prototype;\nManager.prototype.constructor = Manager;\n\n\nmodule.exports = Manager;","var Manager = require('./Manager');\n\nvar Connector_DataChannel = require('../connectors/core/DataChannel');\n\n\n/**\n * @classdesc Manager of the communications with the other peers\n *\n * @constructor\n */\nfunction PeersManager(messagepacker, routingLabel)\n{\n  Manager.call(this, messagepacker);\n\n  var self = this;\n\n\n  function createConnector(channel)\n  {\n    var connector = new Connector_DataChannel(channel);\n\n    self._initConnector(connector);\n\n    return connector;\n  };\n\n\n  var peers = {};\n\n  this.__defineGetter__(\"peers\", function()\n  {\n    return peers;\n  });\n\n\n  function initDataChannel(channel, sessionID)\n  {\n    if(channel.label == routingLabel)\n    {\n      var connector = createConnector(channel);\n          connector.sessionID = sessionID;\n\n      return connector;\n    };\n  };\n\n  this.add = function(sessionID, peerConnection, channels)\n  {\n    peerConnection.addEventListener('signalingstatechange', function(event)\n    {\n      // Remove the peer from the list of peers when gets closed\n      if(peerConnection.signalingState == 'closed')\n        delete peers[sessionID];\n    });\n\n    // Connection initiator\n    if(channels.length)\n    {\n      // Only init the routing functionality on the routing channel\n      for(var i=0, channel; channel=channels[i]; i++)\n        if(initDataChannel(channel, sessionID))\n          break;\n    }\n\n    // Connection receiver\n    else\n    {\n      function initDataChannel_listener(event)\n      {\n        var channel = event.channel;\n\n        var connector = initDataChannel(channel, sessionID);\n        if(connector)\n          event.target.removeEventListener('datachannel', initDataChannel_listener);\n      };\n\n      peerConnection.addEventListener('datachannel', initDataChannel_listener);\n    };\n\n    // Add PeerConnection to the list of enabled ones\n    peers[sessionID] = peerConnection;\n  };\n\n  this.get = function(sessionID)\n  {\n    return peers[sessionID];\n  };\n};\nPeersManager.prototype.__proto__   = Manager.prototype;\nPeersManager.prototype.constructor = PeersManager;\n\n\nmodule.exports = PeersManager;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        throw TypeError('Uncaught, unspecified \"error\" event.');\n      }\n      return false;\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      console.trace();\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"PcZj9L\":[function(require,module,exports){\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = Buffer\nexports.INSPECT_MAX_BYTES = 50\nBuffer.poolSize = 8192\n\n/**\n * If `browserSupport`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (compatible down to IE6)\n */\nvar browserSupport = (function () {\n   // Detect if browser supports Typed Arrays. Supported browsers are IE 10+,\n   // Firefox 4+, Chrome 7+, Safari 5.1+, Opera 11.6+, iOS 4.2+.\n   if (typeof Uint8Array === 'undefined' || typeof ArrayBuffer === 'undefined' ||\n        typeof DataView === 'undefined')\n      return false\n\n  // Does the browser support adding properties to `Uint8Array` instances? If\n  // not, then that's the same as no `Uint8Array` support. We need to be able to\n  // add all the node Buffer API methods.\n  // Relevant Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=695438\n  try {\n    var arr = new Uint8Array(0)\n    arr.foo = function () { return 42 }\n    return 42 === arr.foo()\n  } catch (e) {\n    return false\n  }\n})()\n\n\n/**\n * Class: Buffer\n * =============\n *\n * The Buffer constructor returns instances of `Uint8Array` that are augmented\n * with function properties for all the node `Buffer` API functions. We use\n * `Uint8Array` so that square bracket notation works as expected -- it returns\n * a single octet.\n *\n * By augmenting the instances, we can avoid modifying the `Uint8Array`\n * prototype.\n */\nfunction Buffer (subject, encoding, noZero) {\n  if (!(this instanceof Buffer))\n    return new Buffer(subject, encoding, noZero)\n\n  var type = typeof subject\n\n  // Workaround: node's base64 implementation allows for non-padded strings\n  // while base64-js does not.\n  if (encoding === 'base64' && type === 'string') {\n    subject = stringtrim(subject)\n    while (subject.length % 4 !== 0) {\n      subject = subject + '='\n    }\n  }\n\n  // Find the length\n  var length\n  if (type === 'number')\n    length = coerce(subject)\n  else if (type === 'string')\n    length = Buffer.byteLength(subject, encoding)\n  else if (type === 'object')\n    length = coerce(subject.length) // Assume object is an array\n  else\n    throw new Error('First argument needs to be a number, array or string.')\n\n  var buf\n  if (browserSupport) {\n    // Preferred: Return an augmented `Uint8Array` instance for best performance\n    buf = augment(new Uint8Array(length))\n  } else {\n    // Fallback: Return this instance of Buffer\n    buf = this\n    buf.length = length\n  }\n\n  var i\n  if (Buffer.isBuffer(subject)) {\n    // Speed optimization -- use set if we're copying from a Uint8Array\n    buf.set(subject)\n  } else if (isArrayish(subject)) {\n    // Treat array-ish objects as a byte array\n    for (i = 0; i < length; i++) {\n      if (Buffer.isBuffer(subject))\n        buf[i] = subject.readUInt8(i)\n      else\n        buf[i] = subject[i]\n    }\n  } else if (type === 'string') {\n    buf.write(subject, 0, encoding)\n  } else if (type === 'number' && !browserSupport && !noZero) {\n    for (i = 0; i < length; i++) {\n      buf[i] = 0\n    }\n  }\n\n  return buf\n}\n\n// STATIC METHODS\n// ==============\n\nBuffer.isEncoding = function (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'binary':\n    case 'base64':\n    case 'raw':\n      return true\n\n    default:\n      return false\n  }\n}\n\nBuffer.isBuffer = function (b) {\n  return b && b._isBuffer\n}\n\nBuffer.byteLength = function (str, encoding) {\n  switch (encoding || 'utf8') {\n    case 'hex':\n      return str.length / 2\n\n    case 'utf8':\n    case 'utf-8':\n      return utf8ToBytes(str).length\n\n    case 'ascii':\n    case 'binary':\n      return str.length\n\n    case 'base64':\n      return base64ToBytes(str).length\n\n    default:\n      throw new Error('Unknown encoding')\n  }\n}\n\nBuffer.concat = function (list, totalLength) {\n  if (!isArray(list)) {\n    throw new Error('Usage: Buffer.concat(list, [totalLength])\\n' +\n        'list should be an Array.')\n  }\n\n  if (list.length === 0) {\n    return new Buffer(0)\n  } else if (list.length === 1) {\n    return list[0]\n  }\n\n  var i\n  if (typeof totalLength !== 'number') {\n    totalLength = 0\n    for (i = 0; i < list.length; i++) {\n      totalLength += list[i].length\n    }\n  }\n\n  var buf = new Buffer(totalLength)\n  var pos = 0\n  for (i = 0; i < list.length; i++) {\n    var item = list[i]\n    item.copy(buf, pos)\n    pos += item.length\n  }\n  return buf\n}\n\n// BUFFER INSTANCE METHODS\n// =======================\n\nfunction _hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) {\n    throw new Error('Invalid hex string')\n  }\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; i++) {\n    var byte = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(byte)) throw new Error('Invalid hex string')\n    buf[offset + i] = byte\n  }\n  Buffer._charsWritten = i * 2\n  return i\n}\n\nfunction _utf8Write (buf, string, offset, length) {\n  var bytes, pos\n  return Buffer._charsWritten = blitBuffer(utf8ToBytes(string), buf, offset, length)\n}\n\nfunction _asciiWrite (buf, string, offset, length) {\n  var bytes, pos\n  return Buffer._charsWritten = blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction _binaryWrite (buf, string, offset, length) {\n  return _asciiWrite(buf, string, offset, length)\n}\n\nfunction _base64Write (buf, string, offset, length) {\n  var bytes, pos\n  return Buffer._charsWritten = blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nBuffer.prototype.write = function (string, offset, length, encoding) {\n  // Support both (string, offset, length, encoding)\n  // and the legacy (string, encoding, offset, length)\n  if (isFinite(offset)) {\n    if (!isFinite(length)) {\n      encoding = length\n      length = undefined\n    }\n  } else {  // legacy\n    var swap = encoding\n    encoding = offset\n    offset = length\n    length = swap\n  }\n\n  offset = Number(offset) || 0\n  var remaining = this.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n  encoding = String(encoding || 'utf8').toLowerCase()\n\n  switch (encoding) {\n    case 'hex':\n      return _hexWrite(this, string, offset, length)\n\n    case 'utf8':\n    case 'utf-8':\n      return _utf8Write(this, string, offset, length)\n\n    case 'ascii':\n      return _asciiWrite(this, string, offset, length)\n\n    case 'binary':\n      return _binaryWrite(this, string, offset, length)\n\n    case 'base64':\n      return _base64Write(this, string, offset, length)\n\n    default:\n      throw new Error('Unknown encoding')\n  }\n}\n\nBuffer.prototype.toString = function (encoding, start, end) {\n  var self = this\n\n  encoding = String(encoding || 'utf8').toLowerCase()\n  start = Number(start) || 0\n  end = (end !== undefined)\n    ? Number(end)\n    : end = self.length\n\n  // Fastpath empty strings\n  if (end === start)\n    return ''\n\n  switch (encoding) {\n    case 'hex':\n      return _hexSlice(self, start, end)\n\n    case 'utf8':\n    case 'utf-8':\n      return _utf8Slice(self, start, end)\n\n    case 'ascii':\n      return _asciiSlice(self, start, end)\n\n    case 'binary':\n      return _binarySlice(self, start, end)\n\n    case 'base64':\n      return _base64Slice(self, start, end)\n\n    default:\n      throw new Error('Unknown encoding')\n  }\n}\n\nBuffer.prototype.toJSON = function () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function (target, target_start, start, end) {\n  var source = this\n\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (!target_start) target_start = 0\n\n  // Copy 0 bytes; we're done\n  if (end === start) return\n  if (target.length === 0 || source.length === 0) return\n\n  // Fatal error conditions\n  if (end < start)\n    throw new Error('sourceEnd < sourceStart')\n  if (target_start < 0 || target_start >= target.length)\n    throw new Error('targetStart out of bounds')\n  if (start < 0 || start >= source.length)\n    throw new Error('sourceStart out of bounds')\n  if (end < 0 || end > source.length)\n    throw new Error('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length)\n    end = this.length\n  if (target.length - target_start < end - start)\n    end = target.length - target_start + start\n\n  // copy!\n  for (var i = 0; i < end - start; i++)\n    target[i + target_start] = this[i + start]\n}\n\nfunction _base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction _utf8Slice (buf, start, end) {\n  var res = ''\n  var tmp = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    if (buf[i] <= 0x7F) {\n      res += decodeUtf8Char(tmp) + String.fromCharCode(buf[i])\n      tmp = ''\n    } else {\n      tmp += '%' + buf[i].toString(16)\n    }\n  }\n\n  return res + decodeUtf8Char(tmp)\n}\n\nfunction _asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++)\n    ret += String.fromCharCode(buf[i])\n  return ret\n}\n\nfunction _binarySlice (buf, start, end) {\n  return _asciiSlice(buf, start, end)\n}\n\nfunction _hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; i++) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\n// TODO: add test that modifying the new buffer slice will modify memory in the\n// original buffer! Use code from:\n// http://nodejs.org/api/buffer.html#buffer_buf_slice_start_end\nBuffer.prototype.slice = function (start, end) {\n  var len = this.length\n  start = clamp(start, len, 0)\n  end = clamp(end, len, len)\n\n  if (browserSupport) {\n    return augment(this.subarray(start, end))\n  } else {\n    // TODO: slicing works, with limitations (no parent tracking/update)\n    // https://github.com/feross/native-buffer-browserify/issues/9\n    var sliceLen = end - start\n    var newBuf = new Buffer(sliceLen, undefined, true)\n    for (var i = 0; i < sliceLen; i++) {\n      newBuf[i] = this[i + start]\n    }\n    return newBuf\n  }\n}\n\nBuffer.prototype.readUInt8 = function (offset, noAssert) {\n  var buf = this\n  if (!noAssert) {\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  if (offset >= buf.length)\n    return\n\n  return buf[offset]\n}\n\nfunction _readUInt16 (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 1 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 1 < len) {\n      return buf._dataview.getUint16(offset, littleEndian)\n    } else {\n      var dv = new DataView(new ArrayBuffer(2))\n      dv.setUint8(0, buf[len - 1])\n      return dv.getUint16(0, littleEndian)\n    }\n  } else {\n    var val\n    if (littleEndian) {\n      val = buf[offset]\n      if (offset + 1 < len)\n        val |= buf[offset + 1] << 8\n    } else {\n      val = buf[offset] << 8\n      if (offset + 1 < len)\n        val |= buf[offset + 1]\n    }\n    return val\n  }\n}\n\nBuffer.prototype.readUInt16LE = function (offset, noAssert) {\n  return _readUInt16(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readUInt16BE = function (offset, noAssert) {\n  return _readUInt16(this, offset, false, noAssert)\n}\n\nfunction _readUInt32 (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 3 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 3 < len) {\n      return buf._dataview.getUint32(offset, littleEndian)\n    } else {\n      var dv = new DataView(new ArrayBuffer(4))\n      for (var i = 0; i + offset < len; i++) {\n        dv.setUint8(i, buf[i + offset])\n      }\n      return dv.getUint32(0, littleEndian)\n    }\n  } else {\n    var val\n    if (littleEndian) {\n      if (offset + 2 < len)\n        val = buf[offset + 2] << 16\n      if (offset + 1 < len)\n        val |= buf[offset + 1] << 8\n      val |= buf[offset]\n      if (offset + 3 < len)\n        val = val + (buf[offset + 3] << 24 >>> 0)\n    } else {\n      if (offset + 1 < len)\n        val = buf[offset + 1] << 16\n      if (offset + 2 < len)\n        val |= buf[offset + 2] << 8\n      if (offset + 3 < len)\n        val |= buf[offset + 3]\n      val = val + (buf[offset] << 24 >>> 0)\n    }\n    return val\n  }\n}\n\nBuffer.prototype.readUInt32LE = function (offset, noAssert) {\n  return _readUInt32(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readUInt32BE = function (offset, noAssert) {\n  return _readUInt32(this, offset, false, noAssert)\n}\n\nBuffer.prototype.readInt8 = function (offset, noAssert) {\n  var buf = this\n  if (!noAssert) {\n    assert(offset !== undefined && offset !== null,\n        'missing offset')\n    assert(offset < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  if (offset >= buf.length)\n    return\n\n  if (browserSupport) {\n    return buf._dataview.getInt8(offset)\n  } else {\n    var neg = buf[offset] & 0x80\n    if (neg)\n      return (0xff - buf[offset] + 1) * -1\n    else\n      return buf[offset]\n  }\n}\n\nfunction _readInt16 (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 1 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 1 === len) {\n      var dv = new DataView(new ArrayBuffer(2))\n      dv.setUint8(0, buf[len - 1])\n      return dv.getInt16(0, littleEndian)\n    } else {\n      return buf._dataview.getInt16(offset, littleEndian)\n    }\n  } else {\n    var val = _readUInt16(buf, offset, littleEndian, true)\n    var neg = val & 0x8000\n    if (neg)\n      return (0xffff - val + 1) * -1\n    else\n      return val\n  }\n}\n\nBuffer.prototype.readInt16LE = function (offset, noAssert) {\n  return _readInt16(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readInt16BE = function (offset, noAssert) {\n  return _readInt16(this, offset, false, noAssert)\n}\n\nfunction _readInt32 (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 3 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 3 >= len) {\n      var dv = new DataView(new ArrayBuffer(4))\n      for (var i = 0; i + offset < len; i++) {\n        dv.setUint8(i, buf[i + offset])\n      }\n      return dv.getInt32(0, littleEndian)\n    } else {\n      return buf._dataview.getInt32(offset, littleEndian)\n    }\n  } else {\n    var val = _readUInt32(buf, offset, littleEndian, true)\n    var neg = val & 0x80000000\n    if (neg)\n      return (0xffffffff - val + 1) * -1\n    else\n      return val\n  }\n}\n\nBuffer.prototype.readInt32LE = function (offset, noAssert) {\n  return _readInt32(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readInt32BE = function (offset, noAssert) {\n  return _readInt32(this, offset, false, noAssert)\n}\n\nfunction _readFloat (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset + 3 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  if (browserSupport) {\n    return buf._dataview.getFloat32(offset, littleEndian)\n  } else {\n    return ieee754.read(buf, offset, littleEndian, 23, 4)\n  }\n}\n\nBuffer.prototype.readFloatLE = function (offset, noAssert) {\n  return _readFloat(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readFloatBE = function (offset, noAssert) {\n  return _readFloat(this, offset, false, noAssert)\n}\n\nfunction _readDouble (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset + 7 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  if (browserSupport) {\n    return buf._dataview.getFloat64(offset, littleEndian)\n  } else {\n    return ieee754.read(buf, offset, littleEndian, 52, 8)\n  }\n}\n\nBuffer.prototype.readDoubleLE = function (offset, noAssert) {\n  return _readDouble(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readDoubleBE = function (offset, noAssert) {\n  return _readDouble(this, offset, false, noAssert)\n}\n\nBuffer.prototype.writeUInt8 = function (value, offset, noAssert) {\n  var buf = this\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset < buf.length, 'trying to write beyond buffer length')\n    verifuint(value, 0xff)\n  }\n\n  if (offset >= buf.length) return\n\n  buf[offset] = value\n}\n\nfunction _writeUInt16 (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 1 < buf.length, 'trying to write beyond buffer length')\n    verifuint(value, 0xffff)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 1 === len) {\n      var dv = new DataView(new ArrayBuffer(2))\n      dv.setUint16(0, value, littleEndian)\n      buf[offset] = dv.getUint8(0)\n    } else {\n      buf._dataview.setUint16(offset, value, littleEndian)\n    }\n  } else {\n    for (var i = 0, j = Math.min(len - offset, 2); i < j; i++) {\n      buf[offset + i] =\n          (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n              (littleEndian ? i : 1 - i) * 8\n    }\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function (value, offset, noAssert) {\n  _writeUInt16(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeUInt16BE = function (value, offset, noAssert) {\n  _writeUInt16(this, value, offset, false, noAssert)\n}\n\nfunction _writeUInt32 (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 3 < buf.length, 'trying to write beyond buffer length')\n    verifuint(value, 0xffffffff)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  var i\n  if (browserSupport) {\n    if (offset + 3 >= len) {\n      var dv = new DataView(new ArrayBuffer(4))\n      dv.setUint32(0, value, littleEndian)\n      for (i = 0; i + offset < len; i++) {\n        buf[i + offset] = dv.getUint8(i)\n      }\n    } else {\n      buf._dataview.setUint32(offset, value, littleEndian)\n    }\n  } else {\n    for (i = 0, j = Math.min(len - offset, 4); i < j; i++) {\n      buf[offset + i] =\n          (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n    }\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function (value, offset, noAssert) {\n  _writeUInt32(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeUInt32BE = function (value, offset, noAssert) {\n  _writeUInt32(this, value, offset, false, noAssert)\n}\n\nBuffer.prototype.writeInt8 = function (value, offset, noAssert) {\n  var buf = this\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset < buf.length, 'Trying to write beyond buffer length')\n    verifsint(value, 0x7f, -0x80)\n  }\n\n  if (offset >= buf.length)\n    return\n\n  if (browserSupport) {\n    buf._dataview.setInt8(offset, value)\n  } else {\n    if (value >= 0)\n      buf.writeUInt8(value, offset, noAssert)\n    else\n      buf.writeUInt8(0xff + value + 1, offset, noAssert)\n  }\n}\n\nfunction _writeInt16 (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 1 < buf.length, 'Trying to write beyond buffer length')\n    verifsint(value, 0x7fff, -0x8000)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 1 === len) {\n      var dv = new DataView(new ArrayBuffer(2))\n      dv.setInt16(0, value, littleEndian)\n      buf[offset] = dv.getUint8(0)\n    } else {\n      buf._dataview.setInt16(offset, value, littleEndian)\n    }\n  } else {\n    if (value >= 0)\n      _writeUInt16(buf, value, offset, littleEndian, noAssert)\n    else\n      _writeUInt16(buf, 0xffff + value + 1, offset, littleEndian, noAssert)\n  }\n}\n\nBuffer.prototype.writeInt16LE = function (value, offset, noAssert) {\n  _writeInt16(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeInt16BE = function (value, offset, noAssert) {\n  _writeInt16(this, value, offset, false, noAssert)\n}\n\nfunction _writeInt32 (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 3 < buf.length, 'Trying to write beyond buffer length')\n    verifsint(value, 0x7fffffff, -0x80000000)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 3 >= len) {\n      var dv = new DataView(new ArrayBuffer(4))\n      dv.setInt32(0, value, littleEndian)\n      for (var i = 0; i + offset < len; i++) {\n        buf[i + offset] = dv.getUint8(i)\n      }\n    } else {\n      buf._dataview.setInt32(offset, value, littleEndian)\n    }\n  } else {\n    if (value >= 0)\n      _writeUInt32(buf, value, offset, littleEndian, noAssert)\n    else\n      _writeUInt32(buf, 0xffffffff + value + 1, offset, littleEndian, noAssert)\n  }\n}\n\nBuffer.prototype.writeInt32LE = function (value, offset, noAssert) {\n  _writeInt32(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeInt32BE = function (value, offset, noAssert) {\n  _writeInt32(this, value, offset, false, noAssert)\n}\n\nfunction _writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 3 < buf.length, 'Trying to write beyond buffer length')\n    verifIEEE754(value, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 3 >= len) {\n      var dv = new DataView(new ArrayBuffer(4))\n      dv.setFloat32(0, value, littleEndian)\n      for (var i = 0; i + offset < len; i++) {\n        buf[i + offset] = dv.getUint8(i)\n      }\n    } else {\n      buf._dataview.setFloat32(offset, value, littleEndian)\n    }\n  } else {\n    ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  }\n}\n\nBuffer.prototype.writeFloatLE = function (value, offset, noAssert) {\n  _writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function (value, offset, noAssert) {\n  _writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction _writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 7 < buf.length,\n        'Trying to write beyond buffer length')\n    verifIEEE754(value, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 7 >= len) {\n      var dv = new DataView(new ArrayBuffer(8))\n      dv.setFloat64(0, value, littleEndian)\n      for (var i = 0; i + offset < len; i++) {\n        buf[i + offset] = dv.getUint8(i)\n      }\n    } else {\n      buf._dataview.setFloat64(offset, value, littleEndian)\n    }\n  } else {\n    ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  }\n}\n\nBuffer.prototype.writeDoubleLE = function (value, offset, noAssert) {\n  _writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function (value, offset, noAssert) {\n  _writeDouble(this, value, offset, false, noAssert)\n}\n\n// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill = function (value, start, end) {\n  if (!value) value = 0\n  if (!start) start = 0\n  if (!end) end = this.length\n\n  if (typeof value === 'string') {\n    value = value.charCodeAt(0)\n  }\n\n  if (typeof value !== 'number' || isNaN(value)) {\n    throw new Error('value is not a number')\n  }\n\n  if (end < start) throw new Error('end < start')\n\n  // Fill 0 bytes; we're done\n  if (end === start) return\n  if (this.length === 0) return\n\n  if (start < 0 || start >= this.length) {\n    throw new Error('start out of bounds')\n  }\n\n  if (end < 0 || end > this.length) {\n    throw new Error('end out of bounds')\n  }\n\n  for (var i = start; i < end; i++) {\n    this[i] = value\n  }\n}\n\nBuffer.prototype.inspect = function () {\n  var out = []\n  var len = this.length\n  for (var i = 0; i < len; i++) {\n    out[i] = toHex(this[i])\n    if (i === exports.INSPECT_MAX_BYTES) {\n      out[i + 1] = '...'\n      break\n    }\n  }\n  return '<Buffer ' + out.join(' ') + '>'\n}\n\n/**\n * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.\n * Added in Node 0.12. Not added to Buffer.prototype since it should only\n * be available in browsers that support ArrayBuffer.\n */\nfunction BufferToArrayBuffer () {\n  return (new Buffer(this)).buffer\n}\n\n// HELPER FUNCTIONS\n// ================\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nvar BP = Buffer.prototype\n\nfunction augment (arr) {\n  arr._isBuffer = true\n\n  // Augment the Uint8Array *instance* (not the class!) with Buffer methods\n  arr.write = BP.write\n  arr.toString = BP.toString\n  arr.toLocaleString = BP.toString\n  arr.toJSON = BP.toJSON\n  arr.copy = BP.copy\n  arr.slice = BP.slice\n  arr.readUInt8 = BP.readUInt8\n  arr.readUInt16LE = BP.readUInt16LE\n  arr.readUInt16BE = BP.readUInt16BE\n  arr.readUInt32LE = BP.readUInt32LE\n  arr.readUInt32BE = BP.readUInt32BE\n  arr.readInt8 = BP.readInt8\n  arr.readInt16LE = BP.readInt16LE\n  arr.readInt16BE = BP.readInt16BE\n  arr.readInt32LE = BP.readInt32LE\n  arr.readInt32BE = BP.readInt32BE\n  arr.readFloatLE = BP.readFloatLE\n  arr.readFloatBE = BP.readFloatBE\n  arr.readDoubleLE = BP.readDoubleLE\n  arr.readDoubleBE = BP.readDoubleBE\n  arr.writeUInt8 = BP.writeUInt8\n  arr.writeUInt16LE = BP.writeUInt16LE\n  arr.writeUInt16BE = BP.writeUInt16BE\n  arr.writeUInt32LE = BP.writeUInt32LE\n  arr.writeUInt32BE = BP.writeUInt32BE\n  arr.writeInt8 = BP.writeInt8\n  arr.writeInt16LE = BP.writeInt16LE\n  arr.writeInt16BE = BP.writeInt16BE\n  arr.writeInt32LE = BP.writeInt32LE\n  arr.writeInt32BE = BP.writeInt32BE\n  arr.writeFloatLE = BP.writeFloatLE\n  arr.writeFloatBE = BP.writeFloatBE\n  arr.writeDoubleLE = BP.writeDoubleLE\n  arr.writeDoubleBE = BP.writeDoubleBE\n  arr.fill = BP.fill\n  arr.inspect = BP.inspect\n  arr.toArrayBuffer = BufferToArrayBuffer\n\n  if (arr.byteLength !== 0)\n    arr._dataview = new DataView(arr.buffer, arr.byteOffset, arr.byteLength)\n\n  return arr\n}\n\n// slice(start, end)\nfunction clamp (index, len, defaultValue) {\n  if (typeof index !== 'number') return defaultValue\n  index = ~~index;  // Coerce to integer.\n  if (index >= len) return len\n  if (index >= 0) return index\n  index += len\n  if (index >= 0) return index\n  return 0\n}\n\nfunction coerce (length) {\n  // Coerce length to a number (possibly NaN), round up\n  // in case it's fractional (e.g. 123.456) then do a\n  // double negate to coerce a NaN to 0. Easy, right?\n  length = ~~Math.ceil(+length)\n  return length < 0 ? 0 : length\n}\n\nfunction isArray (subject) {\n  return (Array.isArray || function (subject) {\n    return Object.prototype.toString.call(subject) === '[object Array]'\n  })(subject)\n}\n\nfunction isArrayish (subject) {\n  return isArray(subject) || Buffer.isBuffer(subject) ||\n      subject && typeof subject === 'object' &&\n      typeof subject.length === 'number'\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++)\n    if (str.charCodeAt(i) <= 0x7F)\n      byteArray.push(str.charCodeAt(i))\n    else {\n      var h = encodeURIComponent(str.charAt(i)).substr(1).split('%')\n      for (var j = 0; j < h.length; j++)\n        byteArray.push(parseInt(h[j], 16))\n    }\n  return byteArray\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(str)\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  var pos\n  for (var i = 0; i < length; i++) {\n    if ((i + offset >= dst.length) || (i >= src.length))\n      break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction decodeUtf8Char (str) {\n  try {\n    return decodeURIComponent(str)\n  } catch (err) {\n    return String.fromCharCode(0xFFFD) // UTF 8 invalid char\n  }\n}\n\n/*\n * We have to make sure that the value is a valid integer. This means that it\n * is non-negative. It has no fractional component and that it does not\n * exceed the maximum allowed value.\n */\nfunction verifuint (value, max) {\n  assert(typeof value == 'number', 'cannot write a non-number as a number')\n  assert(value >= 0,\n      'specified a negative value for writing an unsigned value')\n  assert(value <= max, 'value is larger than maximum value for type')\n  assert(Math.floor(value) === value, 'value has a fractional component')\n}\n\nfunction verifsint(value, max, min) {\n  assert(typeof value == 'number', 'cannot write a non-number as a number')\n  assert(value <= max, 'value larger than maximum allowed value')\n  assert(value >= min, 'value smaller than minimum allowed value')\n  assert(Math.floor(value) === value, 'value has a fractional component')\n}\n\nfunction verifIEEE754(value, max, min) {\n  assert(typeof value == 'number', 'cannot write a non-number as a number')\n  assert(value <= max, 'value larger than maximum allowed value')\n  assert(value >= min, 'value smaller than minimum allowed value')\n}\n\nfunction assert (test, message) {\n  if (!test) throw new Error(message || 'Failed assertion')\n}\n\n},{\"base64-js\":3,\"ieee754\":4}],\"native-buffer-browserify\":[function(require,module,exports){\nmodule.exports=require('PcZj9L');\n},{}],3:[function(require,module,exports){\n(function (exports) {\n\t'use strict';\n\n\tvar lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n\tfunction b64ToByteArray(b64) {\n\t\tvar i, j, l, tmp, placeHolders, arr;\n\t\n\t\tif (b64.length % 4 > 0) {\n\t\t\tthrow 'Invalid string. Length must be a multiple of 4';\n\t\t}\n\n\t\t// the number of equal signs (place holders)\n\t\t// if there are two placeholders, than the two characters before it\n\t\t// represent one byte\n\t\t// if there is only one, then the three characters before it represent 2 bytes\n\t\t// this is just a cheap hack to not do indexOf twice\n\t\tplaceHolders = indexOf(b64, '=');\n\t\tplaceHolders = placeHolders > 0 ? b64.length - placeHolders : 0;\n\n\t\t// base64 is 4/3 + up to two characters of the original data\n\t\tarr = [];//new Uint8Array(b64.length * 3 / 4 - placeHolders);\n\n\t\t// if there are placeholders, only get up to the last complete 4 chars\n\t\tl = placeHolders > 0 ? b64.length - 4 : b64.length;\n\n\t\tfor (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t\t\ttmp = (indexOf(lookup, b64.charAt(i)) << 18) | (indexOf(lookup, b64.charAt(i + 1)) << 12) | (indexOf(lookup, b64.charAt(i + 2)) << 6) | indexOf(lookup, b64.charAt(i + 3));\n\t\t\tarr.push((tmp & 0xFF0000) >> 16);\n\t\t\tarr.push((tmp & 0xFF00) >> 8);\n\t\t\tarr.push(tmp & 0xFF);\n\t\t}\n\n\t\tif (placeHolders === 2) {\n\t\t\ttmp = (indexOf(lookup, b64.charAt(i)) << 2) | (indexOf(lookup, b64.charAt(i + 1)) >> 4);\n\t\t\tarr.push(tmp & 0xFF);\n\t\t} else if (placeHolders === 1) {\n\t\t\ttmp = (indexOf(lookup, b64.charAt(i)) << 10) | (indexOf(lookup, b64.charAt(i + 1)) << 4) | (indexOf(lookup, b64.charAt(i + 2)) >> 2);\n\t\t\tarr.push((tmp >> 8) & 0xFF);\n\t\t\tarr.push(tmp & 0xFF);\n\t\t}\n\n\t\treturn arr;\n\t}\n\n\tfunction uint8ToBase64(uint8) {\n\t\tvar i,\n\t\t\textraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes\n\t\t\toutput = \"\",\n\t\t\ttemp, length;\n\n\t\tfunction tripletToBase64 (num) {\n\t\t\treturn lookup.charAt(num >> 18 & 0x3F) + lookup.charAt(num >> 12 & 0x3F) + lookup.charAt(num >> 6 & 0x3F) + lookup.charAt(num & 0x3F);\n\t\t};\n\n\t\t// go through the array every three bytes, we'll deal with trailing stuff later\n\t\tfor (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t\t\ttemp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2]);\n\t\t\toutput += tripletToBase64(temp);\n\t\t}\n\n\t\t// pad the end with zeros, but make sure to not forget the extra bytes\n\t\tswitch (extraBytes) {\n\t\t\tcase 1:\n\t\t\t\ttemp = uint8[uint8.length - 1];\n\t\t\t\toutput += lookup.charAt(temp >> 2);\n\t\t\t\toutput += lookup.charAt((temp << 4) & 0x3F);\n\t\t\t\toutput += '==';\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\ttemp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1]);\n\t\t\t\toutput += lookup.charAt(temp >> 10);\n\t\t\t\toutput += lookup.charAt((temp >> 4) & 0x3F);\n\t\t\t\toutput += lookup.charAt((temp << 2) & 0x3F);\n\t\t\t\toutput += '=';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tmodule.exports.toByteArray = b64ToByteArray;\n\tmodule.exports.fromByteArray = uint8ToBase64;\n}());\n\nfunction indexOf (arr, elt /*, from*/) {\n\tvar len = arr.length;\n\n\tvar from = Number(arguments[1]) || 0;\n\tfrom = (from < 0)\n\t\t? Math.ceil(from)\n\t\t: Math.floor(from);\n\tif (from < 0)\n\t\tfrom += len;\n\n\tfor (; from < len; from++) {\n\t\tif ((typeof arr === 'string' && arr.charAt(from) === elt) ||\n\t\t\t\t(typeof arr !== 'string' && arr[from] === elt)) {\n\t\t\treturn from;\n\t\t}\n\t}\n\treturn -1;\n}\n\n},{}],4:[function(require,module,exports){\nexports.read = function(buffer, offset, isLE, mLen, nBytes) {\n  var e, m,\n      eLen = nBytes * 8 - mLen - 1,\n      eMax = (1 << eLen) - 1,\n      eBias = eMax >> 1,\n      nBits = -7,\n      i = isLE ? (nBytes - 1) : 0,\n      d = isLE ? -1 : 1,\n      s = buffer[offset + i];\n\n  i += d;\n\n  e = s & ((1 << (-nBits)) - 1);\n  s >>= (-nBits);\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8);\n\n  m = e & ((1 << (-nBits)) - 1);\n  e >>= (-nBits);\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8);\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity);\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function(buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c,\n      eLen = nBytes * 8 - mLen - 1,\n      eMax = (1 << eLen) - 1,\n      eBias = eMax >> 1,\n      rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0),\n      i = isLE ? 0 : (nBytes - 1),\n      d = isLE ? 1 : -1,\n      s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8);\n\n  e = (e << mLen) | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8);\n\n  buffer[offset + i - d] |= s * 128;\n};\n\n},{}]},{},[])\n;;module.exports=require(\"native-buffer-browserify\").Buffer\n","var global=typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {};\nvar rng;\n\nif (global.crypto && crypto.getRandomValues) {\n  // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n  // Moderately fast, high quality\n  var _rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(_rnds8);\n    return _rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  _rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return _rnds;\n  };\n}\n\nmodule.exports = rng;\n\n","var Buffer=require(\"__browserify_Buffer\");//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar _rng = require('./rng');\n\n// Buffer class to use\nvar BufferClass = typeof(Buffer) == 'function' ? Buffer : Array;\n\n// Maps for number <-> hex string conversion\nvar _byteToHex = [];\nvar _hexToByte = {};\nfor (var i = 0; i < 256; i++) {\n  _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  _hexToByte[_byteToHex[i]] = i;\n}\n\n// **`parse()` - Parse a UUID into it's component bytes**\nfunction parse(s, buf, offset) {\n  var i = (buf && offset) || 0, ii = 0;\n\n  buf = buf || [];\n  s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n    if (ii < 16) { // Don't overflow!\n      buf[i + ii++] = _hexToByte[oct];\n    }\n  });\n\n  // Zero out remaining bytes if string was short\n  while (ii < 16) {\n    buf[i + ii++] = 0;\n  }\n\n  return buf;\n}\n\n// **`unparse()` - Convert UUID byte array (ala parse()) into a string**\nfunction unparse(buf, offset) {\n  var i = offset || 0, bth = _byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = _rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; n++) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : unparse(b);\n}\n\n// **`v4()` - Generate random UUID**\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v4(options, buf, offset) {\n  // Deprecated - 'format' argument, as supported in v1.2\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new BufferClass(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ii++) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || unparse(rnds);\n}\n\n// Export public API\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\nuuid.parse = parse;\nuuid.unparse = unparse;\nuuid.BufferClass = BufferClass;\n\nmodule.exports = uuid;\n","var RTCIceCandidate       = window.mozRTCIceCandidate       || window.webkitRTCIceCandidate       || window.RTCIceCandidate;\nvar RTCPeerConnection     = window.mozRTCPeerConnection     || window.webkitRTCPeerConnection     || window.RTCPeerConnection;\nvar RTCSessionDescription = window.mozRTCSessionDescription || window.webkitRTCSessionDescription || window.RTCSessionDescription;\n\n\nexports.RTCIceCandidate       = RTCIceCandidate;\nexports.RTCPeerConnection     = RTCPeerConnection;\nexports.RTCSessionDescription = RTCSessionDescription;","// Version: 3.5.48\n(function(){\nvar j=!0,t=null,u=!1;function x(){return function(){}}\nwindow.JSON&&window.JSON.stringify||function(){function a(){try{return this.valueOf()}catch(a){return t}}function c(a){d.lastIndex=0;return d.test(a)?'\"'+a.replace(d,function(a){var b=H[a];return\"string\"===typeof b?b:\"\\\\u\"+(\"0000\"+a.charCodeAt(0).toString(16)).slice(-4)})+'\"':'\"'+a+'\"'}function b(d,h){var p,f,q,r,i,k=e,g=h[d];g&&\"object\"===typeof g&&(g=a.call(g));\"function\"===typeof m&&(g=m.call(h,d,g));switch(typeof g){case \"string\":return c(g);case \"number\":return isFinite(g)?String(g):\"null\";case \"boolean\":case \"null\":return String(g);\ncase \"object\":if(!g)return\"null\";e+=s;i=[];if(\"[object Array]\"===Object.prototype.toString.apply(g)){r=g.length;for(p=0;p<r;p+=1)i[p]=b(p,g)||\"null\";q=0===i.length?\"[]\":e?\"[\\n\"+e+i.join(\",\\n\"+e)+\"\\n\"+k+\"]\":\"[\"+i.join(\",\")+\"]\";e=k;return q}if(m&&\"object\"===typeof m){r=m.length;for(p=0;p<r;p+=1)f=m[p],\"string\"===typeof f&&(q=b(f,g))&&i.push(c(f)+(e?\": \":\":\")+q)}else for(f in g)Object.hasOwnProperty.call(g,f)&&(q=b(f,g))&&i.push(c(f)+(e?\": \":\":\")+q);q=0===i.length?\"{}\":e?\"{\\n\"+e+i.join(\",\\n\"+e)+\"\\n\"+\nk+\"}\":\"{\"+i.join(\",\")+\"}\";e=k;return q}}window.JSON||(window.JSON={});var d=/[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,e,s,H={\"\\b\":\"\\\\b\",\"\\t\":\"\\\\t\",\"\\n\":\"\\\\n\",\"\\f\":\"\\\\f\",\"\\r\":\"\\\\r\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"},m;\"function\"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,d){var f;s=e=\"\";if(\"number\"===typeof d)for(f=0;f<d;f+=1)s+=\" \";else\"string\"===typeof d&&(s=d);if((m=c)&&\"function\"!==typeof c&&(\"object\"!==typeof c||\"number\"!==\ntypeof c.length))throw Error(\"JSON.stringify\");return b(\"\",{\"\":a})});\"function\"!==typeof JSON.parse&&(JSON.parse=function(a){return eval(\"(\"+a+\")\")})}();var aa=1,C=u,ba=[],G=\"-pnpres\",I=1E3,ca=\"/\",da=\"&\",fa=/{([\\w\\-]+)}/g;function ga(){return\"x\"+ ++aa+\"\"+ +new Date}function J(){return+new Date}var P,ha=Math.floor(20*Math.random());P=function(a,c){return 0<a.indexOf(\"pubsub.\")&&a.replace(\"pubsub\",\"ps\"+(c?ja().split(\"-\")[0]:20>++ha?ha:ha=1))||a};\nfunction ka(a,c){var b=a.join(ca),d=[];if(!c)return b;Q(c,function(a,b){\"undefined\"!=typeof b&&(b!=t&&0<encodeURIComponent(b).length)&&d.push(a+\"=\"+encodeURIComponent(b))});return b+=\"?\"+d.join(da)}function la(a,c){function b(){e+c>J()?(clearTimeout(d),d=setTimeout(b,c)):(e=J(),a())}var d,e=0;return b}function na(a,c){var b=[];Q(a||[],function(a){c(a)&&b.push(a)});return b}function oa(a,c){return a.replace(fa,function(a,d){return c[d]||a})}\nfunction ja(a){var c=\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return(\"x\"==a?c:c&3|8).toString(16)});a&&a(c);return c}function Q(a,c){if(a&&c)if(\"undefined\"!=typeof a[0])for(var b=0,d=a.length;b<d;)c.call(a[b],a[b],b++);else for(b in a)a.hasOwnProperty&&a.hasOwnProperty(b)&&c.call(a[b],b,a[b])}function pa(a,c){var b=[];Q(a||[],function(a,e){b.push(c(a,e))});return b}function qa(a){var c=[];Q(a,function(a,d){d.j&&c.push(a)});return c.sort()}\nfunction ra(){setTimeout(function(){C||(C=1,Q(ba,function(a){a()}))},I)}\nif(!window.PUBNUB){var sa=function(a,c){return CryptoJS.HmacSHA256(a,c).toString(CryptoJS.enc.Base64)},ta=function(a){return document.getElementById(a)},ua=function(a){console.error(a)},va=function(a,c){var b=[];Q(a.split(/\\s+/),function(a){Q((c||document).getElementsByTagName(a),function(a){b.push(a)})});return b},U=function(a,c,b){Q(a.split(\",\"),function(a){function e(a){a||(a=window.event);b(a)||(a.cancelBubble=j,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}c.addEventListener?\nc.addEventListener(a,e,u):c.attachEvent?c.attachEvent(\"on\"+a,e):c[\"on\"+a]=e})},xa=function(){return va(\"head\")[0]},V=function(a,c,b){if(b)a.setAttribute(c,b);else return a&&a.getAttribute&&a.getAttribute(c)},ya=function(a,c){for(var b in c)if(c.hasOwnProperty(b))try{a.style[b]=c[b]+(0<\"|width|height|top|left|\".indexOf(b)&&\"number\"==typeof c[b]?\"px\":\"\")}catch(d){}},Ba=function(a){return document.createElement(a)},Da=function(){return Ca||W()?0:ga()},Fa=function(a){function c(a,b){M||(M=1,g.onerror=\nt,clearTimeout(ea),a||!b||N(b),setTimeout(function(){a&&O();var b=ta(D),c=b&&b.parentNode;c&&c.removeChild(b)},I))}if(Ca||W()){a:{var b,d,e=function(){if(!H){H=1;clearTimeout(L);try{d=JSON.parse(b.responseText)}catch(a){return r(1)}s=1;f(d)}},s=0,H=0,m=a.timeout||1E4,L=setTimeout(function(){r(1)},m),h=a.b||x(),p=a.data||{},f=a.c||x(),q=\"undefined\"===typeof a.g,r=function(a,c){s||(s=1,clearTimeout(L),b&&(b.onerror=b.onload=t,b.abort&&b.abort(),b=t),a&&h(c))};try{b=W()||window.XDomainRequest&&new XDomainRequest||\nnew XMLHttpRequest;b.onerror=b.onabort=function(){r(1,b.responseText||{error:\"Network Connection Error\"})};b.onload=b.onloadend=e;b.onreadystatechange=function(){if(b&&4==b.readyState)switch(b.status){case 401:case 402:case 403:try{d=JSON.parse(b.responseText),r(1,d)}catch(a){return r(1,b.responseText)}}};q&&(b.timeout=m);p.pnsdk=Ea;var i=ka(a.url,p);b.open(\"GET\",i,q);b.send()}catch(k){r(0);Ca=0;a=Fa(a);break a}a=r}return a}var g=Ba(\"script\"),e=a.a,D=ga(),M=0,ea=setTimeout(function(){c(1)},a.timeout||\n1E4),O=a.b||x(),m=a.data||{},N=a.c||x();window[e]=function(a){c(0,a)};a.g||(g[Ga]=Ga);g.onerror=function(){c(1)};m.pnsdk=Ea;g.src=ka(a.url,m);V(g,\"id\",D);xa().appendChild(g);return c},Ha=function(){return!(\"onLine\"in navigator)?1:navigator.onLine},W=function(){if(!Ia||!Ia.get)return 0;var a={id:W.id++,send:x(),abort:function(){a.id={}},open:function(c,b){W[a.id]=a;Ia.get(a.id,b)}};return a},Ga=\"async\",Ea=\"PubNub-JS-Web/3.5.48\",Ca=-1==navigator.userAgent.indexOf(\"MSIE 6\");window.console||(window.console=\nwindow.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||x());var Ja,Ka=window.localStorage;Ja={get:function(a){try{return Ka?Ka.getItem(a):-1==document.cookie.indexOf(a)?t:((document.cookie||\"\").match(RegExp(a+\"=([^;]+)\"))||[])[1]||t}catch(c){}},set:function(a,c){try{if(Ka)return Ka.setItem(a,c)&&0;document.cookie=a+\"=\"+c+\"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/\"}catch(b){}}};var Y={list:{},unbind:function(a){Y.list[a]=[]},bind:function(a,c){(Y.list[a]=Y.list[a]||\n[]).push(c)},fire:function(a,c){Q(Y.list[a]||[],function(a){a(c)})}},Z=ta(\"pubnub\")||0,La=function(a){function c(){}function b(a,b){function c(b){b&&(ia=J()-(b/1E4+(J()-d)/2),a&&a(ia))}var d=J();b&&c(b)||z.time(c)}function d(a,b){R&&R(a,b);R=t}function e(){z.time(function(a){b(x(),a);a||d(1,{error:\"Heartbeat failed to connect to Pubnub Servers.Please check your network settings.\"});setTimeout(e,q)})}function s(){Na()||d(1,{error:\"Offline. Please check your network settings. \"});setTimeout(s,I)}function H(a){var b=\n0;Q(qa(E),function(c){if(c=E[c])b++,(a||x())(c)});return b}function m(a){if(Oa){if(!y.length)return}else{a&&(y.h=0);if(y.h||!y.length)return;y.h=1}A(y.shift())}a.jsonp&&(Ca=0);var L=a.subscribe_key||\"\";a.uuid||Ja.get(L+\"uuid\");a.xdr=Fa;a.db=Ja;a.error=ua;a._is_online=Ha;a.jsonp_cb=Da;a.PNSDK=Ea;a.hmac_SHA256=sa;var h,p=+a.windowing||10,f=(+a.timeout||310)*I,q=(+a.keepalive||60)*I,r=a.noleave||0,i=a.publish_key||\"demo\",k=a.subscribe_key||\"demo\",g=a.auth_key||\"\",D=a.secret_key||\"\",M=a.PNSDK||\"\",ea=\na.hmac_SHA256,O=a.ssl?\"s\":\"\",N=\"http\"+O+\"://\"+(a.origin||\"pubsub.pubnub.com\"),K=P(N),wa=P(N),y=[],ia=0,za=0,Aa=0,R=0,ma=0,S=0,E={},Oa=a.no_wait_for_pending,A=a.xdr,l=a.error||x(),Na=a._is_online||function(){return 1},F=a.jsonp_cb||function(){return 0},T=a.db||{get:x(),set:x()},B=a.uuid||T&&T.get(k+\"uuid\")||\"\",z={LEAVE:function(a,b,c,d){var X={uuid:B,auth:g},e=P(N),c=c||x(),v=d||x(),d=F();if(0<a.indexOf(G))return j;if(r||!O||\"0\"==d)return u;\"0\"!=d&&(X.callback=d);A({g:b||O,timeout:2E3,a:d,data:X,c:function(a){\"object\"==\ntypeof a&&a.error?v(a):c(a)},b:v,url:[e,\"v2\",\"presence\",\"sub_key\",k,\"channel\",encodeURIComponent(a),\"leave\"]});return j},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||\"false\",X=a.error||x(),e=a.auth_key||g,v=a.channel,w=a.start,h=a.end,n={},i=F();if(!v)return l(\"Missing Channel\");if(!b)return l(\"Missing Callback\");if(!k)return l(\"Missing Subscribe Key\");n.stringtoken=\"true\";n.count=c;n.reverse=d;n.auth=e;i&&(n.callback=i);w&&(n.start=w);h&&(n.end=h);A({a:i,data:n,\nc:function(a){\"object\"==typeof a&&a.error?X(a):b(a)},b:X,url:[K,\"v2\",\"history\",\"sub-key\",k,\"channel\",encodeURIComponent(v)]})},replay:function(a){var b=b||a.callback||x(),c=a.auth_key||g,d=a.source,e=a.destination,h=a.stop,v=a.start,w=a.end,Pa=a.reverse,a=a.limit,n=F(),f={};if(!d)return l(\"Missing Source Channel\");if(!e)return l(\"Missing Destination Channel\");if(!i)return l(\"Missing Publish Key\");if(!k)return l(\"Missing Subscribe Key\");\"0\"!=n&&(f.callback=n);h&&(f.stop=\"all\");Pa&&(f.reverse=\"true\");\nv&&(f.start=v);w&&(f.end=w);a&&(f.count=a);f.auth=c;A({a:n,c:function(a){\"object\"==typeof a&&a.error?err(a):b(a)},b:function(){b([0,\"Disconnected\"])},url:[K,\"v1\",\"replay\",i,k,d,e],data:f})},auth:function(a){g=a;c()},time:function(a){var b=F();A({a:b,data:{uuid:B,auth:g},timeout:5*I,url:[K,\"time\",b],c:function(b){a(b[0])},b:function(){a(0)}})},publish:function(a,b){var b=b||a.callback||x(),c=a.message,d=a.channel,e=a.auth_key||g,h=a.error||x(),v=F(),w=\"push\";a.prepend&&(w=\"unshift\");if(!c)return l(\"Missing Message\");\nif(!d)return l(\"Missing Channel\");if(!i)return l(\"Missing Publish Key\");if(!k)return l(\"Missing Subscribe Key\");c=JSON.stringify(c);y[w]({a:v,timeout:5*I,url:[K,\"publish\",i,k,0,encodeURIComponent(d),v,encodeURIComponent(c)],data:{uuid:B,auth:e},b:function(a){h(a);m(1)},c:function(a){\"object\"==typeof a&&a.error?h(a):b(a);m(1)}});m()},unsubscribe:function(a,b){var d=a.channel,b=b||a.callback||x(),e=a.error||x();S=0;ma=1;d=pa((d.join?d.join(\",\"):\"\"+d).split(\",\"),function(a){if(E[a])return a+\",\"+a+G}).join(\",\");\nQ(d.split(\",\"),function(a){var c=j;a&&(C&&(c=z.LEAVE(a,0,b,e)),c||b({action:\"leave\"}),E[a]=0)});c()},subscribe:function(a,b){function e(a){a?setTimeout(c,I):(K=P(N,1),wa=P(N,1),setTimeout(function(){z.time(e)},I));H(function(b){if(a&&b.d)return b.d=0,b.m(b.name);!a&&!b.d&&(b.d=1,b.l(b.name))})}function h(){var a=F(),b=qa(E).join(\",\");b&&(d(),R=A({timeout:O,a:a,b:function(a){n(a);R=t;z.time(e)},data:{uuid:B,auth:m},url:[wa,\"subscribe\",k,encodeURIComponent(b),a,S],c:function(a){R=t;if(!a||\"object\"==\ntypeof a&&\"error\"in a&&a.error)return n(a),setTimeout(c,I);r(a[1]);S=!S&&ma&&T.get(k)||a[1];H(function(a){a.f||(a.f=1,a.k(a.name))});y&&(S=1E4,y=0);T.set(k,a[1]);var b,d=(2<a.length?a[2]:pa(E,function(b){return pa(Array(a[0].length).join(\",\").split(\",\"),function(){return b})}).join(\",\")).split(\",\");b=function(){var a=d.shift()||Aa;return[(E[a]||{}).a||za,a.split(G)[0]]};var e=J()-ia-+a[1]/1E4;Q(a[0],function(c){var d=b();d[0](c,a,d[1],e)});setTimeout(h,L)}}))}var i=a.channel,b=(b=b||a.callback)||\na.message,m=a.auth_key||g,v=a.connect||x(),w=a.reconnect||x(),q=a.disconnect||x(),n=a.error||x(),r=a.idle||x(),s=a.presence||0,D=a.noheresync||0,y=a.backfill||0,M=a.timetoken||0,O=a.timeout||f,L=a.windowing||p;ma=a.restore;S=M;if(!i)return l(\"Missing Channel\");if(!b)return l(\"Missing Callback\");if(!k)return l(\"Missing Subscribe Key\");Q((i.join?i.join(\",\"):\"\"+i).split(\",\"),function(a){var c=E[a]||{};E[Aa=a]={name:a,f:c.f,d:c.d,j:1,a:za=b,k:v,l:q,m:w};s&&(z.subscribe({channel:a+G,callback:s}),!c.j&&\n!D&&z.here_now({channel:a,callback:function(b){Q(\"uuids\"in b?b.uuids:[],function(c){s({action:\"join\",uuid:c,timestamp:J(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){d();setTimeout(h,L)};if(!C)return ba.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||x(),d=a.auth_key||g,e=a.channel,h=F(),d={uuid:B,auth:d};if(!e)return l(\"Missing Channel\");if(!b)return l(\"Missing Callback\");if(!k)return l(\"Missing Subscribe Key\");\"0\"!=h&&(d.callback=h);A({a:h,data:d,c:function(a){\"object\"==\ntypeof a&&a.error?c(a):b(a)},b:c,url:[K,\"v2\",\"presence\",\"sub_key\",k,\"channel\",encodeURIComponent(e)]})},grant:function(a,b){var b=a.callback||b,c=a.error||x(),d=a.channel,e=F(),h=a.ttl||-1,g=a.read?\"1\":\"0\",w=a.write?\"1\":\"0\",f=a.auth_key;if(!d)return l(\"Missing Channel\");if(!b)return l(\"Missing Callback\");if(!k)return l(\"Missing Subscribe Key\");if(!i)return l(\"Missing Publish Key\");if(!D)return l(\"Missing Secret Key\");\"0\"!=e&&(n.callback=e);var n=Math.floor((new Date).getTime()/1E3),m=ea(k+\"\\n\"+i+\n\"\\ngrant\\n\"+(f&&0<encodeURIComponent(f).length?\"auth=\"+encodeURIComponent(f)+\"&\":\"\")+\"channel=\"+encodeURIComponent(d)+\"&pnsdk=\"+encodeURIComponent(M)+\"&r=\"+g+\"&timestamp=\"+encodeURIComponent(n)+(-1<h?\"&ttl=\"+h:\"\")+\"&w=\"+w,D),m=m.replace(/\\+/g,\"-\"),m=m.replace(/\\//g,\"_\"),n={w:w,r:g,signature:m,channel:encodeURIComponent(d),timestamp:n};-1<h&&(n.ttl=h);f&&(n.auth=encodeURIComponent(f));A({a:e,data:n,c:function(a){b(a)},b:c,url:[K,\"v1\",\"auth\",\"grant\",\"sub-key\",k]})},audit:function(a,b){var b=a.callback||\nb,c=a.error||x(),d=a.channel,e=a.auth_key,h=F();if(!b)return l(\"Missing Callback\");if(!k)return l(\"Missing Subscribe Key\");if(!i)return l(\"Missing Publish Key\");if(!D)return l(\"Missing Secret Key\");\"0\"!=h&&(g.callback=h);var g=Math.floor((new Date).getTime()/1E3),f=k+\"\\n\"+i+\"\\naudit\\n\";e&&(f+=\"auth=\"+encodeURIComponent(e)+\"&\");d&&(f+=\"channel=\"+encodeURIComponent(d)+\"&\");var f=f+(\"pnsdk=\"+encodeURIComponent(M)+\"&timestamp=\"+g),f=ea(f,D),f=f.replace(/\\+/g,\"-\"),f=f.replace(/\\//g,\"_\"),g={signature:f,\ntimestamp:g};d&&(g.channel=encodeURIComponent(d));e&&(g.auth=encodeURIComponent(e));A({a:h,data:g,c:function(a){b(a)},b:c,url:[K,\"v1\",\"auth\",\"audit\",\"sub-key\",k]})},revoke:function(a,b){a.read=u;a.write=u;z.grant(a,b)},set_uuid:function(a){B=a;c()},get_uuid:function(){return B},xdr:A,ready:ra,db:T,uuid:ja,map:pa,each:Q,\"each-channel\":H,grep:na,offline:function(){d(1)},supplant:oa,now:J,unique:ga,updater:la};B||(B=z.uuid());T.set(k+\"uuid\",B);setTimeout(s,I);setTimeout(e,q);b();h=z;h.css=ya;h.$=ta;\nh.create=Ba;h.bind=U;h.head=xa;h.search=va;h.attr=V;h.events=Y;h.init=La;U(\"beforeunload\",window,function(){h[\"each-channel\"](function(a){h.LEAVE(a.name,0)});return j});if(a.notest)return h;U(\"offline\",window,h.offline);U(\"offline\",document,h.offline);return h};\"complete\"===document.readyState?setTimeout(ra,0):U(\"load\",window,function(){setTimeout(ra,0)});var $=Z||{};PUBNUB=La({notest:1,publish_key:V($,\"pub-key\"),subscribe_key:V($,\"sub-key\"),ssl:!document.location.href.indexOf(\"https\")||\"on\"==V($,\n\"ssl\"),origin:V($,\"origin\"),uuid:V($,\"uuid\")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);\"undefined\"!==typeof module&&(module.exports=PUBNUB)&&ra();var Ia=ta(\"pubnubs\")||0;if(Z){ya(Z,{position:\"absolute\",top:-I});if(\"opera\"in window||V(Z,\"flash\"))Z.innerHTML=\"<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>\";PUBNUB.rdx=function(a,c){if(!c)return W[a].onerror();\nW[a].responseText=unescape(c);W[a].onload()};W.id=I}}\nvar Ma=PUBNUB.ws=function(a,c){if(!(this instanceof Ma))return new Ma(a,c);var b=this,a=b.url=a||\"\";b.protocol=c||\"Sec-WebSocket-Protocol\";var d=a.split(\"/\"),d={ssl:\"wss:\"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};b.CONNECTING=0;b.OPEN=1;b.CLOSING=2;b.CLOSED=3;b.CLOSE_NORMAL=1E3;b.CLOSE_GOING_AWAY=1001;b.CLOSE_PROTOCOL_ERROR=1002;b.CLOSE_UNSUPPORTED=1003;b.CLOSE_TOO_LARGE=1004;b.CLOSE_NO_STATUS=1005;b.CLOSE_ABNORMAL=1006;b.onclose=b.onerror=b.onmessage=b.onopen=b.onsend=\nx();b.binaryType=\"\";b.extensions=\"\";b.bufferedAmount=0;b.trasnmitting=u;b.buffer=[];b.readyState=b.CONNECTING;if(!a)return b.readyState=b.CLOSED,b.onclose({code:b.CLOSE_ABNORMAL,reason:\"Missing URL\",wasClean:j}),b;b.e=PUBNUB.init(d);b.e.i=d;b.i=d;b.e.subscribe({restore:u,channel:d.channel,disconnect:b.onerror,reconnect:b.onopen,error:function(){b.onclose({code:b.CLOSE_ABNORMAL,reason:\"Missing URL\",wasClean:u})},callback:function(a){b.onmessage({data:a})},connect:function(){b.readyState=b.OPEN;b.onopen()}})};\nMa.prototype.send=function(a){var c=this;c.e.publish({channel:c.e.i.channel,message:a,callback:function(a){c.onsend({data:a})}})};\n})();\n"]}