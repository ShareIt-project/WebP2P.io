{"version":3,"file":"bundle.js","sources":["../lib/MessagePacker.js","../lib/WebP2P.js","../lib/connectors/PubNub.js","../lib/connectors/core/Connector.js","../lib/connectors/core/DataChannel.js","../lib/connectors/core/HandshakeConnector.js","../lib/errors.js","../lib/index.js","../lib/managers/HandshakeManager.js","../lib/managers/Manager.js","../lib/managers/PeersManager.js","../lib/packer.js","../node_modules/grunt-browserify/node_modules/browserify/node_modules/events/events.js","../node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/buffer.js","../node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js","../node_modules/inherits/inherits_browser.js","../node_modules/process-events-shim/lib/process-events-shim.js","../node_modules/rpc-builder/lib/Mapper.js","../node_modules/rpc-builder/lib/index.js","../node_modules/rpc-builder/lib/packers/JsonRPC.js","../node_modules/rpc-builder/lib/packers/XmlRPC.js","../node_modules/rpc-builder/lib/packers/index.js","../node_modules/uuid/rng-browser.js","../node_modules/uuid/uuid.js","../node_modules/wrtc/lib/browser.js","../shim/pubnub.js"],"names":["MessagePacker","sessionID","rpcBuilder","RpcBuilder","packer","this","unpack","message","decode","cancel","presence","from","encode","offer","dest","sdp","ttl","callback","Function","SyntaxError","undefined","Math","min","MAX_TTL_DEFAULT","require","module","exports","WebP2P","options","onerror","error","self","emit","Error","createPeerConnection","callbackType","pc","RTCPeerConnection","iceServers","url","stun_server","optional","DtlsSrtpKeyAgreement","addEventListener","event","candidate","type","localDescription","console","signalingState","channels","_channels","peersManager","add","request","offers","Object","defineProperty","value","initPeerConnection_Offer","labels","routingLabel","concat","commonLabels","label","i","channel","createDataChannel","push","splice","indexOf","mediaConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","createOffer","setLocalDescription","initPeerConnection_Answer","setRemoteDescription","RTCSessionDescription","createAnswer","answer","forward","connector","warn","pack","peer","_connectors","send","handshakeManager","connectionProcessed","get","log","code","messagepacker","peerConnection","close","onpresence","generateOffer","increaseConnections","onoffer","processed","response","reply","debug","processAnswer","Array","forEach","c","initManagerEvents","manager","on","status","handshake_servers","uuid","v4","HandshakeManager","PeersManager","__defineGetter__","peers","connectTo","process","EventEmitter","inherits","Connector_PubNub","config_init","config_mess","max_connections","HandshakeConnector","call","pubnub","PUBNUB","init","subscribe","restore","backfill","connect","_open","_message","disconnect","_close","_error","unsubscribe","publish","prototype","Connector","TypeError","Connector_DataChannel","datachannel","data","shouldConnect","connections","Number","POSITIVE_INFINITY","ERROR_NETWORK_UNKNOWN","id","msg","ERROR_NETWORK_OFFLINE","ERROR_REQUEST_FAILURE","ERROR_REQUEST_EMPTY","ERROR_NO_PEERS","createConnector","config","connectorConstructor","handshakeConnectorConstructors","_initConnector","_messageUnpacked","method","params","handshake","configs","length","index","Manager","registerConnectorConstructor","constructor","configs_infinity","addConfigs_byObject","addConfigs","errors","configuration","addConfigs_byUri","addConfigs_byArray","json_uri","dispatchError","http_request","XMLHttpRequest","open","onload","JSON","parse","navigator","onLine","result","stored","incomingConnector","initDataChannel","initDataChannel_listener","target","removeEventListener","ERROR","PRESENCE","OFFER","ANSWER","stringify","responseMethods","_events","_maxListeners","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","n","isNaN","er","handler","len","args","listeners","arguments","apply","slice","addListener","listener","m","newListener","warned","trace","once","g","removeListener","fired","list","position","removeAllListeners","key","ret","listenerCount","emitter","e","t","r","s","o","u","a","f","PcZj9L","Buffer","subject","encoding","noZero","stringtrim","coerce","byteLength","buf","browserSupport","augment","Uint8Array","isBuffer","set","isArrayish","readUInt8","write","_hexWrite","string","offset","remaining","strLen","byte","parseInt","substr","_charsWritten","_utf8Write","blitBuffer","utf8ToBytes","_asciiWrite","asciiToBytes","_binaryWrite","_base64Write","base64ToBytes","_base64Slice","start","end","base64","fromByteArray","_utf8Slice","res","tmp","decodeUtf8Char","String","fromCharCode","toString","_asciiSlice","_binarySlice","_hexSlice","out","toHex","_readUInt16","littleEndian","noAssert","assert","_dataview","getUint16","dv","DataView","ArrayBuffer","setUint8","val","_readUInt32","getUint32","_readInt16","getInt16","neg","_readInt32","getInt32","_readFloat","getFloat32","ieee754","read","_readDouble","getFloat64","_writeUInt16","verifuint","setUint16","getUint8","j","_writeUInt32","setUint32","_writeInt16","verifsint","setInt16","_writeInt32","setInt32","_writeFloat","verifIEEE754","setFloat32","_writeDouble","setFloat64","BufferToArrayBuffer","buffer","str","trim","replace","arr","_isBuffer","BP","toLocaleString","toJSON","copy","readUInt16LE","readUInt16BE","readUInt32LE","readUInt32BE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","fill","inspect","toArrayBuffer","byteOffset","clamp","defaultValue","ceil","isArray","byteArray","charCodeAt","h","encodeURIComponent","charAt","split","toByteArray","src","dst","decodeURIComponent","err","max","floor","test","SlowBuffer","INSPECT_MAX_BYTES","poolSize","foo","isEncoding","toLowerCase","b","totalLength","pos","item","isFinite","swap","_arr","target_start","source","subarray","sliceLen","newBuf","getInt8","setInt8","join","base64-js","native-buffer-browserify","3","elt","b64ToByteArray","b64","l","placeHolders","lookup","uint8ToBase64","uint8","tripletToBase64","num","temp","extraBytes","output","4","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","NaN","Infinity","pow","rt","abs","LN2","nextTick","canSetImmediate","window","setImmediate","canPost","postMessage","queue","ev","stopPropagation","fn","shift","setTimeout","title","browser","env","argv","binding","cwd","chdir","create","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","global","name","processLacksEventFunctions","_ref","document","line","Mapper","sources","ids","remove","keys","pop","unifyResponseMethods","RpcNotification","storeResponse","timeout","responses","BASE_TIMEOUT","RpcRequest","Boolean","responseMethod","clearTimeout","requestID","requests","message2Key","dispatchCallback","packers","jsonrpc","version","result_defined","error_defined","JsonRPC","XmlRPC","rng","crypto","getRandomValues","_rnds8","_rnds","random","ii","oct","_hexToByte","unparse","bth","_byteToHex","v1","clockseq","_clockseq","msecs","Date","getTime","nsecs","_lastNSecs","dt","_lastMSecs","tl","tmh","node","_nodeId","BufferClass","rnds","_rng","_seedBytes","RTCIceCandidate","mozRTCIceCandidate","webkitRTCIceCandidate","mozRTCPeerConnection","webkitRTCPeerConnection","mozRTCSessionDescription","webkitRTCSessionDescription","unique","NOW","rnow","build_url","url_components","url_params","URLBIT","each","value_str","PARAMSBIT","updater","fun","rate","last","runnit","grep","fin","supplant","values","REPL","_","match","wait","v","old_logic","hasOwnProperty","map","k","path","generate_channel_list","nopresence","search","subscribed","sort","ready","READY","READY_BUFFER","SECOND","PN_API","setup","validate_presence_heartbeat","heartbeat","cur_heartbeat","PRESENCE_HB_THRESHOLD","PRESENCE_HB_DEFAULT","encrypt","input","crypto_obj","CIPHER_KEY","decrypt","_presence_heartbeat","PRESENCE_HB_TIMEOUT","PRESENCE_HB_INTERVAL","CHANNELS","PRESENCE_HB_RUNNING","SELF","start_presence_heartbeat","next","NO_WAIT_FOR_PENDING","PUB_QUEUE","sending","xdr","each_channel","count","chan","_invoke_callback","payload","_invoke_error","_poll_online","_is_online","_reset_offline","_poll_online2","success","detect_time_detla","KEEPALIVE","SUB_RECEIVER","detect_latency","tt","adjusted_time","TIME_DRIFT","cb","time","calculate","ptime","latency","stime","SUB_WINDOWING","DEF_WINDOWING","SUB_TIMEOUT","DEF_SUB_TIMEOUT","DEF_KEEPALIVE","NOLEAVE","PUBLISH_KEY","SUBSCRIBE_KEY","AUTH_KEY","SECRET_KEY","PNSDK","hmac_SHA256","SSL","ORIGIN","STD_ORIGIN","nextorigin","SUB_ORIGIN","CONNECT","SUB_CALLBACK","SUB_CHANNEL","SUB_RESTORE","TIMETOKEN","RESUMED","STATE","PRESENCE_HB","COMPATIBLE_35","jsonp_cb","db","UUID","LEAVE","blocking","auth","origin","jsonp","PRESENCE_SUFFIX","fail","set_resumed","resumed","get_cipher_key","set_cipher_key","raw_encrypt","raw_decrypt","get_heartbeat","set_heartbeat","get_heartbeat_interval","set_heartbeat_interval","heartbeat_interval","get_version","SDK_VER","history","reverse","auth_key","cipher_key","include_token","messages","decrypted_messages","new_message","replay","destination","stop","limit","add_msg","CB_CALLED","action","_test_connection","disconnected","reconnect","_connect","st","sub_timeout","errcb","idlecb","connected","windowing","next_callback","decrypted_msg","noheresync","timetoken","state","settings","here","uid","timestamp","occupancy","here_now","uuids","where_now","grant","w","sign_input","signature","audit","revoke","set_uuid","get_uuid","presence_heartbeat","each-channel","offline","now","SHA256","safe_add","x","y","lsw","msw","S","X","R","Ch","z","Maj","Sigma0256","Sigma1256","Gamma0256","Gamma1256","core_sha256","T1","T2","K","HASH","W","str2binb","bin","mask","chrsz","Utf8Encode","utftext","binb2hex","binarray","hex_tab","hexcase","CRYPTO","iv","hex_message","encryptedHexArray","base_64_encrypted","binary_enc","json_plain","plaintext","DEF_TIMEOUT","ori","failover","Nr","Nk","Decrypt","enc_utf8","unescape","dec_utf8","escape","padBlock","byteArr","cpad","array","block2s","block","lastBlock","padding","a2h","numArr","h2a","s2a","binary","size","newsize","randArr","openSSLKey","passwordArr","saltArr","rounds","md5_hash","data00","GibberishAES","Hash","MD5","rawEncrypt","expandKey","numBlocks","blocks","cipherBlocks","xorBlocks","encryptBlock","rawDecrypt","cryptArr","plainBlocks","decryptBlock","words","round","addRoundKey","subBytes","shiftRows","mixColumns","SBoxInv","SBox","shiftBy","GEX","GBX","GDX","G9X","G2X","G3X","block1","block2","flat","subWord","rotWord","Rcon","strhex","invertArr","Gxx","Gx","enc","pass","salt","pbe","saltBlock","Base64","dec","rotateLeft","lValue","iShiftBits","addUnsigned","lX","lY","lX4","lY4","lX8","lY8","lResult","funcI","ff","ac","gg","hh","convertToWordArray","lWordCount","lMessageLength","lNumberOfWords_temp1","lNumberOfWords_temp2","lNumberOfWords","lWordArray","lBytePosition","lByteCount","wordToHex","lByte","lCount","wordToHexArr","AA","BB","CC","DD","rnd","_chars","chars","broken_b64","flatArr","xhr","finished","loaded","timer","responseText","done","complete","XHRTME","async","failed","abort","XDomainRequest","onabort","onloadend","onreadystatechange","readyState","eee","bind","el","etype","rapfun","cancelBubble","returnValue","preventDefault","attachEvent","attr","attribute","setAttribute","getAttribute","$","getElementById","elements","getElementsByTagName","css","element","styles","style","createElement","get_hmac_SHA256","hash","CryptoJS","CREATE_PUBNUB","PN","prop","ch","ls","localStorage","getItem","cookie","RegExp","setItem","WS","protocols","bits","protocol","ssl","publish_key","subscribe_key","reason","wasClean"],"mappings":"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","sourcesContent":["var RpcBuilder = require('rpc-builder');\n\nvar packer = require('./packer');\n\n\nconst MAX_TTL_DEFAULT = 5;\n\n\nfunction MessagePacker(sessionID)\n{\n  var rpcBuilder = new RpcBuilder(packer);\n\n\n  this.unpack = function(message)\n  {\n    return rpcBuilder.decode(message);\n  };\n\n  this.cancel = function(message)\n  {\n    rpcBuilder.cancel(message);\n  }\n\n\n  //\n  // WebP2P.io requests\n  //\n\n  this.presence = function()\n  {\n    var message =\n    {\n      from: sessionID\n    };\n\n    return rpcBuilder.encode('presence', message);\n  };\n\n  this.offer = function(dest, sdp, ttl, callback)\n  {\n    if(ttl instanceof Function)\n    {\n      if(callback)\n        throw new SyntaxError(\"Nothing can be defined after the callback\");\n\n      callback = ttl;\n      ttl = undefined;\n    };\n\n    var message =\n    {\n      dest: dest,\n      from: sessionID,\n      sdp:  sdp,\n      ttl:  Math.min(ttl || MAX_TTL_DEFAULT, MAX_TTL_DEFAULT)\n    };\n\n    // Return the packed message\n    return rpcBuilder.encode('offer', message, dest, callback);\n  };\n};\n\n\nmodule.exports = MessagePacker;\n","var process=require(\"__browserify_process\");var EventEmitter = require(\"events\").EventEmitter;\n\nvar inherits          = require('inherits');\nvar RTCPeerConnection = require('wrtc').RTCPeerConnection;\nvar uuid              = require('uuid');\n\nrequire(\"process-events-shim\");\n\nvar HandshakeManager = require('./managers/HandshakeManager');\nvar PeersManager     = require('./managers/PeersManager');\n\nvar MessagePacker = require('./MessagePacker');\n\n\nconst MAX_TTL_DEFAULT = 5;\n\n\n/**\n * @classdesc Init and connect to the WebP2P.io network\n *\n * @constructor\n */\nfunction WebP2P(options)\n{\n  var self = this;\n\n\n  var options = options || {};\n\n  // Internal options\n  var commonLabels      = options.commonLabels || [];\n  var handshake_servers = options.handshake_servers;\n  var stun_server       = options.stun_server || 'stun.l.google.com:19302';\n\n  // Read-only options\n  Object.defineProperty(this, \"routingLabel\",\n  {\n    value: options.routingLabel || \"webp2p\"\n  });\n  Object.defineProperty(this, \"sessionID\",\n  {\n    value: options.sessionID || uuid.v4()\n  });\n\n\n  var messagepacker = new MessagePacker(this.sessionID);\n\n  var handshakeManager = new HandshakeManager(messagepacker, handshake_servers);\n  var peersManager     = new PeersManager(messagepacker, self.routingLabel);\n\n  this.__defineGetter__('status', function()\n  {\n    if(peersManager.status == 'connected')\n      return 'connected';\n\n    return handshakeManager.status;\n  });\n\n  this.__defineGetter__(\"peers\", function()\n  {\n    return peersManager.peers;\n  });\n\n\n  function onerror(error)\n  {\n    self.emit('error', new Error(error));\n  };\n\n\n  var offers = {};\n\n  /**\n   * Create a new RTCPeerConnection\n   * @param {UUID} sessionID Identifier of the other peer so later can be accessed.\n   *\n   * @return {RTCPeerConnection}\n   */\n  function createPeerConnection(sessionID, callbackType, callback)\n  {\n    var pc = new RTCPeerConnection\n    (\n      {iceServers: [{url: 'stun:'+stun_server}]},\n      {optional: [{DtlsSrtpKeyAgreement: true}]}\n    );\n\n    pc.addEventListener('icecandidate', function(event)\n    {\n      // There's a candidate, ignore it\n      if(event.candidate) return;\n\n      // There's no candidate, send the full SDP\n      var type = this.localDescription.type;\n      var sdp  = this.localDescription.sdp;\n\n      if(type == callbackType)\n        callback(sdp)\n      else\n        console.error(type+\" SDP type is not equal to \"+callbackType+\" callback type\");\n    });\n\n    pc.addEventListener('signalingstatechange', function(event)\n    {\n      // Add PeerConnection object to available ones when gets open\n      if(pc.signalingState == 'stable')\n      {\n        var channels = pc._channels || [];\n\n        peersManager.add(sessionID, pc, channels);\n\n        var request = offers[sessionID];\n        if(request)\n        {\n          delete offers[sessionID];\n\n          var callback = request.callback;\n          if(callback)\n             callback(null, pc, channels);\n        };\n\n        self.emit('peerconnection', pc, channels);\n      };\n    });\n\n    // Set ID of the PeerConnection\n    Object.defineProperty(pc, \"sessionID\", {value : sessionID});\n\n    return pc;\n  };\n\n\n  function initPeerConnection_Offer(pc, labels)\n  {\n    // Set channels for this PeerConnection object\n    labels = [self.routingLabel].concat(commonLabels, labels);\n\n    var channels = [];\n\n    for(var i=0, label; label=labels[i]; i++)\n    {\n      var channel = pc.createDataChannel(label);\n\n      channels.push(channel);\n\n      channel.addEventListener('close', function(event)\n      {\n        channels.splice(channels.indexOf(channel), 1);\n      });\n    };\n\n    pc._channels = channels;\n\n    // Send offer\n    var mediaConstraints =\n    {\n      mandatory:\n      {\n        OfferToReceiveAudio: false,\n        OfferToReceiveVideo: false\n      }\n    };\n\n    pc.createOffer(function(offer)\n    {\n      // Set the peer local description\n      pc.setLocalDescription(offer, null, onerror);\n    },\n    onerror,\n    mediaConstraints);\n  };\n\n  function initPeerConnection_Answer(pc, sdp)\n  {\n    // Process offer\n    pc.setRemoteDescription(new RTCSessionDescription(\n    {\n      sdp:  sdp,\n      type: 'offer'\n    }),\n    function()\n    {\n      // Send answer\n      pc.createAnswer(function(answer)\n      {\n        // Set the peer local description\n        pc.setLocalDescription(answer, null, onerror);\n      },\n      onerror)\n    },\n    onerror);\n  };\n\n\n  //\n  // Connection methods\n  //\n\n  /**\n   * Callback to send the offer. If not defined send it to all connected peers.\n   *\n   * @callback WebP2P~ConnectToCallback\n   * @param {Error} error\n   * @param {RTCPeerConnection} peer - The (newly created) peer\n   */\n\n  /**\n   * Connects to another peer based on its UID. If we are already connected,\n   * it does nothing.\n   *\n   * @param {UUID} sessionID - Identifier of the other peer to be connected.\n   * @param {string[]} [labels] - Per-connection labels\n   * @param {WebP2P~ConnectToCallback} callback\n   */\n  this.connectTo = function(dest, labels, callback)\n  {\n    if(labels instanceof Function)\n    {\n      if(callback)\n        throw new SyntaxError(\"Nothing can be defined after the callback\");\n\n      callback = labels;\n      labels = undefined;\n    };\n\n    // Don't connect to ourself\n    if(dest == self.sessionID)\n      return callback(new Error(\"Connecting to ourself\"));\n\n    var pc = peersManager.get(dest);\n    if(pc) return callback(null, pc)\n\n    pc = generateOffer(dest, [handshakeManager, peersManager],\n                       callback);\n\n    initPeerConnection_Offer(pc, labels);\n  };\n\n\n  //\n  // Managers\n  //\n\n  function forward(message, connector)\n  {\n    var from = message.from;\n    var dest = message.dest;\n\n    // Ignore messages send by us\n    if(from == self.sessionID) return;\n\n    // Message was for us, raise error\n    if(dest == self.sessionID)\n      return console.error('Ignored answer send to us', message);\n\n    // Don't forward the message if TTL has been achieved\n    if(--message.ttl <= 0)\n      return console.warn(\"TTL achieved:\",message);\n\n    var dest = message.dest;\n\n    message = message.pack();\n\n    // Search the peer between the ones currently connected\n    for(var i=0, peer; peer=peersManager._connectors[i]; i++)\n      if(peer.sessionID == dest)\n        return peer.send(message);\n\n    // Peer was not found, forward message to all the connectors\n    peersManager.send(message, connector);\n    handshakeManager.send(message, connector);\n  };\n\n\n  handshakeManager.on('connected', function()\n  {\n    self.emit('handshakeManager.connected', handshakeManager);\n  });\n  handshakeManager.on('disconnected', function()\n  {\n    self.emit('handshakeManager.disconnected', handshakeManager);\n  });\n\n  peersManager.on('connected', function()\n  {\n    self.emit('peersManager.connected', peersManager);\n  });\n  peersManager.on('disconnected', function()\n  {\n    self.emit('peersManager.disconnected', peersManager);\n  });\n\n\n  /**\n   * Check if it's a request from a peer we are already connected or trying to\n   * connect to, so we can prevent to do crossed connections\n   *\n   * @param sessionID - ID of the other peer\n   *\n   * @returns {Boolean} - If we are already connected or trying to connect\n   */\n  function connectionProcessed(sessionID)\n  {\n    // Check if we are already connected to the requester peer\n    var peer = peersManager.get(sessionID);\n    if(peer)\n    {\n      // We are already connected to that peer, send an error to the other end\n      var message = \"[\"+self.sessionID+\"] Already connected to \"+sessionID;\n      console.log(message);\n\n      var error =\n      {\n        from: self.sessionID,\n        code: -1,\n        message: message\n      };\n      return error;\n    };\n\n    // Check if we are already trying to connect to that peer\n    var offer = offers[sessionID];\n    if(offer)\n    {\n      // We are already trying to connected to that peer, ignore the request\n      var message = \"[\"+self.sessionID+\"] Already requested connection to \"+sessionID;\n      console.log(message);\n\n      // We have higher precedence, send an error to the other end\n      if(self.sessionID < sessionID)\n      {\n        var error =\n        {\n          from: self.sessionID,\n          code: -2,\n          message: message\n        };\n        return error;\n      }\n\n      // We have less precedence, cancel our connection request and prepare to\n      // incoming one\n      messagepacker.cancel(offer.message);\n      offer.peerConnection.close();\n\n      delete offers[sessionID];\n    };\n\n    // Connection request is a genuinely new one, process it as usual\n  };\n\n\n    //\n    // Protocol messages\n    //\n\n  function onpresence(from, connector)\n  {\n    // Ignore messages send by us\n    if(from == self.sessionID) return;\n\n    var peer = peersManager.get(from);\n    if(peer) return;\n\n    var pc = generateOffer(from, connector);\n\n    pc.addEventListener('signalingstatechange', function(event)\n    {\n      // If PeerConnection object gets open, increase number of connections\n      // fetch over this connector so it can decide if it could close\n      if(pc.signalingState == 'stable')\n        connector.increaseConnections();\n    });\n\n    initPeerConnection_Offer(pc);\n  };\n\n  function onoffer(message, connector)\n  {\n    var from = message.from;\n    var dest = message.dest;\n\n    // Ignore messages send by us\n    if(from == self.sessionID) return;\n\n    // Message is for us\n    if(dest == self.sessionID)\n    {\n      console.log(\"[\"+dest+\"] Received connection request from \"+from);\n\n      var request = message;\n\n      // If connection is already processed, send an error to the other end\n      var processed = connectionProcessed(from);\n      if(processed)\n      {\n        var response = request.reply(processed);\n\n        return connector.send(response);\n      }\n\n      // Search the peer between the list of currently connected ones,\n      // or create it if it's not connected\n      var pc = createPeerConnection(from, \"answer\", function(answer)\n      {\n        var response =\n        {\n          from: dest,\n          sdp:  answer,\n          ttl:  MAX_TTL_DEFAULT\n        };\n        response = request.reply(null, response);\n\n        // Send back the connection request over the same connector, since\n        // this should be the shortest path to connect both peers\n        connector.send(response);\n      });\n\n      initPeerConnection_Answer(pc, message.sdp);\n    }\n\n    // Forward message\n    else\n      forward(message, connector);\n  };\n\n\n  function generateOffer(dest, connector, callback)\n  {\n    var pc = createPeerConnection(dest, \"offer\", function(offer)\n    {\n      var ttl = callback ? 5 : 1;\n\n      var request = messagepacker.offer(dest, offer, ttl, function(error, response)\n      {\n        if(error)\n        {\n          if(error.dest != self.sessionID) return;\n\n          messagepacker.cancel(request);\n\n          if(callback)\n            callback(error);\n          else\n            console.error(error);\n\n          return;\n        }\n\n        if(response.dest != self.sessionID) return;\n\n        console.debug('['+self.sessionID+'] Received answer for connectTo from '+response.from);\n\n        processAnswer(response);\n      });\n\n      offers[dest] =\n      {\n        callback: callback,\n        message: request,\n        peerConnection: pc\n      };\n\n      if(connector instanceof Array)\n        connector.forEach(function(c)\n        {\n          c.send(request);\n        });\n\n      // Send back the connection request over the same connector, since this\n      // should be the shortest path to connect both peers\n      else\n        connector.send(request);\n    });\n\n    return pc;\n  };\n\n  function processAnswer(response)\n  {\n    var from = response.from;\n    var dest = response.dest;\n\n    console.log(\"[\"+dest+\"] Received connection response from \"+from);\n\n    var peer = offers[from];\n    if(peer)\n    {\n      peer.peerConnection.setRemoteDescription(new RTCSessionDescription(\n      {\n        sdp:  response.sdp,\n        type: 'answer'\n      }),\n      function()\n      {\n        console.log(\"Successfuly generated RemoteDescription for \"+from);\n      },\n      onerror);\n    }\n    else\n      console.warn(\"[\"+dest+\"] Connection with peer '\" + from + \"' was not previously requested\");\n  };\n\n\n    //\n    // Manager events\n    //\n\n  function initManagerEvents(manager)\n  {\n    manager.on('connected', function()\n    {\n      if(handshakeManager.status != peersManager.status)\n        self.emit('connected');\n    });\n    manager.on('disconnected', function()\n    {\n      if(handshakeManager.status == peersManager.status)\n        self.emit('disconnected');\n    });\n    manager.on('error', function(error)\n    {\n      self.emit('error', error);\n    });\n\n    manager.on('offer',  onoffer);\n    manager.on('answer', forward);\n  };\n\n  // Init managers events\n\n  initManagerEvents(handshakeManager);\n  initManagerEvents(peersManager);\n\n  handshakeManager.on('presence', onpresence);\n\n\n  //\n  // Clossing functions\n  //\n\n  this.close = function()\n  {\n    handshakeManager.close();\n    peersManager.close();\n  };\n\n  // Close all connections when user goes out of the page or app is clossed\n  process.on('exit', function(code)\n  {\n    self.close();\n  });\n};\ninherits(WebP2P, EventEmitter);\n\n\nmodule.exports = WebP2P;\n","var inherits = require(\"inherits\");\n\nvar HandshakeConnector = require(\"./core/HandshakeConnector\");\n\nvar PUBNUB = require(\"pubnub\");\n\n\n/**\n * Handshake connector for PubNub\n * @param {Object} configuration Configuration object.\n */\nfunction Connector_PubNub(config_init, config_mess, max_connections)\n{\n  HandshakeConnector.call(this, max_connections);\n\n  var self = this;\n\n  var channel = config_mess.channel;\n\n\n  // Connect a handshake connector to the PubNub server\n  var pubnub = PUBNUB.init(config_init);\n\n  // Configure handshake connector\n  pubnub.subscribe(\n  {\n    channel: channel,\n    restore: false,\n    backfill: false,\n\n    connect:    self._open,\n    message:    self._message,\n    disconnect: self._close,\n\n    error: function(response)\n    {\n      self._error(new Error(response ? response.error : 'Undefined error'))\n    }\n  });\n\n\n  // Define methods\n\n  /**\n   * Close the connection with this handshake server\n   */\n  this.close = function()\n  {\n    pubnub.unsubscribe(\n    {\n      channel: channel\n    });\n\n    // This shouldn't be necesary, but seems 'disconnect' event is not being\n    // dispatched by the PubNub channel, so we close the connector explicitly\n    self._close();\n  }\n\n  /**\n   * Send the message\n   */\n  this.send = function(message)\n  {\n    pubnub.publish(\n    {\n      channel: channel,\n      message: message\n    });\n  };\n}\ninherits(Connector_PubNub, HandshakeConnector);\n\n\n// Class constants\nConnector_PubNub.prototype.max_connections = 50;\nObject.defineProperty(Connector_PubNub.prototype, 'max_chars', {value: 1800});\n\n\nmodule.exports = Connector_PubNub;\n","var inherits = require(\"inherits\");\n\nvar EventEmitter = require(\"events\").EventEmitter;\n\n\nfunction Connector()\n{\n  EventEmitter.call(this);\n\n  var self = this;\n\n\n  /**\n   * Notify that the connection to this handshake server is open\n   */\n  this._open = function()\n  {\n    self.emit('open');\n  };\n\n  this._message = function(message)\n  {\n    self.emit(\"message\", message);\n  };\n\n  this._close = function()\n  {\n    self.emit('close');\n  };\n\n  this._error = function(error)\n  {\n    self.emit('error', error);\n  };\n};\ninherits(Connector, EventEmitter);\n\n\nConnector.prototype.close = function()\n{\n  throw new TypeError(\"Connector.close should be defined in a child class\");\n};\nConnector.prototype.send = function(message)\n{\n  throw new TypeError(\"Connector.send should be defined in a child class\");\n};\n\n\nmodule.exports = Connector;\n","var inherits = require(\"inherits\");\n\nvar Connector = require(\"./Connector\");\n\n\nfunction Connector_DataChannel(datachannel)\n{\n  Connector.call(this);\n\n  var self = this;\n\n\n  datachannel.addEventListener('open',  self._open);\n  datachannel.addEventListener('message', function(event)\n  {\n    self._message(event.data);\n  });\n  datachannel.addEventListener('close', self._close);\n  datachannel.addEventListener('error', self._error);\n\n\n  // Define methods\n\n  /**\n   * Close the connection with the peer\n   */\n  this.close = function()\n  {\n    datachannel.close();\n  };\n\n  /**\n   * Send the message\n   */\n  this.send = function(message)\n  {\n    datachannel.send(message);\n  };\n};\ninherits(Connector_DataChannel, Connector);\n\n\nmodule.exports = Connector_DataChannel;\n","var inherits = require(\"inherits\");\n\nvar Connector = require(\"./Connector\");\n\n\nfunction HandshakeConnector(max_connections)\n{\n  Connector.call(this);\n\n  var self = this;\n\n\n  if(max_connections != undefined)\n    this.max_connections = Math.min(max_connections, this.max_connections);\n\n  /**\n   * Check if we should connect this new peer or ignore it to increase entropy\n   * in the network mesh\n   *\n   * @returns {Boolean}\n   */\n  this.shouldConnect = function()\n  {\n    return true;\n  };\n\n\n  // Count the maximum number of pending connections allowed to be\n  // done with this handshake server (undefined == unlimited)\n  var connections = 0;\n\n  this.increaseConnections = function()\n  {\n    // Increase the number of connections reached throught\n    // this handshake server\n    connections++;\n\n    // Close connection with handshake server if we got its quota of peers\n    if(connections >= self.max_connections)\n       self.close();\n  };\n};\ninherits(HandshakeConnector, Connector);\n\n\n// Class constants\nHandshakeConnector.prototype.max_connections = Number.POSITIVE_INFINITY;\n\n\nmodule.exports = HandshakeConnector;\n","const ERROR_NETWORK_UNKNOWN = {id: 0, msg: 'Unable to fetch handshake servers configuration'};\nconst ERROR_NETWORK_OFFLINE = {id: 1, msg: \"There's no available network\"};\nconst ERROR_REQUEST_FAILURE = {id: 2, msg: 'Unable to fetch handshake servers configuration'};\nconst ERROR_REQUEST_EMPTY   = {id: 3, msg: 'Handshake servers configuration is empty'};\n\nconst ERROR_NO_PEERS        = {id: 4, msg: 'Not connected to any peer'};\n\n\nexports.ERROR_NETWORK_UNKNOWN = ERROR_NETWORK_UNKNOWN;\nexports.ERROR_NETWORK_OFFLINE = ERROR_NETWORK_OFFLINE;\nexports.ERROR_REQUEST_FAILURE = ERROR_REQUEST_FAILURE;\nexports.ERROR_REQUEST_EMPTY   = ERROR_REQUEST_EMPTY;\nexports.ERROR_NO_PEERS        = ERROR_NO_PEERS;","/**\n * New node file\n */\nvar HandshakeConnector = require('./connectors/core/HandshakeConnector');\nvar WebP2P             = require('./WebP2P');\n\n\nmodule.exports = WebP2P;\nmodule.exports.HandshakeConnector = HandshakeConnector;","var inherits = require('inherits');\n\nvar Manager = require('./Manager');\n\nvar errors = require('../errors');\n\n\nvar Connector_PubNub = require('../connectors/PubNub');\n\n\n/**\n * Manage the handshake connectors using several servers\n *\n * @constructor\n * @param {String} json_uri URI of the handshake servers configuration.\n */\nfunction HandshakeManager(messagepacker, handshake_servers)\n{\n  Manager.call(this, messagepacker);\n\n  var self = this;\n\n\n  var handshakeConnectorConstructors = {};\n\n  this.registerConnectorConstructor = function(type, constructor)\n  {\n    handshakeConnectorConstructors[type] = constructor\n  };\n\n\n  // Default handshake connectors\n  this.registerConnectorConstructor('PubNub', Connector_PubNub);\n\n\n  function createConnector(config)\n  {\n    var type            = config.type;\n    var config_init     = config.config_init;\n    var config_mess     = config.config_mess;\n    var max_connections = config.max_connections;\n\n    // Check if connector constructor is from a valid handshake server\n    var connectorConstructor = handshakeConnectorConstructors[type];\n    if(!connectorConstructor)\n      throw Error(\"Invalid handshake server type '\" + type + \"'\");\n\n    var connector = new connectorConstructor(config_init, config_mess, max_connections);\n\n    self._initConnector(connector);\n\n    connector.on('open', function()\n    {\n      // Notify our presence to the other peers\n      connector.send(messagepacker.presence());\n    });\n\n    var _messageUnpacked = connector._messageUnpacked;\n    connector._messageUnpacked = function(message)\n    {\n      if(message.method == 'presence')\n      {\n        if(connector.shouldConnect())\n          self.emit(\"presence\", message.params.from, connector);\n      }\n      else\n        _messageUnpacked.call(connector, message);\n    };\n\n    return connector;\n  };\n\n\n  var configs = [];\n  var index = 0;\n\n  var configs_infinity = [];\n\n  /**\n   * Get a random handshake connector or test for the next one\n   * @param {Object} configuration Handshake servers configuration.\n   */\n  function handshake()\n  {\n    if(!configs.length)\n      throw Error('No handshake servers defined')\n\n    for(; index < configs.length; index++)\n    {\n      var connector = createConnector(configs[index]);\n          connector.on('close', function()\n      {\n        // Handshake connector has been closed, try to get an alternative one\n        index++;\n        handshake();\n      });\n\n      // Connector successfully created\n      return;\n    };\n\n    // All configured handshake servers has been consumed\n    // Get ready to start again from beginning of handshake servers list\n    index = 0;\n  };\n\n\n  this.addConfigs_byObject = function(config)\n  {\n    // Check if connector constructor is from a valid handshake server\n    var connectorConstructor = handshakeConnectorConstructors[config.type];\n    if(!connectorConstructor)\n      return console.error(\"Invalid handshake server config: \", config);\n\n    if(connectorConstructor.prototype.max_connections == Number.POSITIVE_INFINITY\n    && !config.max_connections)\n    {\n      configs_infinity.push(config)\n\n      // Start handshaking\n      createConnector(config);\n    }\n    else\n    {\n      configs.push(config);\n\n      // Start handshaking\n      if(self.status == 'disconnected')\n        handshake();\n    }\n  };\n\n\n  // Add handshake servers configuration\n  if(handshake_servers)\n    this.addConfigs(handshake_servers)\n};\ninherits(HandshakeManager, Manager);\n\n\nHandshakeManager.prototype.addConfigs = function(configuration)\n{\n  if(typeof configuration == 'string')\n    return this.addConfigs_byUri(configuration);\n\n  if(configuration instanceof Array)\n    return this.addConfigs_byArray(configuration);\n\n  this.addConfigs_byObject(configuration);\n};\n\nHandshakeManager.prototype.addConfigs_byArray = function(configuration)\n{\n  for(var i=0, config; config=configuration[i]; i++)\n    this.addConfigs_byObject(config);\n};\n\nHandshakeManager.prototype.addConfigs_byUri = function(json_uri)\n{\n  var self = this;\n\n  function dispatchError(error)\n  {\n    self.emit('error', error);\n  };\n\n  // Request the handshake servers configuration file\n  var http_request = new XMLHttpRequest();\n\n  http_request.open('GET', json_uri);\n  http_request.onload = function(event)\n  {\n    if(this.status == 200)\n    {\n      var configuration = JSON.parse(http_request.response);\n\n      // We got some config entries\n      if(configuration.length)\n        self.addConfigs_byArray(configuration)\n\n      // Config was empty\n      else\n        dispatchError(errors.ERROR_REQUEST_EMPTY)\n    }\n\n    // Request returned an error\n    else\n      dispatchError(errors.ERROR_REQUEST_FAILURE)\n  };\n\n  // Connection error\n  http_request.onerror = function(event)\n  {\n    dispatchError(navigator.onLine ? errors.ERROR_NETWORK_UNKNOWN\n                                   : errors.ERROR_NETWORK_OFFLINE)\n  };\n\n  http_request.send();\n};\n\n\nmodule.exports = HandshakeManager;\n","var EventEmitter = require(\"events\").EventEmitter;\n\nvar inherits = require('inherits');\n\n\nfunction Manager(messagepacker)\n{\n  EventEmitter.call(this);\n\n  var self = this;\n\n\n  this._connectors = [];\n\n  this.__defineGetter__(\"status\", function()\n  {\n    return this._connectors.length ? 'connected' : 'disconnected';\n  });\n\n\n  this._initConnector = function(connector)\n  {\n    connector.on('open', function()\n    {\n//      for(var i=0, conn; conn=self._connectors[i]; i++)\n//        if(conn===connector)\n//          console.error('Duplicate connector',connector);\n\n      self._connectors.push(connector);\n\n      if(self._connectors.length == 1)\n         self.emit('connected');\n    });\n    connector.on('close', function()\n    {\n      self._connectors.splice(self._connectors.indexOf(connector), 1);\n\n      if(self._connectors.length == 0)\n         self.emit('disconnected');\n    });\n    connector.on('error', function(error)\n    {\n      connector.close();\n\n      self.emit('error', error);\n    });\n\n    connector._messageUnpacked = function(message)\n    {\n      var method = message.method;\n      var params = message.params;\n\n      switch(method)\n      {\n        case 'offer':\n          params.reply = function(error, result)\n          {\n            return message.reply(error, result);\n          };\n\n        case 'answer':\n          params.pack = function()\n          {\n            return message.pack();\n          };\n\n          self.emit(method, params, connector);\n        break;\n\n        case 'error':\n        break;\n\n        default:\n          console.error(\"Unknown message method '\"+method+\"'\", message);\n      };\n    };\n\n    connector.on('message', function(message)\n    {\n      message = messagepacker.unpack(message);\n      if(message)\n      {\n        // Response was previously stored, send it directly\n        if(message.stored)\n          connector.send(message)\n\n        // Normal message, process it\n        else\n          connector._messageUnpacked(message);\n      };\n    });\n  };\n};\ninherits(Manager, EventEmitter);\n\n\n/**\n * Close all the connections\n */\nManager.prototype.close = function()\n{\n  for(var i=0, connector; connector=this._connectors[i]; i++)\n    connector.close();\n};\n\n/**\n * {Object} message - Message to be send\n * {Connector} [incomingConnector] - {Connector} to don't send the message\n */\nManager.prototype.send = function(message, incomingConnector)\n{\n  for(var i=0, connector; connector=this._connectors[i]; i++)\n  {\n    // Don't send the message to the same connector where we received it\n    if(connector === incomingConnector)\n      continue;\n\n    connector.send(message);\n  };\n};\n\n\nmodule.exports = Manager;\n","var inherits = require('inherits');\n\nvar Manager = require('./Manager');\n\nvar Connector_DataChannel = require('../connectors/core/DataChannel');\n\n\n/**\n * @classdesc Manager of the communications with the other peers\n *\n * @constructor\n */\nfunction PeersManager(messagepacker, routingLabel)\n{\n  Manager.call(this, messagepacker);\n\n  var self = this;\n\n\n  function createConnector(channel)\n  {\n    var connector = new Connector_DataChannel(channel);\n\n    self._initConnector(connector);\n\n    return connector;\n  };\n\n\n  var peers = {};\n\n  this.__defineGetter__(\"peers\", function()\n  {\n    return peers;\n  });\n\n\n  function initDataChannel(channel, sessionID)\n  {\n    if(channel.label == routingLabel)\n    {\n      var connector = createConnector(channel);\n          connector.sessionID = sessionID;\n\n      return connector;\n    };\n  };\n\n  this.add = function(sessionID, peerConnection, channels)\n  {\n    peerConnection.addEventListener('signalingstatechange', function(event)\n    {\n      // Remove the peer from the list of peers when gets closed\n      if(peerConnection.signalingState == 'closed')\n        delete peers[sessionID];\n    });\n\n    // Connection initiator\n    if(channels.length)\n    {\n      // Only init the routing functionality on the routing channel\n      for(var i=0, channel; channel=channels[i]; i++)\n        if(initDataChannel(channel, sessionID))\n          break;\n    }\n\n    // Connection receiver\n    else\n    {\n      function initDataChannel_listener(event)\n      {\n        var channel = event.channel;\n\n        var connector = initDataChannel(channel, sessionID);\n        if(connector)\n          event.target.removeEventListener('datachannel', initDataChannel_listener);\n      };\n\n      peerConnection.addEventListener('datachannel', initDataChannel_listener);\n    };\n\n    // Add PeerConnection to the list of enabled ones\n    peers[sessionID] = peerConnection;\n  };\n\n  this.get = function(sessionID)\n  {\n    return peers[sessionID];\n  };\n\n  var _close = this.close;\n  this.close = function()\n  {\n    for(var id in peers)\n      peers[id].close();\n\n    _close.call(this);\n  };\n};\ninherits(PeersManager, Manager);\n\n\nmodule.exports = PeersManager;\n","const ERROR    = 0;\nconst PRESENCE = 1;\nconst OFFER    = 2;\nconst ANSWER   = 3;\n\n\nfunction pack(message, id)\n{\n  var result = new Array(6);\n  var params = message.params || {};\n\n  // Method\n  var method = message.method;\n  switch(method)\n  {\n    case \"error\":\n      result[0] = ERROR;\n    break;\n\n    case \"presence\":\n      result[0] = PRESENCE;\n    break;\n\n    case \"offer\":\n      result[0] = OFFER;\n    break;\n\n    case \"answer\":\n      result[0] = ANSWER;\n    break;\n\n    default:\n    {\n      var error = new Error(\"Unknown message method '\"+method+\"'\");\n          error.message = message;\n\n      throw error;\n    };\n  };\n\n  // From\n  result[1] = params.from;\n\n  // Offer & Answer\n\n  if(method != 'presence')\n  {\n    result[2] = params.dest;\n    result[3] = id;\n    result[4] = params.ttl;\n    result[5] = params.sdp || params.message;\n  };\n\n  return JSON.stringify(result);\n};\n\nfunction unpack(message)\n{\n  var result = {};\n  var params = {};\n\n  message = JSON.parse(message);\n\n  // Method\n  var method = message[0];\n  switch(method)\n  {\n    case ERROR:\n      result.method = \"error\";\n    break;\n\n    case PRESENCE:\n      result.method = \"presence\";\n    break;\n\n    case OFFER:\n      result.method = \"offer\";\n    break;\n\n    case ANSWER:\n      result.method = \"answer\";\n    break;\n\n    default:\n    {\n      var error = Error(\"Unknown message method '\"+method+\"'\");\n          error.message = message;\n\n      throw error;\n    };\n  };\n\n  // From\n  params.from = message[1];\n\n  // Offer & Answer\n\n  if(method != PRESENCE)\n  {\n    params.dest = message[2];\n    result.id   = message[3];\n    params.ttl  = message[4];\n\n    if(method == ERROR)\n      params.message = message[5];\n    else\n      params.sdp = message[5];\n  };\n\n  // Return unpacked message\n  result.params = params;\n\n  return result;\n};\n\n\nvar responseMethods =\n{\n  'presence': 'offer',\n\n  'offer':\n  {\n    error:    'error',\n    response: 'answer'\n  }\n};\n\n\nexports.pack   = pack;\nexports.unpack = unpack;\n\nexports.responseMethods = responseMethods;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        throw TypeError('Uncaught, unspecified \"error\" event.');\n      }\n      return false;\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      console.trace();\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"PcZj9L\":[function(require,module,exports){\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = Buffer\nexports.INSPECT_MAX_BYTES = 50\nBuffer.poolSize = 8192\n\n/**\n * If `browserSupport`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (compatible down to IE6)\n */\nvar browserSupport = (function () {\n   // Detect if browser supports Typed Arrays. Supported browsers are IE 10+,\n   // Firefox 4+, Chrome 7+, Safari 5.1+, Opera 11.6+, iOS 4.2+.\n   if (typeof Uint8Array === 'undefined' || typeof ArrayBuffer === 'undefined' ||\n        typeof DataView === 'undefined')\n      return false\n\n  // Does the browser support adding properties to `Uint8Array` instances? If\n  // not, then that's the same as no `Uint8Array` support. We need to be able to\n  // add all the node Buffer API methods.\n  // Relevant Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=695438\n  try {\n    var arr = new Uint8Array(0)\n    arr.foo = function () { return 42 }\n    return 42 === arr.foo()\n  } catch (e) {\n    return false\n  }\n})()\n\n\n/**\n * Class: Buffer\n * =============\n *\n * The Buffer constructor returns instances of `Uint8Array` that are augmented\n * with function properties for all the node `Buffer` API functions. We use\n * `Uint8Array` so that square bracket notation works as expected -- it returns\n * a single octet.\n *\n * By augmenting the instances, we can avoid modifying the `Uint8Array`\n * prototype.\n */\nfunction Buffer (subject, encoding, noZero) {\n  if (!(this instanceof Buffer))\n    return new Buffer(subject, encoding, noZero)\n\n  var type = typeof subject\n\n  // Workaround: node's base64 implementation allows for non-padded strings\n  // while base64-js does not.\n  if (encoding === 'base64' && type === 'string') {\n    subject = stringtrim(subject)\n    while (subject.length % 4 !== 0) {\n      subject = subject + '='\n    }\n  }\n\n  // Find the length\n  var length\n  if (type === 'number')\n    length = coerce(subject)\n  else if (type === 'string')\n    length = Buffer.byteLength(subject, encoding)\n  else if (type === 'object')\n    length = coerce(subject.length) // Assume object is an array\n  else\n    throw new Error('First argument needs to be a number, array or string.')\n\n  var buf\n  if (browserSupport) {\n    // Preferred: Return an augmented `Uint8Array` instance for best performance\n    buf = augment(new Uint8Array(length))\n  } else {\n    // Fallback: Return this instance of Buffer\n    buf = this\n    buf.length = length\n  }\n\n  var i\n  if (Buffer.isBuffer(subject)) {\n    // Speed optimization -- use set if we're copying from a Uint8Array\n    buf.set(subject)\n  } else if (isArrayish(subject)) {\n    // Treat array-ish objects as a byte array\n    for (i = 0; i < length; i++) {\n      if (Buffer.isBuffer(subject))\n        buf[i] = subject.readUInt8(i)\n      else\n        buf[i] = subject[i]\n    }\n  } else if (type === 'string') {\n    buf.write(subject, 0, encoding)\n  } else if (type === 'number' && !browserSupport && !noZero) {\n    for (i = 0; i < length; i++) {\n      buf[i] = 0\n    }\n  }\n\n  return buf\n}\n\n// STATIC METHODS\n// ==============\n\nBuffer.isEncoding = function (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'binary':\n    case 'base64':\n    case 'raw':\n      return true\n\n    default:\n      return false\n  }\n}\n\nBuffer.isBuffer = function (b) {\n  return b && b._isBuffer\n}\n\nBuffer.byteLength = function (str, encoding) {\n  switch (encoding || 'utf8') {\n    case 'hex':\n      return str.length / 2\n\n    case 'utf8':\n    case 'utf-8':\n      return utf8ToBytes(str).length\n\n    case 'ascii':\n    case 'binary':\n      return str.length\n\n    case 'base64':\n      return base64ToBytes(str).length\n\n    default:\n      throw new Error('Unknown encoding')\n  }\n}\n\nBuffer.concat = function (list, totalLength) {\n  if (!isArray(list)) {\n    throw new Error('Usage: Buffer.concat(list, [totalLength])\\n' +\n        'list should be an Array.')\n  }\n\n  if (list.length === 0) {\n    return new Buffer(0)\n  } else if (list.length === 1) {\n    return list[0]\n  }\n\n  var i\n  if (typeof totalLength !== 'number') {\n    totalLength = 0\n    for (i = 0; i < list.length; i++) {\n      totalLength += list[i].length\n    }\n  }\n\n  var buf = new Buffer(totalLength)\n  var pos = 0\n  for (i = 0; i < list.length; i++) {\n    var item = list[i]\n    item.copy(buf, pos)\n    pos += item.length\n  }\n  return buf\n}\n\n// BUFFER INSTANCE METHODS\n// =======================\n\nfunction _hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) {\n    throw new Error('Invalid hex string')\n  }\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; i++) {\n    var byte = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(byte)) throw new Error('Invalid hex string')\n    buf[offset + i] = byte\n  }\n  Buffer._charsWritten = i * 2\n  return i\n}\n\nfunction _utf8Write (buf, string, offset, length) {\n  var bytes, pos\n  return Buffer._charsWritten = blitBuffer(utf8ToBytes(string), buf, offset, length)\n}\n\nfunction _asciiWrite (buf, string, offset, length) {\n  var bytes, pos\n  return Buffer._charsWritten = blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction _binaryWrite (buf, string, offset, length) {\n  return _asciiWrite(buf, string, offset, length)\n}\n\nfunction _base64Write (buf, string, offset, length) {\n  var bytes, pos\n  return Buffer._charsWritten = blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nBuffer.prototype.write = function (string, offset, length, encoding) {\n  // Support both (string, offset, length, encoding)\n  // and the legacy (string, encoding, offset, length)\n  if (isFinite(offset)) {\n    if (!isFinite(length)) {\n      encoding = length\n      length = undefined\n    }\n  } else {  // legacy\n    var swap = encoding\n    encoding = offset\n    offset = length\n    length = swap\n  }\n\n  offset = Number(offset) || 0\n  var remaining = this.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n  encoding = String(encoding || 'utf8').toLowerCase()\n\n  switch (encoding) {\n    case 'hex':\n      return _hexWrite(this, string, offset, length)\n\n    case 'utf8':\n    case 'utf-8':\n      return _utf8Write(this, string, offset, length)\n\n    case 'ascii':\n      return _asciiWrite(this, string, offset, length)\n\n    case 'binary':\n      return _binaryWrite(this, string, offset, length)\n\n    case 'base64':\n      return _base64Write(this, string, offset, length)\n\n    default:\n      throw new Error('Unknown encoding')\n  }\n}\n\nBuffer.prototype.toString = function (encoding, start, end) {\n  var self = this\n\n  encoding = String(encoding || 'utf8').toLowerCase()\n  start = Number(start) || 0\n  end = (end !== undefined)\n    ? Number(end)\n    : end = self.length\n\n  // Fastpath empty strings\n  if (end === start)\n    return ''\n\n  switch (encoding) {\n    case 'hex':\n      return _hexSlice(self, start, end)\n\n    case 'utf8':\n    case 'utf-8':\n      return _utf8Slice(self, start, end)\n\n    case 'ascii':\n      return _asciiSlice(self, start, end)\n\n    case 'binary':\n      return _binarySlice(self, start, end)\n\n    case 'base64':\n      return _base64Slice(self, start, end)\n\n    default:\n      throw new Error('Unknown encoding')\n  }\n}\n\nBuffer.prototype.toJSON = function () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function (target, target_start, start, end) {\n  var source = this\n\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (!target_start) target_start = 0\n\n  // Copy 0 bytes; we're done\n  if (end === start) return\n  if (target.length === 0 || source.length === 0) return\n\n  // Fatal error conditions\n  if (end < start)\n    throw new Error('sourceEnd < sourceStart')\n  if (target_start < 0 || target_start >= target.length)\n    throw new Error('targetStart out of bounds')\n  if (start < 0 || start >= source.length)\n    throw new Error('sourceStart out of bounds')\n  if (end < 0 || end > source.length)\n    throw new Error('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length)\n    end = this.length\n  if (target.length - target_start < end - start)\n    end = target.length - target_start + start\n\n  // copy!\n  for (var i = 0; i < end - start; i++)\n    target[i + target_start] = this[i + start]\n}\n\nfunction _base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction _utf8Slice (buf, start, end) {\n  var res = ''\n  var tmp = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    if (buf[i] <= 0x7F) {\n      res += decodeUtf8Char(tmp) + String.fromCharCode(buf[i])\n      tmp = ''\n    } else {\n      tmp += '%' + buf[i].toString(16)\n    }\n  }\n\n  return res + decodeUtf8Char(tmp)\n}\n\nfunction _asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++)\n    ret += String.fromCharCode(buf[i])\n  return ret\n}\n\nfunction _binarySlice (buf, start, end) {\n  return _asciiSlice(buf, start, end)\n}\n\nfunction _hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; i++) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\n// TODO: add test that modifying the new buffer slice will modify memory in the\n// original buffer! Use code from:\n// http://nodejs.org/api/buffer.html#buffer_buf_slice_start_end\nBuffer.prototype.slice = function (start, end) {\n  var len = this.length\n  start = clamp(start, len, 0)\n  end = clamp(end, len, len)\n\n  if (browserSupport) {\n    return augment(this.subarray(start, end))\n  } else {\n    // TODO: slicing works, with limitations (no parent tracking/update)\n    // https://github.com/feross/native-buffer-browserify/issues/9\n    var sliceLen = end - start\n    var newBuf = new Buffer(sliceLen, undefined, true)\n    for (var i = 0; i < sliceLen; i++) {\n      newBuf[i] = this[i + start]\n    }\n    return newBuf\n  }\n}\n\nBuffer.prototype.readUInt8 = function (offset, noAssert) {\n  var buf = this\n  if (!noAssert) {\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  if (offset >= buf.length)\n    return\n\n  return buf[offset]\n}\n\nfunction _readUInt16 (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 1 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 1 < len) {\n      return buf._dataview.getUint16(offset, littleEndian)\n    } else {\n      var dv = new DataView(new ArrayBuffer(2))\n      dv.setUint8(0, buf[len - 1])\n      return dv.getUint16(0, littleEndian)\n    }\n  } else {\n    var val\n    if (littleEndian) {\n      val = buf[offset]\n      if (offset + 1 < len)\n        val |= buf[offset + 1] << 8\n    } else {\n      val = buf[offset] << 8\n      if (offset + 1 < len)\n        val |= buf[offset + 1]\n    }\n    return val\n  }\n}\n\nBuffer.prototype.readUInt16LE = function (offset, noAssert) {\n  return _readUInt16(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readUInt16BE = function (offset, noAssert) {\n  return _readUInt16(this, offset, false, noAssert)\n}\n\nfunction _readUInt32 (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 3 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 3 < len) {\n      return buf._dataview.getUint32(offset, littleEndian)\n    } else {\n      var dv = new DataView(new ArrayBuffer(4))\n      for (var i = 0; i + offset < len; i++) {\n        dv.setUint8(i, buf[i + offset])\n      }\n      return dv.getUint32(0, littleEndian)\n    }\n  } else {\n    var val\n    if (littleEndian) {\n      if (offset + 2 < len)\n        val = buf[offset + 2] << 16\n      if (offset + 1 < len)\n        val |= buf[offset + 1] << 8\n      val |= buf[offset]\n      if (offset + 3 < len)\n        val = val + (buf[offset + 3] << 24 >>> 0)\n    } else {\n      if (offset + 1 < len)\n        val = buf[offset + 1] << 16\n      if (offset + 2 < len)\n        val |= buf[offset + 2] << 8\n      if (offset + 3 < len)\n        val |= buf[offset + 3]\n      val = val + (buf[offset] << 24 >>> 0)\n    }\n    return val\n  }\n}\n\nBuffer.prototype.readUInt32LE = function (offset, noAssert) {\n  return _readUInt32(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readUInt32BE = function (offset, noAssert) {\n  return _readUInt32(this, offset, false, noAssert)\n}\n\nBuffer.prototype.readInt8 = function (offset, noAssert) {\n  var buf = this\n  if (!noAssert) {\n    assert(offset !== undefined && offset !== null,\n        'missing offset')\n    assert(offset < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  if (offset >= buf.length)\n    return\n\n  if (browserSupport) {\n    return buf._dataview.getInt8(offset)\n  } else {\n    var neg = buf[offset] & 0x80\n    if (neg)\n      return (0xff - buf[offset] + 1) * -1\n    else\n      return buf[offset]\n  }\n}\n\nfunction _readInt16 (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 1 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 1 === len) {\n      var dv = new DataView(new ArrayBuffer(2))\n      dv.setUint8(0, buf[len - 1])\n      return dv.getInt16(0, littleEndian)\n    } else {\n      return buf._dataview.getInt16(offset, littleEndian)\n    }\n  } else {\n    var val = _readUInt16(buf, offset, littleEndian, true)\n    var neg = val & 0x8000\n    if (neg)\n      return (0xffff - val + 1) * -1\n    else\n      return val\n  }\n}\n\nBuffer.prototype.readInt16LE = function (offset, noAssert) {\n  return _readInt16(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readInt16BE = function (offset, noAssert) {\n  return _readInt16(this, offset, false, noAssert)\n}\n\nfunction _readInt32 (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 3 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 3 >= len) {\n      var dv = new DataView(new ArrayBuffer(4))\n      for (var i = 0; i + offset < len; i++) {\n        dv.setUint8(i, buf[i + offset])\n      }\n      return dv.getInt32(0, littleEndian)\n    } else {\n      return buf._dataview.getInt32(offset, littleEndian)\n    }\n  } else {\n    var val = _readUInt32(buf, offset, littleEndian, true)\n    var neg = val & 0x80000000\n    if (neg)\n      return (0xffffffff - val + 1) * -1\n    else\n      return val\n  }\n}\n\nBuffer.prototype.readInt32LE = function (offset, noAssert) {\n  return _readInt32(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readInt32BE = function (offset, noAssert) {\n  return _readInt32(this, offset, false, noAssert)\n}\n\nfunction _readFloat (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset + 3 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  if (browserSupport) {\n    return buf._dataview.getFloat32(offset, littleEndian)\n  } else {\n    return ieee754.read(buf, offset, littleEndian, 23, 4)\n  }\n}\n\nBuffer.prototype.readFloatLE = function (offset, noAssert) {\n  return _readFloat(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readFloatBE = function (offset, noAssert) {\n  return _readFloat(this, offset, false, noAssert)\n}\n\nfunction _readDouble (buf, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset + 7 < buf.length, 'Trying to read beyond buffer length')\n  }\n\n  if (browserSupport) {\n    return buf._dataview.getFloat64(offset, littleEndian)\n  } else {\n    return ieee754.read(buf, offset, littleEndian, 52, 8)\n  }\n}\n\nBuffer.prototype.readDoubleLE = function (offset, noAssert) {\n  return _readDouble(this, offset, true, noAssert)\n}\n\nBuffer.prototype.readDoubleBE = function (offset, noAssert) {\n  return _readDouble(this, offset, false, noAssert)\n}\n\nBuffer.prototype.writeUInt8 = function (value, offset, noAssert) {\n  var buf = this\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset < buf.length, 'trying to write beyond buffer length')\n    verifuint(value, 0xff)\n  }\n\n  if (offset >= buf.length) return\n\n  buf[offset] = value\n}\n\nfunction _writeUInt16 (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 1 < buf.length, 'trying to write beyond buffer length')\n    verifuint(value, 0xffff)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 1 === len) {\n      var dv = new DataView(new ArrayBuffer(2))\n      dv.setUint16(0, value, littleEndian)\n      buf[offset] = dv.getUint8(0)\n    } else {\n      buf._dataview.setUint16(offset, value, littleEndian)\n    }\n  } else {\n    for (var i = 0, j = Math.min(len - offset, 2); i < j; i++) {\n      buf[offset + i] =\n          (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n              (littleEndian ? i : 1 - i) * 8\n    }\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function (value, offset, noAssert) {\n  _writeUInt16(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeUInt16BE = function (value, offset, noAssert) {\n  _writeUInt16(this, value, offset, false, noAssert)\n}\n\nfunction _writeUInt32 (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 3 < buf.length, 'trying to write beyond buffer length')\n    verifuint(value, 0xffffffff)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  var i\n  if (browserSupport) {\n    if (offset + 3 >= len) {\n      var dv = new DataView(new ArrayBuffer(4))\n      dv.setUint32(0, value, littleEndian)\n      for (i = 0; i + offset < len; i++) {\n        buf[i + offset] = dv.getUint8(i)\n      }\n    } else {\n      buf._dataview.setUint32(offset, value, littleEndian)\n    }\n  } else {\n    for (i = 0, j = Math.min(len - offset, 4); i < j; i++) {\n      buf[offset + i] =\n          (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n    }\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function (value, offset, noAssert) {\n  _writeUInt32(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeUInt32BE = function (value, offset, noAssert) {\n  _writeUInt32(this, value, offset, false, noAssert)\n}\n\nBuffer.prototype.writeInt8 = function (value, offset, noAssert) {\n  var buf = this\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset < buf.length, 'Trying to write beyond buffer length')\n    verifsint(value, 0x7f, -0x80)\n  }\n\n  if (offset >= buf.length)\n    return\n\n  if (browserSupport) {\n    buf._dataview.setInt8(offset, value)\n  } else {\n    if (value >= 0)\n      buf.writeUInt8(value, offset, noAssert)\n    else\n      buf.writeUInt8(0xff + value + 1, offset, noAssert)\n  }\n}\n\nfunction _writeInt16 (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 1 < buf.length, 'Trying to write beyond buffer length')\n    verifsint(value, 0x7fff, -0x8000)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 1 === len) {\n      var dv = new DataView(new ArrayBuffer(2))\n      dv.setInt16(0, value, littleEndian)\n      buf[offset] = dv.getUint8(0)\n    } else {\n      buf._dataview.setInt16(offset, value, littleEndian)\n    }\n  } else {\n    if (value >= 0)\n      _writeUInt16(buf, value, offset, littleEndian, noAssert)\n    else\n      _writeUInt16(buf, 0xffff + value + 1, offset, littleEndian, noAssert)\n  }\n}\n\nBuffer.prototype.writeInt16LE = function (value, offset, noAssert) {\n  _writeInt16(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeInt16BE = function (value, offset, noAssert) {\n  _writeInt16(this, value, offset, false, noAssert)\n}\n\nfunction _writeInt32 (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 3 < buf.length, 'Trying to write beyond buffer length')\n    verifsint(value, 0x7fffffff, -0x80000000)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 3 >= len) {\n      var dv = new DataView(new ArrayBuffer(4))\n      dv.setInt32(0, value, littleEndian)\n      for (var i = 0; i + offset < len; i++) {\n        buf[i + offset] = dv.getUint8(i)\n      }\n    } else {\n      buf._dataview.setInt32(offset, value, littleEndian)\n    }\n  } else {\n    if (value >= 0)\n      _writeUInt32(buf, value, offset, littleEndian, noAssert)\n    else\n      _writeUInt32(buf, 0xffffffff + value + 1, offset, littleEndian, noAssert)\n  }\n}\n\nBuffer.prototype.writeInt32LE = function (value, offset, noAssert) {\n  _writeInt32(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeInt32BE = function (value, offset, noAssert) {\n  _writeInt32(this, value, offset, false, noAssert)\n}\n\nfunction _writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 3 < buf.length, 'Trying to write beyond buffer length')\n    verifIEEE754(value, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 3 >= len) {\n      var dv = new DataView(new ArrayBuffer(4))\n      dv.setFloat32(0, value, littleEndian)\n      for (var i = 0; i + offset < len; i++) {\n        buf[i + offset] = dv.getUint8(i)\n      }\n    } else {\n      buf._dataview.setFloat32(offset, value, littleEndian)\n    }\n  } else {\n    ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  }\n}\n\nBuffer.prototype.writeFloatLE = function (value, offset, noAssert) {\n  _writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function (value, offset, noAssert) {\n  _writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction _writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    assert(value !== undefined && value !== null, 'missing value')\n    assert(typeof littleEndian === 'boolean', 'missing or invalid endian')\n    assert(offset !== undefined && offset !== null, 'missing offset')\n    assert(offset + 7 < buf.length,\n        'Trying to write beyond buffer length')\n    verifIEEE754(value, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n\n  var len = buf.length\n  if (offset >= len)\n    return\n\n  if (browserSupport) {\n    if (offset + 7 >= len) {\n      var dv = new DataView(new ArrayBuffer(8))\n      dv.setFloat64(0, value, littleEndian)\n      for (var i = 0; i + offset < len; i++) {\n        buf[i + offset] = dv.getUint8(i)\n      }\n    } else {\n      buf._dataview.setFloat64(offset, value, littleEndian)\n    }\n  } else {\n    ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  }\n}\n\nBuffer.prototype.writeDoubleLE = function (value, offset, noAssert) {\n  _writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function (value, offset, noAssert) {\n  _writeDouble(this, value, offset, false, noAssert)\n}\n\n// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill = function (value, start, end) {\n  if (!value) value = 0\n  if (!start) start = 0\n  if (!end) end = this.length\n\n  if (typeof value === 'string') {\n    value = value.charCodeAt(0)\n  }\n\n  if (typeof value !== 'number' || isNaN(value)) {\n    throw new Error('value is not a number')\n  }\n\n  if (end < start) throw new Error('end < start')\n\n  // Fill 0 bytes; we're done\n  if (end === start) return\n  if (this.length === 0) return\n\n  if (start < 0 || start >= this.length) {\n    throw new Error('start out of bounds')\n  }\n\n  if (end < 0 || end > this.length) {\n    throw new Error('end out of bounds')\n  }\n\n  for (var i = start; i < end; i++) {\n    this[i] = value\n  }\n}\n\nBuffer.prototype.inspect = function () {\n  var out = []\n  var len = this.length\n  for (var i = 0; i < len; i++) {\n    out[i] = toHex(this[i])\n    if (i === exports.INSPECT_MAX_BYTES) {\n      out[i + 1] = '...'\n      break\n    }\n  }\n  return '<Buffer ' + out.join(' ') + '>'\n}\n\n/**\n * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.\n * Added in Node 0.12. Not added to Buffer.prototype since it should only\n * be available in browsers that support ArrayBuffer.\n */\nfunction BufferToArrayBuffer () {\n  return (new Buffer(this)).buffer\n}\n\n// HELPER FUNCTIONS\n// ================\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nvar BP = Buffer.prototype\n\nfunction augment (arr) {\n  arr._isBuffer = true\n\n  // Augment the Uint8Array *instance* (not the class!) with Buffer methods\n  arr.write = BP.write\n  arr.toString = BP.toString\n  arr.toLocaleString = BP.toString\n  arr.toJSON = BP.toJSON\n  arr.copy = BP.copy\n  arr.slice = BP.slice\n  arr.readUInt8 = BP.readUInt8\n  arr.readUInt16LE = BP.readUInt16LE\n  arr.readUInt16BE = BP.readUInt16BE\n  arr.readUInt32LE = BP.readUInt32LE\n  arr.readUInt32BE = BP.readUInt32BE\n  arr.readInt8 = BP.readInt8\n  arr.readInt16LE = BP.readInt16LE\n  arr.readInt16BE = BP.readInt16BE\n  arr.readInt32LE = BP.readInt32LE\n  arr.readInt32BE = BP.readInt32BE\n  arr.readFloatLE = BP.readFloatLE\n  arr.readFloatBE = BP.readFloatBE\n  arr.readDoubleLE = BP.readDoubleLE\n  arr.readDoubleBE = BP.readDoubleBE\n  arr.writeUInt8 = BP.writeUInt8\n  arr.writeUInt16LE = BP.writeUInt16LE\n  arr.writeUInt16BE = BP.writeUInt16BE\n  arr.writeUInt32LE = BP.writeUInt32LE\n  arr.writeUInt32BE = BP.writeUInt32BE\n  arr.writeInt8 = BP.writeInt8\n  arr.writeInt16LE = BP.writeInt16LE\n  arr.writeInt16BE = BP.writeInt16BE\n  arr.writeInt32LE = BP.writeInt32LE\n  arr.writeInt32BE = BP.writeInt32BE\n  arr.writeFloatLE = BP.writeFloatLE\n  arr.writeFloatBE = BP.writeFloatBE\n  arr.writeDoubleLE = BP.writeDoubleLE\n  arr.writeDoubleBE = BP.writeDoubleBE\n  arr.fill = BP.fill\n  arr.inspect = BP.inspect\n  arr.toArrayBuffer = BufferToArrayBuffer\n\n  if (arr.byteLength !== 0)\n    arr._dataview = new DataView(arr.buffer, arr.byteOffset, arr.byteLength)\n\n  return arr\n}\n\n// slice(start, end)\nfunction clamp (index, len, defaultValue) {\n  if (typeof index !== 'number') return defaultValue\n  index = ~~index;  // Coerce to integer.\n  if (index >= len) return len\n  if (index >= 0) return index\n  index += len\n  if (index >= 0) return index\n  return 0\n}\n\nfunction coerce (length) {\n  // Coerce length to a number (possibly NaN), round up\n  // in case it's fractional (e.g. 123.456) then do a\n  // double negate to coerce a NaN to 0. Easy, right?\n  length = ~~Math.ceil(+length)\n  return length < 0 ? 0 : length\n}\n\nfunction isArray (subject) {\n  return (Array.isArray || function (subject) {\n    return Object.prototype.toString.call(subject) === '[object Array]'\n  })(subject)\n}\n\nfunction isArrayish (subject) {\n  return isArray(subject) || Buffer.isBuffer(subject) ||\n      subject && typeof subject === 'object' &&\n      typeof subject.length === 'number'\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++)\n    if (str.charCodeAt(i) <= 0x7F)\n      byteArray.push(str.charCodeAt(i))\n    else {\n      var h = encodeURIComponent(str.charAt(i)).substr(1).split('%')\n      for (var j = 0; j < h.length; j++)\n        byteArray.push(parseInt(h[j], 16))\n    }\n  return byteArray\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(str)\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  var pos\n  for (var i = 0; i < length; i++) {\n    if ((i + offset >= dst.length) || (i >= src.length))\n      break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction decodeUtf8Char (str) {\n  try {\n    return decodeURIComponent(str)\n  } catch (err) {\n    return String.fromCharCode(0xFFFD) // UTF 8 invalid char\n  }\n}\n\n/*\n * We have to make sure that the value is a valid integer. This means that it\n * is non-negative. It has no fractional component and that it does not\n * exceed the maximum allowed value.\n */\nfunction verifuint (value, max) {\n  assert(typeof value == 'number', 'cannot write a non-number as a number')\n  assert(value >= 0,\n      'specified a negative value for writing an unsigned value')\n  assert(value <= max, 'value is larger than maximum value for type')\n  assert(Math.floor(value) === value, 'value has a fractional component')\n}\n\nfunction verifsint(value, max, min) {\n  assert(typeof value == 'number', 'cannot write a non-number as a number')\n  assert(value <= max, 'value larger than maximum allowed value')\n  assert(value >= min, 'value smaller than minimum allowed value')\n  assert(Math.floor(value) === value, 'value has a fractional component')\n}\n\nfunction verifIEEE754(value, max, min) {\n  assert(typeof value == 'number', 'cannot write a non-number as a number')\n  assert(value <= max, 'value larger than maximum allowed value')\n  assert(value >= min, 'value smaller than minimum allowed value')\n}\n\nfunction assert (test, message) {\n  if (!test) throw new Error(message || 'Failed assertion')\n}\n\n},{\"base64-js\":3,\"ieee754\":4}],\"native-buffer-browserify\":[function(require,module,exports){\nmodule.exports=require('PcZj9L');\n},{}],3:[function(require,module,exports){\n(function (exports) {\n\t'use strict';\n\n\tvar lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n\tfunction b64ToByteArray(b64) {\n\t\tvar i, j, l, tmp, placeHolders, arr;\n\t\n\t\tif (b64.length % 4 > 0) {\n\t\t\tthrow 'Invalid string. Length must be a multiple of 4';\n\t\t}\n\n\t\t// the number of equal signs (place holders)\n\t\t// if there are two placeholders, than the two characters before it\n\t\t// represent one byte\n\t\t// if there is only one, then the three characters before it represent 2 bytes\n\t\t// this is just a cheap hack to not do indexOf twice\n\t\tplaceHolders = indexOf(b64, '=');\n\t\tplaceHolders = placeHolders > 0 ? b64.length - placeHolders : 0;\n\n\t\t// base64 is 4/3 + up to two characters of the original data\n\t\tarr = [];//new Uint8Array(b64.length * 3 / 4 - placeHolders);\n\n\t\t// if there are placeholders, only get up to the last complete 4 chars\n\t\tl = placeHolders > 0 ? b64.length - 4 : b64.length;\n\n\t\tfor (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t\t\ttmp = (indexOf(lookup, b64.charAt(i)) << 18) | (indexOf(lookup, b64.charAt(i + 1)) << 12) | (indexOf(lookup, b64.charAt(i + 2)) << 6) | indexOf(lookup, b64.charAt(i + 3));\n\t\t\tarr.push((tmp & 0xFF0000) >> 16);\n\t\t\tarr.push((tmp & 0xFF00) >> 8);\n\t\t\tarr.push(tmp & 0xFF);\n\t\t}\n\n\t\tif (placeHolders === 2) {\n\t\t\ttmp = (indexOf(lookup, b64.charAt(i)) << 2) | (indexOf(lookup, b64.charAt(i + 1)) >> 4);\n\t\t\tarr.push(tmp & 0xFF);\n\t\t} else if (placeHolders === 1) {\n\t\t\ttmp = (indexOf(lookup, b64.charAt(i)) << 10) | (indexOf(lookup, b64.charAt(i + 1)) << 4) | (indexOf(lookup, b64.charAt(i + 2)) >> 2);\n\t\t\tarr.push((tmp >> 8) & 0xFF);\n\t\t\tarr.push(tmp & 0xFF);\n\t\t}\n\n\t\treturn arr;\n\t}\n\n\tfunction uint8ToBase64(uint8) {\n\t\tvar i,\n\t\t\textraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes\n\t\t\toutput = \"\",\n\t\t\ttemp, length;\n\n\t\tfunction tripletToBase64 (num) {\n\t\t\treturn lookup.charAt(num >> 18 & 0x3F) + lookup.charAt(num >> 12 & 0x3F) + lookup.charAt(num >> 6 & 0x3F) + lookup.charAt(num & 0x3F);\n\t\t};\n\n\t\t// go through the array every three bytes, we'll deal with trailing stuff later\n\t\tfor (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t\t\ttemp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2]);\n\t\t\toutput += tripletToBase64(temp);\n\t\t}\n\n\t\t// pad the end with zeros, but make sure to not forget the extra bytes\n\t\tswitch (extraBytes) {\n\t\t\tcase 1:\n\t\t\t\ttemp = uint8[uint8.length - 1];\n\t\t\t\toutput += lookup.charAt(temp >> 2);\n\t\t\t\toutput += lookup.charAt((temp << 4) & 0x3F);\n\t\t\t\toutput += '==';\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\ttemp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1]);\n\t\t\t\toutput += lookup.charAt(temp >> 10);\n\t\t\t\toutput += lookup.charAt((temp >> 4) & 0x3F);\n\t\t\t\toutput += lookup.charAt((temp << 2) & 0x3F);\n\t\t\t\toutput += '=';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tmodule.exports.toByteArray = b64ToByteArray;\n\tmodule.exports.fromByteArray = uint8ToBase64;\n}());\n\nfunction indexOf (arr, elt /*, from*/) {\n\tvar len = arr.length;\n\n\tvar from = Number(arguments[1]) || 0;\n\tfrom = (from < 0)\n\t\t? Math.ceil(from)\n\t\t: Math.floor(from);\n\tif (from < 0)\n\t\tfrom += len;\n\n\tfor (; from < len; from++) {\n\t\tif ((typeof arr === 'string' && arr.charAt(from) === elt) ||\n\t\t\t\t(typeof arr !== 'string' && arr[from] === elt)) {\n\t\t\treturn from;\n\t\t}\n\t}\n\treturn -1;\n}\n\n},{}],4:[function(require,module,exports){\nexports.read = function(buffer, offset, isLE, mLen, nBytes) {\n  var e, m,\n      eLen = nBytes * 8 - mLen - 1,\n      eMax = (1 << eLen) - 1,\n      eBias = eMax >> 1,\n      nBits = -7,\n      i = isLE ? (nBytes - 1) : 0,\n      d = isLE ? -1 : 1,\n      s = buffer[offset + i];\n\n  i += d;\n\n  e = s & ((1 << (-nBits)) - 1);\n  s >>= (-nBits);\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8);\n\n  m = e & ((1 << (-nBits)) - 1);\n  e >>= (-nBits);\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8);\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity);\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function(buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c,\n      eLen = nBytes * 8 - mLen - 1,\n      eMax = (1 << eLen) - 1,\n      eBias = eMax >> 1,\n      rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0),\n      i = isLE ? 0 : (nBytes - 1),\n      d = isLE ? 1 : -1,\n      s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8);\n\n  e = (e << mLen) | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8);\n\n  buffer[offset + i - d] |= s * 128;\n};\n\n},{}]},{},[])\n;;module.exports=require(\"native-buffer-browserify\").Buffer\n","// shim for using process in browser\n\nvar process = module.exports = {};\n\nprocess.nextTick = (function () {\n    var canSetImmediate = typeof window !== 'undefined'\n    && window.setImmediate;\n    var canPost = typeof window !== 'undefined'\n    && window.postMessage && window.addEventListener\n    ;\n\n    if (canSetImmediate) {\n        return function (f) { return window.setImmediate(f) };\n    }\n\n    if (canPost) {\n        var queue = [];\n        window.addEventListener('message', function (ev) {\n            var source = ev.source;\n            if ((source === window || source === null) && ev.data === 'process-tick') {\n                ev.stopPropagation();\n                if (queue.length > 0) {\n                    var fn = queue.shift();\n                    fn();\n                }\n            }\n        }, true);\n\n        return function nextTick(fn) {\n            queue.push(fn);\n            window.postMessage('process-tick', '*');\n        };\n    }\n\n    return function nextTick(fn) {\n        setTimeout(fn, 0);\n    };\n})();\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n}\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","var process=require(\"__browserify_process\"),global=typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {};// Generated by CoffeeScript 1.6.2\n(function() {\n  var EventEmitter, name, processLacksEventFunctions, value, _ref;\n\n  EventEmitter = require(\"events\").EventEmitter;\n\n  processLacksEventFunctions = function() {\n    var name, value, _ref;\n\n    _ref = EventEmitter.prototype;\n    for (name in _ref) {\n      value = _ref[name];\n      if (process[name] != null) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  if (!((typeof window !== \"undefined\" && window !== null) && window.document && window.navigator)) {\n    return;\n  }\n\n  if (!((typeof process !== \"undefined\" && process !== null) && (typeof global !== \"undefined\" && global !== null))) {\n    return;\n  }\n\n  if (window !== global) {\n    return;\n  }\n\n  if (window.onerror !== null) {\n    return;\n  }\n\n  if (!processLacksEventFunctions()) {\n    return;\n  }\n\n  _ref = EventEmitter.prototype;\n  for (name in _ref) {\n    value = _ref[name];\n    process[name] = value;\n  }\n\n  window.onerror = function(err, url, line) {\n    return process.emit(\"uncaughtException\", new Error(\"\" + err + \" (\" + url + \":\" + line + \")\"));\n  };\n\n  window.addEventListener(\"unload\", function(event) {\n    return process.emit(\"exit\");\n  });\n\n}).call(this);\n\n/*\n//@ sourceMappingURL=process-events-shim.map\n*/\n","function Mapper()\n{\n  var sources = {};\n\n\n  this.get = function(id, source)\n  {\n    var ids = sources[source];\n    if(ids == undefined)\n      return undefined;\n\n    return ids[id];\n  };\n\n  this.remove = function(id, source)\n  {\n    var ids = sources[source];\n    if(ids == undefined)\n      return;\n\n    delete ids[id];\n\n    if(!Object.keys(ids).length)\n      delete sources[source];\n  };\n\n  this.set = function(value, id, source)\n  {\n    if(value == undefined)\n      return this.remove(id, source);\n\n    var ids = sources[source];\n    if(ids == undefined)\n      sources[source] = ids = {};\n\n    ids[id] = value;\n  };\n};\n\n\nMapper.prototype.pop = function(id, source)\n{\n  var value = this.get(id, source);\n  if(value == undefined)\n    return undefined;\n\n  this.remove(id, source);\n\n  return value;\n};\n\n\nmodule.exports = Mapper;\n","/*\n * (C) Copyright 2014 Kurento (http://kurento.org/)\n *\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the GNU Lesser General Public License\n * (LGPL) version 2.1 which accompanies this distribution, and is available at\n * http://www.gnu.org/licenses/lgpl-2.1.html\n *\n * This library is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n */\n\nvar inherits = require('inherits');\n\nvar packers = require('./packers');\nvar Mapper = require('./Mapper');\n\n\nconst BASE_TIMEOUT = 5000;\n\n\nfunction unifyResponseMethods(responseMethods)\n{\n  if(!responseMethods) return {};\n\n  for(var key in responseMethods)\n  {\n    var value = responseMethods[key];\n\n    if(typeof value == 'string')\n      responseMethods[key] =\n      {\n        response: value\n      }\n  };\n\n  return responseMethods;\n};\n\n\n/**\n * Representation of a RPC notification\n *\n * @class\n *\n * @constructor\n *\n * @param {String} method -method of the notification\n * @param params - parameters of the notification\n */\nfunction RpcNotification(method, params)\n{\n  Object.defineProperty(this, 'method', {value: method, enumerable: true});\n  Object.defineProperty(this, 'params', {value: params, enumerable: true});\n};\n\n\n/**\n * @class\n *\n * @constructor\n */\nfunction RpcBuilder(packer)\n{\n  if(!packer)\n    throw new SyntaxError('Packer is not defined');\n\n  if(!packer.pack || !packer.unpack)\n    throw new SyntaxError('Packer is invalid');\n\n  var responseMethods = unifyResponseMethods(packer.responseMethods);\n\n\n  var self = this;\n\n  var requestID = 0;\n\n  var requests  = new Mapper();\n  var responses = new Mapper();\n\n  var message2Key = {};\n\n\n  /**\n   * Store the response to prevent to process duplicate request later\n   */\n  function storeResponse(message, id, dest)\n  {\n    var response =\n    {\n      message: message,\n      /** Timeout to auto-clean old responses */\n      timeout: setTimeout(function()\n      {\n        responses.remove(id, dest);\n      },\n      BASE_TIMEOUT)\n    };\n\n    responses.set(response, id, dest);\n  };\n\n\n  /**\n   * Representation of a RPC request\n   *\n   * @class\n   * @extends RpcNotification\n   *\n   * @constructor\n   *\n   * @param {String} method -method of the notification\n   * @param params - parameters of the notification\n   * @param {Integer} id - identifier of the request\n   * @param [from] - source of the notification\n   */\n  function RpcRequest(method, params, id, from)\n  {\n    RpcNotification.call(this, method, params);\n\n    var response = responses.get(id, from);\n\n    /**\n     * @constant {Boolean} duplicated\n     */\n    Object.defineProperty(this, 'duplicated',\n    {\n      value: Boolean(response)\n    });\n\n    var responseMethod = responseMethods[method];\n\n    this.pack = function()\n    {\n      return packer.pack(this, id);\n    }\n\n    /**\n     * Generate a response to this request\n     *\n     * @param {Error} [error]\n     * @param {*} [result]\n     *\n     * @returns {string}\n     */\n    this.reply = function(error, result)\n    {\n      // Duplicated request, remove old response timeout\n      if(response)\n        clearTimeout(response.timeout);\n\n      if(from != undefined)\n      {\n        if(error)\n          error.dest = from;\n\n        if(result)\n          result.dest = from;\n      };\n\n      var message;\n\n      // Protocol indicates that responses has own request methods\n      if(responseMethod)\n      {\n        if(responseMethod.error == undefined && error)\n          message = packer.pack(\n          {\n            error: error\n          }, id);\n\n        else\n        {\n          responseMethod = error\n                         ? responseMethod.error\n                         : responseMethod.response;\n\n          message = packer.pack(\n          {\n            method: responseMethod,\n            params: error || result\n          }, id);\n        }\n      }\n\n      // New request or overriden one, create new response with provided data\n      else if(error || result)\n        message = packer.pack(\n        {\n          error:  error,\n          result: result\n        }, id);\n\n      // Duplicate & not-overriden request, re-send old response\n      else if(response)\n        message = response.message;\n\n      // New empty reply, response null value\n      else\n        message = packer.pack({result: null}, id);\n\n      // Store the response to prevent to process a duplicated request later\n      storeResponse(message, id, from);\n\n      // Return the stored response so it can be directly send back\n      return message;\n    }\n  };\n  inherits(RpcRequest, RpcNotification);\n\n\n  /**\n   * Allow to cancel a request and don't wait for a response\n   */\n  this.cancel = function(message)\n  {\n    var key = message2Key[message];\n    if(!key) return;\n\n    delete message2Key[message];\n\n    var request = requests.pop(key.id, key.dest);\n    if(!request) return;\n\n    clearTimeout(request.timeout);\n  };\n\n\n  /**\n   * Generates and encode a JsonRPC 2.0 message\n   *\n   * @param {String} method -method of the notification\n   * @param params - parameters of the notification\n   * @param [dest] - destination of the notification\n   * @param [callback] - function called when a response to this request is\n   *   received. If not defined, a notification will be send instead\n   *\n   * @returns {string} A raw JsonRPC 2.0 request or notification string\n   */\n  this.encode = function(method, params, dest, callback)\n  {\n    // Fix optional parameters\n    if(params instanceof Function)\n    {\n      if(dest != undefined)\n        throw new SyntaxError(\"There can't be parameters after callback\");\n\n      callback = params;\n      dest     = undefined;\n      params   = undefined;\n    }\n\n    else if(dest instanceof Function)\n    {\n      if(callback != undefined)\n        throw new SyntaxError(\"There can't be parameters after callback\");\n\n      callback = dest;\n      dest     = undefined;\n    };\n\n    // Encode message\n    var message =\n    {\n      method: method,\n      params: params\n    };\n\n    if(callback)\n    {\n      var id = requestID++;\n\n      message = packer.pack(message, id);\n\n      function dispatchCallback(error, result)\n      {\n        self.cancel(message);\n\n        callback(error, result);\n      };\n\n      var request =\n      {\n        message:  message,\n        callback: dispatchCallback,\n        responseMethods: responseMethods[method] || {},\n        timeout:  setTimeout(function()\n        {\n          var error = new Error('Request has timed out');\n              error.request = request.message;\n\n          dispatchCallback(error)\n        },\n        BASE_TIMEOUT)\n      };\n\n      message2Key[message] = {id: id, dest: dest};\n\n      requests.set(request, id, dest);\n    }\n    else\n      message = packer.pack(message);\n\n    // Return the packed message\n    return message;\n  };\n\n  /**\n   * Decode and process a JsonRPC 2.0 message\n   *\n   * @param {string} message - string with the content of the JsonRPC 2.0 message\n   *\n   * @returns {RpcNotification|RpcRequest|undefined} - the representation of the\n   *   notification or the request. If a response was processed, it will return\n   *   `undefined` to notify that it was processed\n   *\n   * @throws {TypeError} - Message is not defined\n   */\n  this.decode = function(message)\n  {\n    if(!message)\n      throw new TypeError(\"Message is not defined\");\n\n    message = packer.unpack(message);\n\n    var id     = message.id;\n    var method = message.method;\n    var params = message.params || {};\n\n    var from = params.from;\n\n    // Notification\n    if(id == undefined)\n      return new RpcNotification(method, params);\n\n    // Request, or response with own method\n    if(method)\n    {\n      // Check for response with own method\n      var request = requests.get(id, from);\n      if(request)\n      {\n        var responseMethods = request.responseMethods;\n\n        if(method == responseMethods.error)\n        {\n          request.callback(params);\n\n          return requests.remove(id, from);\n        }\n\n        if(method == responseMethods.response)\n        {\n          request.callback(null, params);\n\n          return requests.remove(id, from);\n        }\n      }\n\n      // Request\n      message.pack = function()\n      {\n        return packer.pack(message, id);\n      };\n\n      return new RpcRequest(method, params, id, from);\n    }\n\n    // Response\n    var request = requests.get(id, from);\n    if(request == undefined)\n      return console.warn(\"No callback was defined for this message\", message);\n\n    // Process response\n    request.callback(message.error, message.result);\n  };\n};\n\n\nRpcBuilder.RpcNotification = RpcNotification;\n\n\nmodule.exports = RpcBuilder;\n\nRpcBuilder.packers = packers;\n","/**\n * JsonRPC 2.0 packer\n */\n\n/**\n * Pack a JsonRPC 2.0 message\n *\n * @param {Object} message - object to be packaged. It requires to have all the\n *   fields needed by the JsonRPC 2.0 message that it's going to be generated\n *\n * @return {String} - the stringified JsonRPC 2.0 message\n */\nfunction pack(message, id)\n{\n  var result =\n  {\n    jsonrpc: \"2.0\"\n  };\n\n  // Request\n  if(message.method)\n  {\n    result.method = message.method;\n\n    if(message.params)\n      result.params = message.params;\n\n    // Request is a notification\n    if(id != undefined)\n      result.id = id;\n  }\n\n  // Response\n  else if(id != undefined)\n  {\n    if(message.error)\n    {\n      if(message.result !== undefined)\n        throw new TypeError(\"Both result and error are defined\");\n\n      result.error = message.error;\n    }\n    else if(message.result !== undefined)\n      result.result = message.result;\n    else\n      throw new TypeError(\"No result or error is defined\");\n\n    result.id = id;\n  };\n\n  return JSON.stringify(result);\n};\n\n/**\n * Unpack a JsonRPC 2.0 message\n *\n * @param {String} message - string with the content of the JsonRPC 2.0 message\n *\n * @throws {TypeError} - Invalid JsonRPC version\n *\n * @return {Object} - object filled with the JsonRPC 2.0 message content\n */\nfunction unpack(message)\n{\n  if(typeof message == 'string' || message instanceof String)\n    message = JSON.parse(message);\n\n  // Check if it's a valid message\n\n  var version = message.jsonrpc;\n  if(version != \"2.0\")\n    throw new TypeError(\"Invalid JsonRPC version '\"+version+\"': \"\n                       +JSON.stringify(message));\n\n  if(message.method == undefined)\n  {\n    if(message.id == undefined)\n      throw new TypeError(\"Invalid message: \"+JSON.stringify(message));\n\n    var result_defined = message.result !== undefined;\n    var error_defined  = message.error  !== undefined;\n\n    // Check only result or error is defined, not both or none\n    if(result_defined && error_defined)\n      throw new TypeError(\"Both result and error are defined: \"\n                         +JSON.stringify(message));\n\n    if(!result_defined && !error_defined)\n      throw new TypeError(\"No result or error is defined: \"\n                         +JSON.stringify(message));\n  }\n\n  // Return unpacked message\n  return message;\n};\n\n\nexports.pack   = pack;\nexports.unpack = unpack;\n","function pack(message)\n{\n  throw new TypeError(\"Not yet implemented\");\n};\n\nfunction unpack(message)\n{\n  throw new TypeError(\"Not yet implemented\");\n};\n\n\nexports.pack   = pack;\nexports.unpack = unpack;\n","var JsonRPC = require('./JsonRPC');\nvar XmlRPC  = require('./XmlRPC');\n\n\nexports.JsonRPC = JsonRPC;\nexports.XmlRPC  = XmlRPC;\n","var global=typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {};\nvar rng;\n\nif (global.crypto && crypto.getRandomValues) {\n  // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n  // Moderately fast, high quality\n  var _rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(_rnds8);\n    return _rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  _rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return _rnds;\n  };\n}\n\nmodule.exports = rng;\n\n","var Buffer=require(\"__browserify_Buffer\");//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar _rng = require('./rng');\n\n// Buffer class to use\nvar BufferClass = typeof(Buffer) == 'function' ? Buffer : Array;\n\n// Maps for number <-> hex string conversion\nvar _byteToHex = [];\nvar _hexToByte = {};\nfor (var i = 0; i < 256; i++) {\n  _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  _hexToByte[_byteToHex[i]] = i;\n}\n\n// **`parse()` - Parse a UUID into it's component bytes**\nfunction parse(s, buf, offset) {\n  var i = (buf && offset) || 0, ii = 0;\n\n  buf = buf || [];\n  s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n    if (ii < 16) { // Don't overflow!\n      buf[i + ii++] = _hexToByte[oct];\n    }\n  });\n\n  // Zero out remaining bytes if string was short\n  while (ii < 16) {\n    buf[i + ii++] = 0;\n  }\n\n  return buf;\n}\n\n// **`unparse()` - Convert UUID byte array (ala parse()) into a string**\nfunction unparse(buf, offset) {\n  var i = offset || 0, bth = _byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = _rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; n++) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : unparse(b);\n}\n\n// **`v4()` - Generate random UUID**\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v4(options, buf, offset) {\n  // Deprecated - 'format' argument, as supported in v1.2\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new BufferClass(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ii++) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || unparse(rnds);\n}\n\n// Export public API\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\nuuid.parse = parse;\nuuid.unparse = unparse;\nuuid.BufferClass = BufferClass;\n\nmodule.exports = uuid;\n","var RTCIceCandidate       = window.mozRTCIceCandidate       || window.webkitRTCIceCandidate       || window.RTCIceCandidate;\nvar RTCPeerConnection     = window.mozRTCPeerConnection     || window.webkitRTCPeerConnection     || window.RTCPeerConnection;\nvar RTCSessionDescription = window.mozRTCSessionDescription || window.webkitRTCSessionDescription || window.RTCSessionDescription;\n\nexports.RTCIceCandidate       = RTCIceCandidate;\nexports.RTCPeerConnection     = RTCPeerConnection;\nexports.RTCSessionDescription = RTCSessionDescription;\n","// Version: 3.6.2\nvar NOW             = 1\n,   READY           = false\n,   READY_BUFFER    = []\n,   PRESENCE_SUFFIX = '-pnpres'\n,   DEF_WINDOWING   = 10     // MILLISECONDS.\n,   DEF_TIMEOUT     = 10000  // MILLISECONDS.\n,   DEF_SUB_TIMEOUT = 310    // SECONDS.\n,   DEF_KEEPALIVE   = 60     // SECONDS (FOR TIMESYNC).\n,   SECOND          = 1000   // A THOUSAND MILLISECONDS.\n,   URLBIT          = '/'\n,   PARAMSBIT       = '&'\n,   PRESENCE_HB_THRESHOLD = 5\n,   PRESENCE_HB_DEFAULT  = 30\n,   SDK_VER         = '3.6.2'\n,   REPL            = /{([\\w\\-]+)}/g;\n\n/**\n * UTILITIES\n */\nfunction unique() { return'x'+ ++NOW+''+(+new Date) }\nfunction rnow()   { return+new Date }\n\n/**\n * NEXTORIGIN\n * ==========\n * var next_origin = nextorigin();\n */\nvar nextorigin = (function() {\n    var max = 20\n    ,   ori = Math.floor(Math.random() * max);\n    return function( origin, failover ) {\n        return origin.indexOf('pubsub.') > 0\n            && origin.replace(\n             'pubsub', 'ps' + (\n                failover ? uuid().split('-')[0] :\n                (++ori < max? ori : ori=1)\n            ) ) || origin;\n    }\n})();\n\n\n/**\n * Build Url\n * =======\n *\n */\nfunction build_url( url_components, url_params ) {\n    var url    = url_components.join(URLBIT)\n    ,   params = [];\n\n    if (!url_params) return url;\n\n    each( url_params, function( key, value ) {\n        var value_str = (typeof value == 'object')?JSON['stringify'](value):value;\n        (typeof value != 'undefined' &&\n            value != null && encode(value_str).length > 0\n        ) && params.push(key + \"=\" + encode(value_str));\n    } );\n\n    url += \"?\" + params.join(PARAMSBIT);\n    return url;\n}\n\n/**\n * UPDATER\n * =======\n * var timestamp = unique();\n */\nfunction updater( fun, rate ) {\n    var timeout\n    ,   last   = 0\n    ,   runnit = function() {\n        if (last + rate > rnow()) {\n            clearTimeout(timeout);\n            timeout = setTimeout( runnit, rate );\n        }\n        else {\n            last = rnow();\n            fun();\n        }\n    };\n\n    return runnit;\n}\n\n/**\n * GREP\n * ====\n * var list = grep( [1,2,3], function(item) { return item % 2 } )\n */\nfunction grep( list, fun ) {\n    var fin = [];\n    each( list || [], function(l) { fun(l) && fin.push(l) } );\n    return fin\n}\n\n/**\n * SUPPLANT\n * ========\n * var text = supplant( 'Hello {name}!', { name : 'John' } )\n */\nfunction supplant( str, values ) {\n    return str.replace( REPL, function( _, match ) {\n        return values[match] || _\n    } );\n}\n\n/**\n * timeout\n * =======\n * timeout( function(){}, 100 );\n */\nfunction timeout( fun, wait ) {\n    return setTimeout( fun, wait );\n}\n\n/**\n * uuid\n * ====\n * var my_uuid = uuid();\n */\nfunction uuid(callback) {\n    var u = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,\n    function(c) {\n        var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n        return v.toString(16);\n    });\n    if (callback) callback(u);\n    return u;\n}\nfunction isArray(arg) {\n    var type = Object.prototype.toString.call(arg);\n    return   ( type === \"[object Array]\" || type === \"[object NodeList]\"  || type === \"[object ScriptBridgingArrayProxyObject]\");\n}\n\n/**\n * EACH\n * ====\n * each( [1,2,3], function(item) { } )\n */\nfunction each( o, f, old_logic) {\n    if ( !o || !f ) return;\n\n    if ( isArray(o) || ( old_logic && typeof o[0] != 'undefined' ) )\n        for ( var i = 0, l = o.length; i < l; )\n            f.call( o[i], o[i], i++ );\n    else\n        for ( var i in o )\n            o.hasOwnProperty    &&\n            o.hasOwnProperty(i) &&\n            f.call( o[i], i, o[i] );\n}\n\n/**\n * MAP\n * ===\n * var list = map( [1,2,3], function(item) { return item + 1 } )\n */\nfunction map( list, fun ) {\n    var fin = [];\n    each( list || [], function( k, v ) { fin.push(fun( k, v )) } );\n    return fin;\n}\n\n/**\n * ENCODE\n * ======\n * var encoded_data = encode('path');\n */\nfunction encode(path) { return encodeURIComponent(path) }\n\n/**\n * Generate Subscription Channel List\n * ==================================\n * generate_channel_list(channels_object);\n */\nfunction generate_channel_list(channels, nopresence) {\n    var list = [];\n    each( channels, function( channel, status ) {\n        if (nopresence) {\n            if(channel.search('-pnpres') < 0) { \n                if (status.subscribed) list.push(channel);\n            }    \n        } else {\n            if (status.subscribed) list.push(channel);\n        }  \n    });\n    return list.sort();\n}\n\n\n// PUBNUB READY TO CONNECT\nfunction ready() { timeout( function() {\n    if (READY) return;\n    READY = 1;\n    each( READY_BUFFER, function(connect) { connect() } );\n}, SECOND ); }\n\nfunction PN_API(setup) {\n    var SUB_WINDOWING =  +setup['windowing']   || DEF_WINDOWING\n    ,   SUB_TIMEOUT   = (+setup['timeout']     || DEF_SUB_TIMEOUT) * SECOND\n    ,   KEEPALIVE     = (+setup['keepalive']   || DEF_KEEPALIVE)   * SECOND\n    ,   NOLEAVE       = setup['noleave']       || 0\n    ,   PUBLISH_KEY   = setup['publish_key']   || 'demo'\n    ,   SUBSCRIBE_KEY = setup['subscribe_key'] || 'demo'\n    ,   AUTH_KEY      = setup['auth_key']      || ''\n    ,   SECRET_KEY    = setup['secret_key']    || ''\n    ,   PNSDK         = setup['PNSDK']         || ''\n    ,   hmac_SHA256   = setup['hmac_SHA256']\n    ,   SSL           = setup['ssl']            ? 's' : ''\n    ,   ORIGIN        = 'http'+SSL+'://'+(setup['origin']||'pubsub.pubnub.com')\n    ,   STD_ORIGIN    = nextorigin(ORIGIN)\n    ,   SUB_ORIGIN    = nextorigin(ORIGIN)\n    ,   CONNECT       = function(){}\n    ,   PUB_QUEUE     = []\n    ,   TIME_DRIFT    = 0\n    ,   SUB_CALLBACK  = 0\n    ,   SUB_CHANNEL   = 0\n    ,   SUB_RECEIVER  = 0\n    ,   SUB_RESTORE   = 0\n    ,   SUB_BUFF_WAIT = 0\n    ,   TIMETOKEN     = 0\n    ,   RESUMED       = false\n    ,   CHANNELS      = {}\n    ,   STATE         = {}\n    ,   PRESENCE_HB_TIMEOUT  = null\n    ,   PRESENCE_HB          = validate_presence_heartbeat(setup['heartbeat'] || setup['pnexpires'] || 0, setup['error'])\n    ,   PRESENCE_HB_INTERVAL = setup['heartbeat_interval'] || PRESENCE_HB - 3\n    ,   PRESENCE_HB_RUNNING  = false\n    ,   NO_WAIT_FOR_PENDING  = setup['no_wait_for_pending']\n    ,   COMPATIBLE_35 = setup['compatible_3.5']  || false\n    ,   xdr           = setup['xdr']\n    ,   error         = setup['error']      || function() {}\n    ,   _is_online    = setup['_is_online'] || function() { return 1 }\n    ,   jsonp_cb      = setup['jsonp_cb']   || function() { return 0 }\n    ,   db            = setup['db']         || {'get': function(){}, 'set': function(){}}\n    ,   CIPHER_KEY    = setup['cipher_key']\n    ,   UUID          = setup['uuid'] || ( db && db['get'](SUBSCRIBE_KEY+'uuid') || '');\n\n    var crypto_obj    = setup['crypto_obj'] ||\n        {\n            'encrypt' : function(a,key){ return a},\n            'decrypt' : function(b,key){return b}\n        };\n\n    function validate_presence_heartbeat(heartbeat, cur_heartbeat, error) {\n        var err = false;\n\n        if (typeof heartbeat === 'number') {\n            if (heartbeat > PRESENCE_HB_THRESHOLD || heartbeat == 0)\n                err = false;\n            else\n                err = true;\n        } else if(typeof heartbeat === 'boolean'){\n            if (!heartbeat) {\n                return 0;\n            } else {\n                return PRESENCE_HB_DEFAULT;\n            }\n        } else {\n            err = true;\n        }\n\n        if (err) {\n            error && error(\"Presence Heartbeat value invalid. Valid range ( x > \" + PRESENCE_HB_THRESHOLD + \" or x = 0). Current Value : \" + (cur_heartbeat || PRESENCE_HB_THRESHOLD));\n            return cur_heartbeat || PRESENCE_HB_THRESHOLD;\n        } else return heartbeat;\n    }\n\n    function encrypt(input, key) {\n        return crypto_obj['encrypt'](input, key || CIPHER_KEY) || input;\n    }\n    function decrypt(input, key) {\n        return crypto_obj['decrypt'](input, key || CIPHER_KEY) ||\n               crypto_obj['decrypt'](input, CIPHER_KEY) ||\n               input;\n    }\n\n    function error_common(message, callback) {\n        callback && callback({ 'error' : message || \"error occurred\"});\n        error && error(message);\n    }\n    function _presence_heartbeat() {\n\n        clearTimeout(PRESENCE_HB_TIMEOUT);\n\n        if (!PRESENCE_HB_INTERVAL || PRESENCE_HB_INTERVAL >= 500 || PRESENCE_HB_INTERVAL < 1 || !generate_channel_list(CHANNELS,true).length){\n            PRESENCE_HB_RUNNING = false;\n            return;\n        }\n\n        PRESENCE_HB_RUNNING = true;\n        SELF['presence_heartbeat']({\n            'callback' : function(r) {\n                PRESENCE_HB_TIMEOUT = timeout( _presence_heartbeat, (PRESENCE_HB_INTERVAL) * SECOND );\n            },\n            'error' : function(e) {\n                error && error(\"Presence Heartbeat unable to reach Pubnub servers.\" + JSON.stringify(e));\n                PRESENCE_HB_TIMEOUT = timeout( _presence_heartbeat, (PRESENCE_HB_INTERVAL) * SECOND );\n            }\n        });\n    }\n\n    function start_presence_heartbeat() {\n        !PRESENCE_HB_RUNNING && _presence_heartbeat();\n    }\n\n    function publish(next) {\n\n        if (NO_WAIT_FOR_PENDING) {\n            if (!PUB_QUEUE.length) return;\n        } else {\n            if (next) PUB_QUEUE.sending = 0;\n            if ( PUB_QUEUE.sending || !PUB_QUEUE.length ) return;\n            PUB_QUEUE.sending = 1;\n        }\n\n        xdr(PUB_QUEUE.shift());\n    }\n\n    function each_channel(callback) {\n        var count = 0;\n\n        each( generate_channel_list(CHANNELS), function(channel) {\n            var chan = CHANNELS[channel];\n\n            if (!chan) return;\n\n            count++;\n            (callback||function(){})(chan);\n        } );\n\n        return count;\n    }\n    function _invoke_callback(response, callback, err) {\n        if (typeof response == 'object') {\n            if (response['error'] && response['message'] && response['payload']) {\n                err({'message' : response['message'], 'payload' : response['payload']});\n                return;\n            }\n            if (response['payload']) {\n                callback(response['payload']);\n                return;\n            }\n        }\n        callback(response);\n    }\n\n    function _invoke_error(response,err) {\n        if (typeof response == 'object' && response['error'] &&\n            response['message'] && response['payload']) {\n            err({'message' : response['message'], 'payload' : response['payload']});\n        } else err(response);\n    }\n\n    // Announce Leave Event\n    var SELF = {\n        'LEAVE' : function( channel, blocking, callback, error ) {\n\n            var data   = { 'uuid' : UUID, 'auth' : AUTH_KEY }\n            ,   origin = nextorigin(ORIGIN)\n            ,   callback = callback || function(){}\n            ,   err      = error    || function(){}\n            ,   jsonp  = jsonp_cb();\n\n            // Prevent Leaving a Presence Channel\n            if (channel.indexOf(PRESENCE_SUFFIX) > 0) return true;\n\n            if (COMPATIBLE_35) {\n                if (!SSL)         return false;\n                if (jsonp == '0') return false;\n            }\n            \n            if (NOLEAVE)  return false;\n\n            if (jsonp != '0') data['callback'] = jsonp;\n\n            xdr({\n                blocking : blocking || SSL,\n                timeout  : 2000,\n                callback : jsonp,\n                data     : data,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    origin, 'v2', 'presence', 'sub_key',\n                    SUBSCRIBE_KEY, 'channel', encode(channel), 'leave'\n                ]\n            });\n            return true;\n        },\n        'set_resumed' : function(resumed) {\n                RESUMED = resumed;\n        },\n        'get_cipher_key' : function() {\n            return CIPHER_KEY;\n        },\n        'set_cipher_key' : function(key) {\n            CIPHER_KEY = key;\n        },\n        'raw_encrypt' : function(input, key) {\n            return encrypt(input, key);\n        },\n        'raw_decrypt' : function(input, key) {\n            return decrypt(input, key);\n        },\n        'get_heartbeat' : function() {\n            return PRESENCE_HB;\n        },\n        'set_heartbeat' : function(heartbeat) {\n            PRESENCE_HB = validate_presence_heartbeat(heartbeat, PRESENCE_HB_INTERVAL, error);\n            PRESENCE_HB_INTERVAL = (PRESENCE_HB - 3 >= 1)?PRESENCE_HB - 3:1;\n            CONNECT();\n            _presence_heartbeat();\n        },\n        'get_heartbeat_interval' : function() {\n            return PRESENCE_HB_INTERVAL;\n        },\n        'set_heartbeat_interval' : function(heartbeat_interval) {\n            PRESENCE_HB_INTERVAL = heartbeat_interval;\n            _presence_heartbeat();\n        },\n        'get_version' : function() {\n            return SDK_VER;\n        },\n\n        /*\n            PUBNUB.history({\n                channel  : 'my_chat_channel',\n                limit    : 100,\n                callback : function(history) { }\n            });\n        */\n        'history' : function( args, callback ) {\n            var callback         = args['callback'] || callback\n            ,   count            = args['count']    || args['limit'] || 100\n            ,   reverse          = args['reverse']  || \"false\"\n            ,   err              = args['error']    || function(){}\n            ,   auth_key         = args['auth_key'] || AUTH_KEY\n            ,   cipher_key       = args['cipher_key']\n            ,   channel          = args['channel']\n            ,   start            = args['start']\n            ,   end              = args['end']\n            ,   include_token    = args['include_token']\n            ,   params           = {}\n            ,   jsonp            = jsonp_cb();\n\n            // Make sure we have a Channel\n            if (!channel)       return error('Missing Channel');\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            params['stringtoken'] = 'true';\n            params['count']       = count;\n            params['reverse']     = reverse;\n            params['auth']        = auth_key;\n\n            if (jsonp) params['callback']              = jsonp;\n            if (start) params['start']                 = start;\n            if (end)   params['end']                   = end;\n            if (include_token) params['include_token'] = 'true';\n\n            // Send Message\n            xdr({\n                callback : jsonp,\n                data     : params,\n                success  : function(response) {\n                    if (typeof response == 'object' && response['error']) {\n                        err({'message' : response['message'], 'payload' : response['payload']});\n                        return;\n                    }\n                    var messages = response[0];\n                    var decrypted_messages = [];\n                    for (var a = 0; a < messages.length; a++) {\n                        var new_message = decrypt(messages[a],cipher_key);\n                        try {\n                            decrypted_messages['push'](JSON['parse'](new_message));\n                        } catch (e) {\n                            decrypted_messages['push']((new_message));\n                        }\n                    }\n                    callback([decrypted_messages, response[1], response[2]]);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v2', 'history', 'sub-key',\n                    SUBSCRIBE_KEY, 'channel', encode(channel)\n                ]\n            });\n        },\n\n        /*\n            PUBNUB.replay({\n                source      : 'my_channel',\n                destination : 'new_channel'\n            });\n        */\n        'replay' : function(args, callback) {\n            var callback    = callback || args['callback'] || function(){}\n            ,   auth_key    = args['auth_key'] || AUTH_KEY\n            ,   source      = args['source']\n            ,   destination = args['destination']\n            ,   stop        = args['stop']\n            ,   start       = args['start']\n            ,   end         = args['end']\n            ,   reverse     = args['reverse']\n            ,   limit       = args['limit']\n            ,   jsonp       = jsonp_cb()\n            ,   data        = {}\n            ,   url;\n\n            // Check User Input\n            if (!source)        return error('Missing Source Channel');\n            if (!destination)   return error('Missing Destination Channel');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            // Setup URL Params\n            if (jsonp != '0') data['callback'] = jsonp;\n            if (stop)         data['stop']     = 'all';\n            if (reverse)      data['reverse']  = 'true';\n            if (start)        data['start']    = start;\n            if (end)          data['end']      = end;\n            if (limit)        data['count']    = limit;\n\n            data['auth'] = auth_key;\n\n            // Compose URL Parts\n            url = [\n                STD_ORIGIN, 'v1', 'replay',\n                PUBLISH_KEY, SUBSCRIBE_KEY,\n                source, destination\n            ];\n\n            // Start (or Stop) Replay!\n            xdr({\n                callback : jsonp,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function() { callback([ 0, 'Disconnected' ]) },\n                url      : url,\n                data     : data\n            });\n        },\n\n        /*\n            PUBNUB.auth('AJFLKAJSDKLA');\n        */\n        'auth' : function(auth) {\n            AUTH_KEY = auth;\n            CONNECT();\n        },\n\n        /*\n            PUBNUB.time(function(time){ });\n        */\n        'time' : function(callback) {\n            var jsonp = jsonp_cb();\n            xdr({\n                callback : jsonp,\n                data     : { 'uuid' : UUID, 'auth' : AUTH_KEY },\n                timeout  : SECOND * 5,\n                url      : [STD_ORIGIN, 'time', jsonp],\n                success  : function(response) { callback(response[0]) },\n                fail     : function() { callback(0) }\n            });\n        },\n\n        /*\n            PUBNUB.publish({\n                channel : 'my_chat_channel',\n                message : 'hello!'\n            });\n        */\n        'publish' : function( args, callback ) {\n            var callback = callback || args['callback'] || function(){}\n            ,   msg      = args['message']\n            ,   channel  = args['channel']\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   cipher_key = args['cipher_key']\n            ,   err      = args['error'] || function() {}\n            ,   jsonp    = jsonp_cb()\n            ,   add_msg  = 'push'\n            ,   url;\n\n            if (args['prepend']) add_msg = 'unshift'\n\n            if (!msg)           return error('Missing Message');\n            if (!channel)       return error('Missing Channel');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            // If trying to send Object\n            msg = JSON['stringify'](encrypt(msg, cipher_key));\n\n            // Create URL\n            url = [\n                STD_ORIGIN, 'publish',\n                PUBLISH_KEY, SUBSCRIBE_KEY,\n                0, encode(channel),\n                jsonp, encode(msg)\n            ];\n\n            // Queue Message Send\n            PUB_QUEUE[add_msg]({\n                callback : jsonp,\n                timeout  : SECOND * 5,\n                url      : url,\n                data     : { 'uuid' : UUID, 'auth' : auth_key },\n                fail     : function(response){\n                    _invoke_error(response, err);\n                    publish(1);\n                },\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                    publish(1);\n                }\n            });\n\n            // Send Message\n            publish();\n        },\n\n        /*\n            PUBNUB.unsubscribe({ channel : 'my_chat' });\n        */\n        'unsubscribe' : function(args, callback) {\n            var channel = args['channel']\n            ,   callback      = callback            || args['callback'] || function(){}\n            ,   err           = args['error']       || function(){};\n\n            TIMETOKEN   = 0;\n            SUB_RESTORE = 1;\n\n            // Prepare Channel(s)\n            channel = map( (\n                channel.join ? channel.join(',') : ''+channel\n            ).split(','), function(channel) {\n                if (!CHANNELS[channel]) return;\n                return channel + ',' + channel + PRESENCE_SUFFIX;\n            } ).join(',');\n\n            // Iterate over Channels\n            each( channel.split(','), function(channel) {\n                var CB_CALLED = true;\n                if (!channel) return;\n                if (READY) {\n                    CB_CALLED = SELF['LEAVE']( channel, 0 , callback, err);\n                }\n                if (!CB_CALLED) callback({action : \"leave\"});\n                CHANNELS[channel] = 0;\n                if (channel in STATE) delete STATE[channel];\n            } );\n\n            // Reset Connection if Count Less\n            CONNECT();\n        },\n\n        /*\n            PUBNUB.subscribe({\n                channel  : 'my_chat'\n                callback : function(message) { }\n            });\n        */\n        'subscribe' : function( args, callback ) {\n            var channel       = args['channel']\n            ,   callback      = callback            || args['callback']\n            ,   callback      = callback            || args['message']\n            ,   auth_key      = args['auth_key']    || AUTH_KEY\n            ,   connect       = args['connect']     || function(){}\n            ,   reconnect     = args['reconnect']   || function(){}\n            ,   disconnect    = args['disconnect']  || function(){}\n            ,   errcb         = args['error']       || function(){}\n            ,   idlecb        = args['idle']        || function(){}\n            ,   presence      = args['presence']    || 0\n            ,   noheresync    = args['noheresync']  || 0\n            ,   backfill      = args['backfill']    || 0\n            ,   timetoken     = args['timetoken']   || 0\n            ,   sub_timeout   = args['timeout']     || SUB_TIMEOUT\n            ,   windowing     = args['windowing']   || SUB_WINDOWING\n            ,   state         = args['state']\n            ,   heartbeat     = args['heartbeat'] || args['pnexpires']\n            ,   restore       = args['restore'];\n\n            // Restore Enabled?\n            SUB_RESTORE = restore;\n\n            // Always Reset the TT\n            TIMETOKEN = timetoken;\n\n            // Make sure we have a Channel\n            if (!channel)       return error('Missing Channel');\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            if (heartbeat || heartbeat === 0) {\n                SELF['set_heartbeat'](heartbeat);\n            }\n\n            // Setup Channel(s)\n            each( (channel.join ? channel.join(',') : ''+channel).split(','),\n            function(channel) {\n                var settings = CHANNELS[channel] || {};\n\n                // Store Channel State\n                CHANNELS[SUB_CHANNEL = channel] = {\n                    name         : channel,\n                    connected    : settings.connected,\n                    disconnected : settings.disconnected,\n                    subscribed   : 1,\n                    callback     : SUB_CALLBACK = callback,\n                    'cipher_key' : args['cipher_key'],\n                    connect      : connect,\n                    disconnect   : disconnect,\n                    reconnect    : reconnect\n                };\n                if (state) {\n                    if (channel in state) {\n                        STATE[channel] = state[channel];\n                    } else {\n                        STATE[channel] = state;\n                    }\n                }\n\n                // Presence Enabled?\n                if (!presence) return;\n\n                // Subscribe Presence Channel\n                SELF['subscribe']({\n                    'channel'  : channel + PRESENCE_SUFFIX,\n                    'callback' : presence,\n                    'restore'  : restore\n                });\n\n                // Presence Subscribed?\n                if (settings.subscribed) return;\n\n                // See Who's Here Now?\n                if (noheresync) return;\n                SELF['here_now']({\n                    'channel'  : channel,\n                    'callback' : function(here) {\n                        each( 'uuids' in here ? here['uuids'] : [],\n                        function(uid) { presence( {\n                            'action'    : 'join',\n                            'uuid'      : uid,\n                            'timestamp' : rnow(),\n                            'occupancy' : here['occupancy'] || 1\n                        }, here, channel ); } );\n                    }\n                });\n            } );\n\n            // Test Network Connection\n            function _test_connection(success) {\n                if (success) {\n                    // Begin Next Socket Connection\n                    timeout( CONNECT, SECOND );\n                }\n                else {\n                    // New Origin on Failed Connection\n                    STD_ORIGIN = nextorigin( ORIGIN, 1 );\n                    SUB_ORIGIN = nextorigin( ORIGIN, 1 );\n\n                    // Re-test Connection\n                    timeout( function() {\n                        SELF['time'](_test_connection);\n                    }, SECOND );\n                }\n\n                // Disconnect & Reconnect\n                each_channel(function(channel){\n                    // Reconnect\n                    if (success && channel.disconnected) {\n                        channel.disconnected = 0;\n                        return channel.reconnect(channel.name);\n                    }\n\n                    // Disconnect\n                    if (!success && !channel.disconnected) {\n                        channel.disconnected = 1;\n                        channel.disconnect(channel.name);\n                    }\n                });\n            }\n\n            // Evented Subscribe\n            function _connect() {\n                var jsonp    = jsonp_cb()\n                ,   channels = generate_channel_list(CHANNELS).join(',');\n\n                // Stop Connection\n                if (!channels) return;\n\n                // Connect to PubNub Subscribe Servers\n                _reset_offline();\n\n                var data = { 'uuid' : UUID, 'auth' : auth_key };\n\n                var st = JSON.stringify(STATE);\n                if (st.length > 2) data['state'] = JSON.stringify(STATE);\n\n                if (PRESENCE_HB) data['heartbeat'] = PRESENCE_HB;\n\n                start_presence_heartbeat();\n                SUB_RECEIVER = xdr({\n                    timeout  : sub_timeout,\n                    callback : jsonp,\n                    fail     : function(response) {\n                        _invoke_error(response, errcb);\n                        //SUB_RECEIVER = null;\n                        SELF['time'](_test_connection);\n                    },\n                    data     : data,\n                    url      : [\n                        SUB_ORIGIN, 'subscribe',\n                        SUBSCRIBE_KEY, encode(channels),\n                        jsonp, TIMETOKEN\n                    ],\n                    success : function(messages) {\n\n                        //SUB_RECEIVER = null;\n                        // Check for Errors\n                        if (!messages || (\n                            typeof messages == 'object' &&\n                            'error' in messages         &&\n                            messages['error']\n                        )) {\n                            errcb(messages['error']);\n                            return timeout( CONNECT, SECOND );\n                        }\n\n                        // User Idle Callback\n                        idlecb(messages[1]);\n\n                        // Restore Previous Connection Point if Needed\n                        TIMETOKEN = !TIMETOKEN               &&\n                                    SUB_RESTORE              &&\n                                    db['get'](SUBSCRIBE_KEY) || messages[1];\n\n                        // Connect\n                        each_channel(function(channel){\n                            if (channel.connected) return;\n                            channel.connected = 1;\n                            channel.connect(channel.name);\n                        });\n\n                        if (RESUMED && !SUB_RESTORE) {\n                                TIMETOKEN = 0;\n                                RESUMED = false;\n                                // Update Saved Timetoken\n                                db['set']( SUBSCRIBE_KEY, 0 );\n                                timeout( _connect, windowing );\n                                return;\n                        }\n\n                        // Invoke Memory Catchup and Receive Up to 100\n                        // Previous Messages from the Queue.\n                        if (backfill) {\n                            TIMETOKEN = 10000;\n                            backfill  = 0;\n                        }\n\n                        // Update Saved Timetoken\n                        db['set']( SUBSCRIBE_KEY, messages[1] );\n\n                        // Route Channel <---> Callback for Message\n                        var next_callback = (function() {\n                            var channels = (messages.length>2?messages[2]:map(\n                                generate_channel_list(CHANNELS), function(chan) { return map(\n                                    Array(messages[0].length)\n                                    .join(',').split(','),\n                                    function() { return chan; }\n                                ) }).join(','));\n                            var list = channels.split(',');\n\n                            return function() {\n                                var channel = list.shift()||SUB_CHANNEL;\n                                return [\n                                    (CHANNELS[channel]||{})\n                                    .callback||SUB_CALLBACK,\n                                    channel.split(PRESENCE_SUFFIX)[0]\n                                ];\n                            };\n                        })();\n\n                        var latency = detect_latency(+messages[1]);\n                        each( messages[0], function(msg) {\n                            var next = next_callback();\n                            var decrypted_msg = decrypt(msg,CHANNELS[next[1]]['cipher_key']);\n                            next[0]( decrypted_msg, messages, next[1], latency);\n                        });\n\n                        timeout( _connect, windowing );\n                    }\n                });\n            }\n\n            CONNECT = function() {\n                _reset_offline();\n                timeout( _connect, windowing );\n            };\n\n            // Reduce Status Flicker\n            if (!READY) return READY_BUFFER.push(CONNECT);\n\n            // Connect Now\n            CONNECT();\n        },\n\n        /*\n            PUBNUB.here_now({ channel : 'my_chat', callback : fun });\n        */\n        'here_now' : function( args, callback ) {\n            var callback = args['callback'] || callback\n            ,   err      = args['error']    || function(){}\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   channel  = args['channel']\n            ,   jsonp    = jsonp_cb()\n            ,   uuids    = ('uuids' in args) ? args['uuids'] : true\n            ,   state    = args['state']\n            ,   data     = { 'uuid' : UUID, 'auth' : auth_key };\n\n            if (!uuids) data['disable_uuids'] = 1;\n            if (state) data['state'] = 1;\n\n            // Make sure we have a Channel\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            var url = [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub_key', SUBSCRIBE_KEY\n                ];\n\n            channel && url.push('channel') && url.push(encode(channel));\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n\n            xdr({\n                callback : jsonp,\n                data     : data,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : url\n            });\n        },\n\n        /*\n            PUBNUB.current_channels_by_uuid({ channel : 'my_chat', callback : fun });\n        */\n        'where_now' : function( args, callback ) {\n            var callback = args['callback'] || callback\n            ,   err      = args['error']    || function(){}\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   jsonp    = jsonp_cb()\n            ,   uuid     = args['uuid']     || UUID\n            ,   data     = { 'auth' : auth_key };\n\n            // Make sure we have a Channel\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n\n            xdr({\n                callback : jsonp,\n                data     : data,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub_key', SUBSCRIBE_KEY,\n                    'uuid', encode(uuid)\n                ]\n            });\n        },\n\n        'state' : function(args, callback) {\n            var callback = args['callback'] || callback || function(r) {}\n            ,   err      = args['error']    || function(){}\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   jsonp    = jsonp_cb()\n            ,   state    = args['state']\n            ,   uuid     = args['uuid'] || UUID\n            ,   channel  = args['channel']\n            ,   url\n            ,   data     = { 'auth' : auth_key };\n\n            // Make sure we have a Channel\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n            if (!uuid) return error('Missing UUID');\n            if (!channel) return error('Missing Channel');\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n\n            if (CHANNELS[channel] && CHANNELS[channel].subscribed) STATE[channel] = state;\n\n            data['state'] = JSON.stringify(state);\n\n            if (state) {\n                url      = [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub-key', SUBSCRIBE_KEY,\n                    'channel', encode(channel),\n                    'uuid', uuid, 'data'\n                ]\n            } else {\n                url      = [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub-key', SUBSCRIBE_KEY,\n                    'channel', encode(channel),\n                    'uuid', encode(uuid)\n                ]\n            }\n\n            xdr({\n                callback : jsonp,\n                data     : data,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : url\n\n            });\n\n        },\n\n        /*\n            PUBNUB.grant({\n                channel  : 'my_chat',\n                callback : fun,\n                error    : fun,\n                ttl      : 24 * 60, // Minutes\n                read     : true,\n                write    : true,\n                auth_key : '3y8uiajdklytowsj'\n            });\n        */\n        'grant' : function( args, callback ) {\n            var callback = args['callback'] || callback\n            ,   err      = args['error']    || function(){}\n            ,   channel  = args['channel']\n            ,   jsonp    = jsonp_cb()\n            ,   ttl      = args['ttl']\n            ,   r        = (args['read'] )?\"1\":\"0\"\n            ,   w        = (args['write'])?\"1\":\"0\"\n            ,   auth_key = args['auth_key'];\n\n            // Make sure we have a Channel\n            if (!channel)       return error('Missing Channel');\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SECRET_KEY)    return error('Missing Secret Key');\n\n            var timestamp  = Math.floor(new Date().getTime() / 1000)\n            ,   sign_input = SUBSCRIBE_KEY + \"\\n\" + PUBLISH_KEY + \"\\n\"\n                    + \"grant\" + \"\\n\";\n\n\n            if (auth_key)  sign_input += (\"auth=\" + encode(auth_key) + \"&\");\n            if (jsonp != '0')   sign_input += (\"callback=\" + encode(jsonp) + \"&\") ;\n            if (channel)   sign_input += (\"channel=\" + encode(channel) + \"&\") ;\n\n            sign_input += \"pnsdk=\" + encode(PNSDK) + \"&\"\n                    + \"r=\" + r + \"&\"\n                    + \"timestamp=\" + encode(timestamp);\n                    \n            if (ttl || ttl === 0) sign_input += \"&\" + \"ttl=\" + ttl;\n\n            sign_input += \"&\" + \"w=\" + w;\n            var signature = hmac_SHA256( sign_input, SECRET_KEY );\n\n            signature = signature.replace( /\\+/g, \"-\" );\n            signature = signature.replace( /\\//g, \"_\" );\n\n            var data = {\n                'w'         : w,\n                'r'         : r,\n                'signature' : signature,\n                'channel'   : channel,\n                'timestamp' : timestamp\n            };\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n            if (ttl || ttl === 0) data['ttl'] = ttl;\n            if (auth_key) data['auth'] = auth_key;\n\n            xdr({\n                callback : jsonp,\n                data     : data,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v1', 'auth', 'grant' ,\n                    'sub-key', SUBSCRIBE_KEY\n                ]\n            });\n        },\n\n        /*\n            PUBNUB.audit({\n                channel  : 'my_chat',\n                callback : fun,\n                error    : fun,\n                read     : true,\n                write    : true,\n                auth_key : '3y8uiajdklytowsj'\n            });\n        */\n        'audit' : function( args, callback ) {\n            var callback = args['callback'] || callback\n            ,   err      = args['error']    || function(){}\n            ,   channel  = args['channel']\n            ,   auth_key = args['auth_key']\n            ,   jsonp    = jsonp_cb();\n\n            // Make sure we have a Channel\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SECRET_KEY)    return error('Missing Secret Key');\n\n            var timestamp  = Math.floor(new Date().getTime() / 1000)\n            ,   sign_input = SUBSCRIBE_KEY + \"\\n\"\n                + PUBLISH_KEY + \"\\n\"\n                + \"audit\" + \"\\n\";\n\n            if (auth_key)  sign_input += (\"auth=\" + encode(auth_key) + \"&\");\n            if (jsonp != '0')   sign_input += (\"callback=\" + encode(jsonp) + \"&\") ;\n            if (channel)   sign_input += (\"channel=\" + encode(channel) + \"&\") ;\n\n            sign_input += \"pnsdk=\" + encode(PNSDK) + \"&\" + \"timestamp=\" + timestamp;\n\n            var signature = hmac_SHA256( sign_input, SECRET_KEY );\n\n            signature = signature.replace( /\\+/g, \"-\" );\n            signature = signature.replace( /\\//g, \"_\" );\n\n            var data = { 'signature' : signature, 'timestamp' : timestamp };\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n            if (channel)  data['channel'] = channel;\n            if (auth_key) data['auth']    = auth_key;\n\n            xdr({\n                callback : jsonp,\n                data     : data,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v1', 'auth', 'audit' ,\n                    'sub-key', SUBSCRIBE_KEY\n                ]\n            });\n        },\n\n        /*\n            PUBNUB.revoke({\n                channel  : 'my_chat',\n                callback : fun,\n                error    : fun,\n                auth_key : '3y8uiajdklytowsj'\n            });\n        */\n        'revoke' : function( args, callback ) {\n            args['read']  = false;\n            args['write'] = false;\n            SELF['grant']( args, callback );\n        },\n        'set_uuid' : function(uuid) {\n            UUID = uuid;\n            CONNECT();\n        },\n        'get_uuid' : function() {\n            return UUID;\n        },\n        'presence_heartbeat' : function(args) {\n            var callback = args['callback'] || function() {}\n            var err      = args['error']    || function() {}\n            var jsonp    = jsonp_cb();\n            var data     = { 'uuid' : UUID, 'auth' : AUTH_KEY };\n\n            var st = JSON['stringify'](STATE);\n            if (st.length > 2) data['state'] = JSON['stringify'](STATE);\n\n            if (PRESENCE_HB > 0 && PRESENCE_HB < 320) data['heartbeat'] = PRESENCE_HB;\n\n            xdr({\n                callback : jsonp,\n                data     : data,\n                timeout  : SECOND * 5,\n                url      : [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub-key', SUBSCRIBE_KEY,\n                    'channel' , encode(generate_channel_list(CHANNELS, true)['join'](',')),\n                    'heartbeat'\n                ],\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) { _invoke_error(response, err); }\n            });\n        },\n\n        // Expose PUBNUB Functions\n        'xdr'           : xdr,\n        'ready'         : ready,\n        'db'            : db,\n        'uuid'          : uuid,\n        'map'           : map,\n        'each'          : each,\n        'each-channel'  : each_channel,\n        'grep'          : grep,\n        'offline'       : function(){_reset_offline(1, { \"message\":\"Offline. Please check your network settings.\" })},\n        'supplant'      : supplant,\n        'now'           : rnow,\n        'unique'        : unique,\n        'updater'       : updater\n    };\n\n    function _poll_online() {\n        _is_online() || _reset_offline( 1, {\n            \"error\" : \"Offline. Please check your network settings. \"\n        });\n        timeout( _poll_online, SECOND );\n    }\n\n    function _poll_online2() {\n        SELF['time'](function(success){\n            detect_time_detla( function(){}, success );\n            success || _reset_offline( 1, {\n                \"error\" : \"Heartbeat failed to connect to Pubnub Servers.\" +\n                    \"Please check your network settings.\"\n                });\n            timeout( _poll_online2, KEEPALIVE );\n        });\n    }\n\n    function _reset_offline(err, msg) {\n        SUB_RECEIVER && SUB_RECEIVER(err, msg);\n        SUB_RECEIVER = null;\n    }\n\n    if (!UUID) UUID = SELF['uuid']();\n    db['set']( SUBSCRIBE_KEY + 'uuid', UUID );\n\n    timeout( _poll_online,  SECOND    );\n    timeout( _poll_online2, KEEPALIVE );\n    PRESENCE_HB_TIMEOUT = timeout( start_presence_heartbeat, ( PRESENCE_HB_INTERVAL - 3 ) * SECOND ) ;\n\n    // Detect Age of Message\n    function detect_latency(tt) {\n        var adjusted_time = rnow() - TIME_DRIFT;\n        return adjusted_time - tt / 10000;\n    }\n\n    detect_time_detla();\n    function detect_time_detla( cb, time ) {\n        var stime = rnow();\n\n        time && calculate(time) || SELF['time'](calculate);\n\n        function calculate(time) {\n            if (!time) return;\n            var ptime   = time / 10000\n            ,   latency = (rnow() - stime) / 2;\n            TIME_DRIFT = rnow() - (ptime + latency);\n            cb && cb(TIME_DRIFT);\n        }\n    }\n\n    return SELF;\n}\n\nvar CRYPTO = (function(){\n    var Nr = 14,\n    /* Default to 256 Bit Encryption */\n    Nk = 8,\n    Decrypt = false,\n\n    enc_utf8 = function(s)\n    {\n        try {\n            return unescape(encodeURIComponent(s));\n        }\n        catch(e) {\n            throw 'Error on UTF-8 encode';\n        }\n    },\n\n    dec_utf8 = function(s)\n    {\n        try {\n            return decodeURIComponent(escape(s));\n        }\n        catch(e) {\n            throw ('Bad Key');\n        }\n    },\n\n    padBlock = function(byteArr)\n    {\n        var array = [], cpad, i;\n        if (byteArr.length < 16) {\n            cpad = 16 - byteArr.length;\n            array = [cpad, cpad, cpad, cpad, cpad, cpad, cpad, cpad, cpad, cpad, cpad, cpad, cpad, cpad, cpad, cpad];\n        }\n        for (i = 0; i < byteArr.length; i++)\n        {\n            array[i] = byteArr[i];\n        }\n        return array;\n    },\n\n    block2s = function(block, lastBlock)\n    {\n        var string = '', padding, i;\n        if (lastBlock) {\n            padding = block[15];\n            if (padding > 16) {\n                throw ('Decryption error: Maybe bad key');\n            }\n            if (padding == 16) {\n                return '';\n            }\n            for (i = 0; i < 16 - padding; i++) {\n                string += String.fromCharCode(block[i]);\n            }\n        } else {\n            for (i = 0; i < 16; i++) {\n                string += String.fromCharCode(block[i]);\n            }\n        }\n        return string;\n    },\n\n    a2h = function(numArr)\n    {\n        var string = '', i;\n        for (i = 0; i < numArr.length; i++) {\n            string += (numArr[i] < 16 ? '0': '') + numArr[i].toString(16);\n        }\n        return string;\n    },\n\n    h2a = function(s)\n    {\n        var ret = [];\n        s.replace(/(..)/g,\n        function(s) {\n            ret.push(parseInt(s, 16));\n        });\n        return ret;\n    },\n\n    s2a = function(string, binary) {\n        var array = [], i;\n\n        if (! binary) {\n            string = enc_utf8(string);\n        }\n\n        for (i = 0; i < string.length; i++)\n        {\n            array[i] = string.charCodeAt(i);\n        }\n\n        return array;\n    },\n\n    size = function(newsize)\n    {\n        switch (newsize)\n        {\n        case 128:\n            Nr = 10;\n            Nk = 4;\n            break;\n        case 192:\n            Nr = 12;\n            Nk = 6;\n            break;\n        case 256:\n            Nr = 14;\n            Nk = 8;\n            break;\n        default:\n            throw ('Invalid Key Size Specified:' + newsize);\n        }\n    },\n\n    randArr = function(num) {\n        var result = [], i;\n        for (i = 0; i < num; i++) {\n            result = result.concat(Math.floor(Math.random() * 256));\n        }\n        return result;\n    },\n\n    openSSLKey = function(passwordArr, saltArr) {\n        // Number of rounds depends on the size of the AES in use\n        // 3 rounds for 256\n        //        2 rounds for the key, 1 for the IV\n        // 2 rounds for 128\n        //        1 round for the key, 1 round for the IV\n        // 3 rounds for 192 since it's not evenly divided by 128 bits\n        var rounds = Nr >= 12 ? 3: 2,\n        key = [],\n        iv = [],\n        md5_hash = [],\n        result = [],\n        data00 = passwordArr.concat(saltArr),\n        i;\n        md5_hash[0] = GibberishAES.Hash.MD5(data00);\n        result = md5_hash[0];\n        for (i = 1; i < rounds; i++) {\n            md5_hash[i] = GibberishAES.Hash.MD5(md5_hash[i - 1].concat(data00));\n            result = result.concat(md5_hash[i]);\n        }\n        key = result.slice(0, 4 * Nk);\n        iv = result.slice(4 * Nk, 4 * Nk + 16);\n        return {\n            key: key,\n            iv: iv\n        };\n    },\n\n    rawEncrypt = function(plaintext, key, iv) {\n        // plaintext, key and iv as byte arrays\n        key = expandKey(key);\n        var numBlocks = Math.ceil(plaintext.length / 16),\n        blocks = [],\n        i,\n        cipherBlocks = [];\n        for (i = 0; i < numBlocks; i++) {\n            blocks[i] = padBlock(plaintext.slice(i * 16, i * 16 + 16));\n        }\n        if (plaintext.length % 16 === 0) {\n            blocks.push([16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16]);\n            // CBC OpenSSL padding scheme\n            numBlocks++;\n        }\n        for (i = 0; i < blocks.length; i++) {\n            blocks[i] = (i === 0) ? xorBlocks(blocks[i], iv) : xorBlocks(blocks[i], cipherBlocks[i - 1]);\n            cipherBlocks[i] = encryptBlock(blocks[i], key);\n        }\n        return cipherBlocks;\n    },\n\n    rawDecrypt = function(cryptArr, key, iv, binary) {\n        //  cryptArr, key and iv as byte arrays\n        key = expandKey(key);\n        var numBlocks = cryptArr.length / 16,\n        cipherBlocks = [],\n        i,\n        plainBlocks = [],\n        string = '';\n        for (i = 0; i < numBlocks; i++) {\n            cipherBlocks.push(cryptArr.slice(i * 16, (i + 1) * 16));\n        }\n        for (i = cipherBlocks.length - 1; i >= 0; i--) {\n            plainBlocks[i] = decryptBlock(cipherBlocks[i], key);\n            plainBlocks[i] = (i === 0) ? xorBlocks(plainBlocks[i], iv) : xorBlocks(plainBlocks[i], cipherBlocks[i - 1]);\n        }\n        for (i = 0; i < numBlocks - 1; i++) {\n            string += block2s(plainBlocks[i]);\n        }\n        string += block2s(plainBlocks[i], true);\n        return binary ? string : dec_utf8(string);\n    },\n\n    encryptBlock = function(block, words) {\n        Decrypt = false;\n        var state = addRoundKey(block, words, 0),\n        round;\n        for (round = 1; round < (Nr + 1); round++) {\n            state = subBytes(state);\n            state = shiftRows(state);\n            if (round < Nr) {\n                state = mixColumns(state);\n            }\n            //last round? don't mixColumns\n            state = addRoundKey(state, words, round);\n        }\n\n        return state;\n    },\n\n    decryptBlock = function(block, words) {\n        Decrypt = true;\n        var state = addRoundKey(block, words, Nr),\n        round;\n        for (round = Nr - 1; round > -1; round--) {\n            state = shiftRows(state);\n            state = subBytes(state);\n            state = addRoundKey(state, words, round);\n            if (round > 0) {\n                state = mixColumns(state);\n            }\n            //last round? don't mixColumns\n        }\n\n        return state;\n    },\n\n    subBytes = function(state) {\n        var S = Decrypt ? SBoxInv: SBox,\n        temp = [],\n        i;\n        for (i = 0; i < 16; i++) {\n            temp[i] = S[state[i]];\n        }\n        return temp;\n    },\n\n    shiftRows = function(state) {\n        var temp = [],\n        shiftBy = Decrypt ? [0, 13, 10, 7, 4, 1, 14, 11, 8, 5, 2, 15, 12, 9, 6, 3] : [0, 5, 10, 15, 4, 9, 14, 3, 8, 13, 2, 7, 12, 1, 6, 11],\n        i;\n        for (i = 0; i < 16; i++) {\n            temp[i] = state[shiftBy[i]];\n        }\n        return temp;\n    },\n\n    mixColumns = function(state) {\n        var t = [],\n        c;\n        if (!Decrypt) {\n            for (c = 0; c < 4; c++) {\n                t[c * 4] = G2X[state[c * 4]] ^ G3X[state[1 + c * 4]] ^ state[2 + c * 4] ^ state[3 + c * 4];\n                t[1 + c * 4] = state[c * 4] ^ G2X[state[1 + c * 4]] ^ G3X[state[2 + c * 4]] ^ state[3 + c * 4];\n                t[2 + c * 4] = state[c * 4] ^ state[1 + c * 4] ^ G2X[state[2 + c * 4]] ^ G3X[state[3 + c * 4]];\n                t[3 + c * 4] = G3X[state[c * 4]] ^ state[1 + c * 4] ^ state[2 + c * 4] ^ G2X[state[3 + c * 4]];\n            }\n        }else {\n            for (c = 0; c < 4; c++) {\n                t[c*4] = GEX[state[c*4]] ^ GBX[state[1+c*4]] ^ GDX[state[2+c*4]] ^ G9X[state[3+c*4]];\n                t[1+c*4] = G9X[state[c*4]] ^ GEX[state[1+c*4]] ^ GBX[state[2+c*4]] ^ GDX[state[3+c*4]];\n                t[2+c*4] = GDX[state[c*4]] ^ G9X[state[1+c*4]] ^ GEX[state[2+c*4]] ^ GBX[state[3+c*4]];\n                t[3+c*4] = GBX[state[c*4]] ^ GDX[state[1+c*4]] ^ G9X[state[2+c*4]] ^ GEX[state[3+c*4]];\n            }\n        }\n\n        return t;\n    },\n\n    addRoundKey = function(state, words, round) {\n        var temp = [],\n        i;\n        for (i = 0; i < 16; i++) {\n            temp[i] = state[i] ^ words[round][i];\n        }\n        return temp;\n    },\n\n    xorBlocks = function(block1, block2) {\n        var temp = [],\n        i;\n        for (i = 0; i < 16; i++) {\n            temp[i] = block1[i] ^ block2[i];\n        }\n        return temp;\n    },\n\n    expandKey = function(key) {\n        // Expects a 1d number array\n        var w = [],\n        temp = [],\n        i,\n        r,\n        t,\n        flat = [],\n        j;\n\n        for (i = 0; i < Nk; i++) {\n            r = [key[4 * i], key[4 * i + 1], key[4 * i + 2], key[4 * i + 3]];\n            w[i] = r;\n        }\n\n        for (i = Nk; i < (4 * (Nr + 1)); i++) {\n            w[i] = [];\n            for (t = 0; t < 4; t++) {\n                temp[t] = w[i - 1][t];\n            }\n            if (i % Nk === 0) {\n                temp = subWord(rotWord(temp));\n                temp[0] ^= Rcon[i / Nk - 1];\n            } else if (Nk > 6 && i % Nk == 4) {\n                temp = subWord(temp);\n            }\n            for (t = 0; t < 4; t++) {\n                w[i][t] = w[i - Nk][t] ^ temp[t];\n            }\n        }\n        for (i = 0; i < (Nr + 1); i++) {\n            flat[i] = [];\n            for (j = 0; j < 4; j++) {\n                flat[i].push(w[i * 4 + j][0], w[i * 4 + j][1], w[i * 4 + j][2], w[i * 4 + j][3]);\n            }\n        }\n        return flat;\n    },\n\n    subWord = function(w) {\n        // apply SBox to 4-byte word w\n        for (var i = 0; i < 4; i++) {\n            w[i] = SBox[w[i]];\n        }\n        return w;\n    },\n\n    rotWord = function(w) {\n        // rotate 4-byte word w left by one byte\n        var tmp = w[0],\n        i;\n        for (i = 0; i < 4; i++) {\n            w[i] = w[i + 1];\n        }\n        w[3] = tmp;\n        return w;\n    },\n\n// jlcooke: 2012-07-12: added strhex + invertArr to compress G2X/G3X/G9X/GBX/GEX/SBox/SBoxInv/Rcon saving over 7KB, and added encString, decString\n    strhex = function(str,size) {\n        var ret = [];\n        for (i=0; i<str.length; i+=size)\n            ret[i/size] = parseInt(str.substr(i,size), 16);\n        return ret;\n    },\n    invertArr = function(arr) {\n        var ret = [];\n        for (i=0; i<arr.length; i++)\n            ret[arr[i]] = i;\n        return ret;\n    },\n    Gxx = function(a, b) {\n        var i, ret;\n\n        ret = 0;\n        for (i=0; i<8; i++) {\n            ret = ((b&1)==1) ? ret^a : ret;\n            /* xmult */\n            a = (a>0x7f) ? 0x11b^(a<<1) : (a<<1);\n            b >>>= 1;\n        }\n\n        return ret;\n    },\n    Gx = function(x) {\n        var r = [];\n        for (var i=0; i<256; i++)\n            r[i] = Gxx(x, i);\n        return r;\n    },\n\n    // S-box\n/*\n    SBox = [\n    99, 124, 119, 123, 242, 107, 111, 197, 48, 1, 103, 43, 254, 215, 171,\n    118, 202, 130, 201, 125, 250, 89, 71, 240, 173, 212, 162, 175, 156, 164,\n    114, 192, 183, 253, 147, 38, 54, 63, 247, 204, 52, 165, 229, 241, 113,\n    216, 49, 21, 4, 199, 35, 195, 24, 150, 5, 154, 7, 18, 128, 226,\n    235, 39, 178, 117, 9, 131, 44, 26, 27, 110, 90, 160, 82, 59, 214,\n    179, 41, 227, 47, 132, 83, 209, 0, 237, 32, 252, 177, 91, 106, 203,\n    190, 57, 74, 76, 88, 207, 208, 239, 170, 251, 67, 77, 51, 133, 69,\n    249, 2, 127, 80, 60, 159, 168, 81, 163, 64, 143, 146, 157, 56, 245,\n    188, 182, 218, 33, 16, 255, 243, 210, 205, 12, 19, 236, 95, 151, 68,\n    23, 196, 167, 126, 61, 100, 93, 25, 115, 96, 129, 79, 220, 34, 42,\n    144, 136, 70, 238, 184, 20, 222, 94, 11, 219, 224, 50, 58, 10, 73,\n    6, 36, 92, 194, 211, 172, 98, 145, 149, 228, 121, 231, 200, 55, 109,\n    141, 213, 78, 169, 108, 86, 244, 234, 101, 122, 174, 8, 186, 120, 37,\n    46, 28, 166, 180, 198, 232, 221, 116, 31, 75, 189, 139, 138, 112, 62,\n    181, 102, 72, 3, 246, 14, 97, 53, 87, 185, 134, 193, 29, 158, 225,\n    248, 152, 17, 105, 217, 142, 148, 155, 30, 135, 233, 206, 85, 40, 223,\n    140, 161, 137, 13, 191, 230, 66, 104, 65, 153, 45, 15, 176, 84, 187,\n    22], //*/ SBox = strhex('637c777bf26b6fc53001672bfed7ab76ca82c97dfa5947f0add4a2af9ca472c0b7fd9326363ff7cc34a5e5f171d8311504c723c31896059a071280e2eb27b27509832c1a1b6e5aa0523bd6b329e32f8453d100ed20fcb15b6acbbe394a4c58cfd0efaafb434d338545f9027f503c9fa851a3408f929d38f5bcb6da2110fff3d2cd0c13ec5f974417c4a77e3d645d197360814fdc222a908846eeb814de5e0bdbe0323a0a4906245cc2d3ac629195e479e7c8376d8dd54ea96c56f4ea657aae08ba78252e1ca6b4c6e8dd741f4bbd8b8a703eb5664803f60e613557b986c11d9ee1f8981169d98e949b1e87e9ce5528df8ca1890dbfe6426841992d0fb054bb16',2),\n\n    // Precomputed lookup table for the inverse SBox\n/*    SBoxInv = [\n    82, 9, 106, 213, 48, 54, 165, 56, 191, 64, 163, 158, 129, 243, 215,\n    251, 124, 227, 57, 130, 155, 47, 255, 135, 52, 142, 67, 68, 196, 222,\n    233, 203, 84, 123, 148, 50, 166, 194, 35, 61, 238, 76, 149, 11, 66,\n    250, 195, 78, 8, 46, 161, 102, 40, 217, 36, 178, 118, 91, 162, 73,\n    109, 139, 209, 37, 114, 248, 246, 100, 134, 104, 152, 22, 212, 164, 92,\n    204, 93, 101, 182, 146, 108, 112, 72, 80, 253, 237, 185, 218, 94, 21,\n    70, 87, 167, 141, 157, 132, 144, 216, 171, 0, 140, 188, 211, 10, 247,\n    228, 88, 5, 184, 179, 69, 6, 208, 44, 30, 143, 202, 63, 15, 2,\n    193, 175, 189, 3, 1, 19, 138, 107, 58, 145, 17, 65, 79, 103, 220,\n    234, 151, 242, 207, 206, 240, 180, 230, 115, 150, 172, 116, 34, 231, 173,\n    53, 133, 226, 249, 55, 232, 28, 117, 223, 110, 71, 241, 26, 113, 29,\n    41, 197, 137, 111, 183, 98, 14, 170, 24, 190, 27, 252, 86, 62, 75,\n    198, 210, 121, 32, 154, 219, 192, 254, 120, 205, 90, 244, 31, 221, 168,\n    51, 136, 7, 199, 49, 177, 18, 16, 89, 39, 128, 236, 95, 96, 81,\n    127, 169, 25, 181, 74, 13, 45, 229, 122, 159, 147, 201, 156, 239, 160,\n    224, 59, 77, 174, 42, 245, 176, 200, 235, 187, 60, 131, 83, 153, 97,\n    23, 43, 4, 126, 186, 119, 214, 38, 225, 105, 20, 99, 85, 33, 12,\n    125], //*/ SBoxInv = invertArr(SBox),\n\n    // Rijndael Rcon\n/*\n    Rcon = [1, 2, 4, 8, 16, 32, 64, 128, 27, 54, 108, 216, 171, 77, 154, 47, 94,\n    188, 99, 198, 151, 53, 106, 212, 179, 125, 250, 239, 197, 145],\n//*/ Rcon = strhex('01020408102040801b366cd8ab4d9a2f5ebc63c697356ad4b37dfaefc591',2),\n\n/*\n    G2X = [\n    0x00, 0x02, 0x04, 0x06, 0x08, 0x0a, 0x0c, 0x0e, 0x10, 0x12, 0x14, 0x16,\n    0x18, 0x1a, 0x1c, 0x1e, 0x20, 0x22, 0x24, 0x26, 0x28, 0x2a, 0x2c, 0x2e,\n    0x30, 0x32, 0x34, 0x36, 0x38, 0x3a, 0x3c, 0x3e, 0x40, 0x42, 0x44, 0x46,\n    0x48, 0x4a, 0x4c, 0x4e, 0x50, 0x52, 0x54, 0x56, 0x58, 0x5a, 0x5c, 0x5e,\n    0x60, 0x62, 0x64, 0x66, 0x68, 0x6a, 0x6c, 0x6e, 0x70, 0x72, 0x74, 0x76,\n    0x78, 0x7a, 0x7c, 0x7e, 0x80, 0x82, 0x84, 0x86, 0x88, 0x8a, 0x8c, 0x8e,\n    0x90, 0x92, 0x94, 0x96, 0x98, 0x9a, 0x9c, 0x9e, 0xa0, 0xa2, 0xa4, 0xa6,\n    0xa8, 0xaa, 0xac, 0xae, 0xb0, 0xb2, 0xb4, 0xb6, 0xb8, 0xba, 0xbc, 0xbe,\n    0xc0, 0xc2, 0xc4, 0xc6, 0xc8, 0xca, 0xcc, 0xce, 0xd0, 0xd2, 0xd4, 0xd6,\n    0xd8, 0xda, 0xdc, 0xde, 0xe0, 0xe2, 0xe4, 0xe6, 0xe8, 0xea, 0xec, 0xee,\n    0xf0, 0xf2, 0xf4, 0xf6, 0xf8, 0xfa, 0xfc, 0xfe, 0x1b, 0x19, 0x1f, 0x1d,\n    0x13, 0x11, 0x17, 0x15, 0x0b, 0x09, 0x0f, 0x0d, 0x03, 0x01, 0x07, 0x05,\n    0x3b, 0x39, 0x3f, 0x3d, 0x33, 0x31, 0x37, 0x35, 0x2b, 0x29, 0x2f, 0x2d,\n    0x23, 0x21, 0x27, 0x25, 0x5b, 0x59, 0x5f, 0x5d, 0x53, 0x51, 0x57, 0x55,\n    0x4b, 0x49, 0x4f, 0x4d, 0x43, 0x41, 0x47, 0x45, 0x7b, 0x79, 0x7f, 0x7d,\n    0x73, 0x71, 0x77, 0x75, 0x6b, 0x69, 0x6f, 0x6d, 0x63, 0x61, 0x67, 0x65,\n    0x9b, 0x99, 0x9f, 0x9d, 0x93, 0x91, 0x97, 0x95, 0x8b, 0x89, 0x8f, 0x8d,\n    0x83, 0x81, 0x87, 0x85, 0xbb, 0xb9, 0xbf, 0xbd, 0xb3, 0xb1, 0xb7, 0xb5,\n    0xab, 0xa9, 0xaf, 0xad, 0xa3, 0xa1, 0xa7, 0xa5, 0xdb, 0xd9, 0xdf, 0xdd,\n    0xd3, 0xd1, 0xd7, 0xd5, 0xcb, 0xc9, 0xcf, 0xcd, 0xc3, 0xc1, 0xc7, 0xc5,\n    0xfb, 0xf9, 0xff, 0xfd, 0xf3, 0xf1, 0xf7, 0xf5, 0xeb, 0xe9, 0xef, 0xed,\n    0xe3, 0xe1, 0xe7, 0xe5\n    ], //*/ G2X = Gx(2),\n\n/*    G3X = [\n    0x00, 0x03, 0x06, 0x05, 0x0c, 0x0f, 0x0a, 0x09, 0x18, 0x1b, 0x1e, 0x1d,\n    0x14, 0x17, 0x12, 0x11, 0x30, 0x33, 0x36, 0x35, 0x3c, 0x3f, 0x3a, 0x39,\n    0x28, 0x2b, 0x2e, 0x2d, 0x24, 0x27, 0x22, 0x21, 0x60, 0x63, 0x66, 0x65,\n    0x6c, 0x6f, 0x6a, 0x69, 0x78, 0x7b, 0x7e, 0x7d, 0x74, 0x77, 0x72, 0x71,\n    0x50, 0x53, 0x56, 0x55, 0x5c, 0x5f, 0x5a, 0x59, 0x48, 0x4b, 0x4e, 0x4d,\n    0x44, 0x47, 0x42, 0x41, 0xc0, 0xc3, 0xc6, 0xc5, 0xcc, 0xcf, 0xca, 0xc9,\n    0xd8, 0xdb, 0xde, 0xdd, 0xd4, 0xd7, 0xd2, 0xd1, 0xf0, 0xf3, 0xf6, 0xf5,\n    0xfc, 0xff, 0xfa, 0xf9, 0xe8, 0xeb, 0xee, 0xed, 0xe4, 0xe7, 0xe2, 0xe1,\n    0xa0, 0xa3, 0xa6, 0xa5, 0xac, 0xaf, 0xaa, 0xa9, 0xb8, 0xbb, 0xbe, 0xbd,\n    0xb4, 0xb7, 0xb2, 0xb1, 0x90, 0x93, 0x96, 0x95, 0x9c, 0x9f, 0x9a, 0x99,\n    0x88, 0x8b, 0x8e, 0x8d, 0x84, 0x87, 0x82, 0x81, 0x9b, 0x98, 0x9d, 0x9e,\n    0x97, 0x94, 0x91, 0x92, 0x83, 0x80, 0x85, 0x86, 0x8f, 0x8c, 0x89, 0x8a,\n    0xab, 0xa8, 0xad, 0xae, 0xa7, 0xa4, 0xa1, 0xa2, 0xb3, 0xb0, 0xb5, 0xb6,\n    0xbf, 0xbc, 0xb9, 0xba, 0xfb, 0xf8, 0xfd, 0xfe, 0xf7, 0xf4, 0xf1, 0xf2,\n    0xe3, 0xe0, 0xe5, 0xe6, 0xef, 0xec, 0xe9, 0xea, 0xcb, 0xc8, 0xcd, 0xce,\n    0xc7, 0xc4, 0xc1, 0xc2, 0xd3, 0xd0, 0xd5, 0xd6, 0xdf, 0xdc, 0xd9, 0xda,\n    0x5b, 0x58, 0x5d, 0x5e, 0x57, 0x54, 0x51, 0x52, 0x43, 0x40, 0x45, 0x46,\n    0x4f, 0x4c, 0x49, 0x4a, 0x6b, 0x68, 0x6d, 0x6e, 0x67, 0x64, 0x61, 0x62,\n    0x73, 0x70, 0x75, 0x76, 0x7f, 0x7c, 0x79, 0x7a, 0x3b, 0x38, 0x3d, 0x3e,\n    0x37, 0x34, 0x31, 0x32, 0x23, 0x20, 0x25, 0x26, 0x2f, 0x2c, 0x29, 0x2a,\n    0x0b, 0x08, 0x0d, 0x0e, 0x07, 0x04, 0x01, 0x02, 0x13, 0x10, 0x15, 0x16,\n    0x1f, 0x1c, 0x19, 0x1a\n    ], //*/ G3X = Gx(3),\n\n/*\n    G9X = [\n    0x00, 0x09, 0x12, 0x1b, 0x24, 0x2d, 0x36, 0x3f, 0x48, 0x41, 0x5a, 0x53,\n    0x6c, 0x65, 0x7e, 0x77, 0x90, 0x99, 0x82, 0x8b, 0xb4, 0xbd, 0xa6, 0xaf,\n    0xd8, 0xd1, 0xca, 0xc3, 0xfc, 0xf5, 0xee, 0xe7, 0x3b, 0x32, 0x29, 0x20,\n    0x1f, 0x16, 0x0d, 0x04, 0x73, 0x7a, 0x61, 0x68, 0x57, 0x5e, 0x45, 0x4c,\n    0xab, 0xa2, 0xb9, 0xb0, 0x8f, 0x86, 0x9d, 0x94, 0xe3, 0xea, 0xf1, 0xf8,\n    0xc7, 0xce, 0xd5, 0xdc, 0x76, 0x7f, 0x64, 0x6d, 0x52, 0x5b, 0x40, 0x49,\n    0x3e, 0x37, 0x2c, 0x25, 0x1a, 0x13, 0x08, 0x01, 0xe6, 0xef, 0xf4, 0xfd,\n    0xc2, 0xcb, 0xd0, 0xd9, 0xae, 0xa7, 0xbc, 0xb5, 0x8a, 0x83, 0x98, 0x91,\n    0x4d, 0x44, 0x5f, 0x56, 0x69, 0x60, 0x7b, 0x72, 0x05, 0x0c, 0x17, 0x1e,\n    0x21, 0x28, 0x33, 0x3a, 0xdd, 0xd4, 0xcf, 0xc6, 0xf9, 0xf0, 0xeb, 0xe2,\n    0x95, 0x9c, 0x87, 0x8e, 0xb1, 0xb8, 0xa3, 0xaa, 0xec, 0xe5, 0xfe, 0xf7,\n    0xc8, 0xc1, 0xda, 0xd3, 0xa4, 0xad, 0xb6, 0xbf, 0x80, 0x89, 0x92, 0x9b,\n    0x7c, 0x75, 0x6e, 0x67, 0x58, 0x51, 0x4a, 0x43, 0x34, 0x3d, 0x26, 0x2f,\n    0x10, 0x19, 0x02, 0x0b, 0xd7, 0xde, 0xc5, 0xcc, 0xf3, 0xfa, 0xe1, 0xe8,\n    0x9f, 0x96, 0x8d, 0x84, 0xbb, 0xb2, 0xa9, 0xa0, 0x47, 0x4e, 0x55, 0x5c,\n    0x63, 0x6a, 0x71, 0x78, 0x0f, 0x06, 0x1d, 0x14, 0x2b, 0x22, 0x39, 0x30,\n    0x9a, 0x93, 0x88, 0x81, 0xbe, 0xb7, 0xac, 0xa5, 0xd2, 0xdb, 0xc0, 0xc9,\n    0xf6, 0xff, 0xe4, 0xed, 0x0a, 0x03, 0x18, 0x11, 0x2e, 0x27, 0x3c, 0x35,\n    0x42, 0x4b, 0x50, 0x59, 0x66, 0x6f, 0x74, 0x7d, 0xa1, 0xa8, 0xb3, 0xba,\n    0x85, 0x8c, 0x97, 0x9e, 0xe9, 0xe0, 0xfb, 0xf2, 0xcd, 0xc4, 0xdf, 0xd6,\n    0x31, 0x38, 0x23, 0x2a, 0x15, 0x1c, 0x07, 0x0e, 0x79, 0x70, 0x6b, 0x62,\n    0x5d, 0x54, 0x4f, 0x46\n    ], //*/ G9X = Gx(9),\n\n/*    GBX = [\n    0x00, 0x0b, 0x16, 0x1d, 0x2c, 0x27, 0x3a, 0x31, 0x58, 0x53, 0x4e, 0x45,\n    0x74, 0x7f, 0x62, 0x69, 0xb0, 0xbb, 0xa6, 0xad, 0x9c, 0x97, 0x8a, 0x81,\n    0xe8, 0xe3, 0xfe, 0xf5, 0xc4, 0xcf, 0xd2, 0xd9, 0x7b, 0x70, 0x6d, 0x66,\n    0x57, 0x5c, 0x41, 0x4a, 0x23, 0x28, 0x35, 0x3e, 0x0f, 0x04, 0x19, 0x12,\n    0xcb, 0xc0, 0xdd, 0xd6, 0xe7, 0xec, 0xf1, 0xfa, 0x93, 0x98, 0x85, 0x8e,\n    0xbf, 0xb4, 0xa9, 0xa2, 0xf6, 0xfd, 0xe0, 0xeb, 0xda, 0xd1, 0xcc, 0xc7,\n    0xae, 0xa5, 0xb8, 0xb3, 0x82, 0x89, 0x94, 0x9f, 0x46, 0x4d, 0x50, 0x5b,\n    0x6a, 0x61, 0x7c, 0x77, 0x1e, 0x15, 0x08, 0x03, 0x32, 0x39, 0x24, 0x2f,\n    0x8d, 0x86, 0x9b, 0x90, 0xa1, 0xaa, 0xb7, 0xbc, 0xd5, 0xde, 0xc3, 0xc8,\n    0xf9, 0xf2, 0xef, 0xe4, 0x3d, 0x36, 0x2b, 0x20, 0x11, 0x1a, 0x07, 0x0c,\n    0x65, 0x6e, 0x73, 0x78, 0x49, 0x42, 0x5f, 0x54, 0xf7, 0xfc, 0xe1, 0xea,\n    0xdb, 0xd0, 0xcd, 0xc6, 0xaf, 0xa4, 0xb9, 0xb2, 0x83, 0x88, 0x95, 0x9e,\n    0x47, 0x4c, 0x51, 0x5a, 0x6b, 0x60, 0x7d, 0x76, 0x1f, 0x14, 0x09, 0x02,\n    0x33, 0x38, 0x25, 0x2e, 0x8c, 0x87, 0x9a, 0x91, 0xa0, 0xab, 0xb6, 0xbd,\n    0xd4, 0xdf, 0xc2, 0xc9, 0xf8, 0xf3, 0xee, 0xe5, 0x3c, 0x37, 0x2a, 0x21,\n    0x10, 0x1b, 0x06, 0x0d, 0x64, 0x6f, 0x72, 0x79, 0x48, 0x43, 0x5e, 0x55,\n    0x01, 0x0a, 0x17, 0x1c, 0x2d, 0x26, 0x3b, 0x30, 0x59, 0x52, 0x4f, 0x44,\n    0x75, 0x7e, 0x63, 0x68, 0xb1, 0xba, 0xa7, 0xac, 0x9d, 0x96, 0x8b, 0x80,\n    0xe9, 0xe2, 0xff, 0xf4, 0xc5, 0xce, 0xd3, 0xd8, 0x7a, 0x71, 0x6c, 0x67,\n    0x56, 0x5d, 0x40, 0x4b, 0x22, 0x29, 0x34, 0x3f, 0x0e, 0x05, 0x18, 0x13,\n    0xca, 0xc1, 0xdc, 0xd7, 0xe6, 0xed, 0xf0, 0xfb, 0x92, 0x99, 0x84, 0x8f,\n    0xbe, 0xb5, 0xa8, 0xa3\n    ], //*/ GBX = Gx(0xb),\n\n/*\n    GDX = [\n    0x00, 0x0d, 0x1a, 0x17, 0x34, 0x39, 0x2e, 0x23, 0x68, 0x65, 0x72, 0x7f,\n    0x5c, 0x51, 0x46, 0x4b, 0xd0, 0xdd, 0xca, 0xc7, 0xe4, 0xe9, 0xfe, 0xf3,\n    0xb8, 0xb5, 0xa2, 0xaf, 0x8c, 0x81, 0x96, 0x9b, 0xbb, 0xb6, 0xa1, 0xac,\n    0x8f, 0x82, 0x95, 0x98, 0xd3, 0xde, 0xc9, 0xc4, 0xe7, 0xea, 0xfd, 0xf0,\n    0x6b, 0x66, 0x71, 0x7c, 0x5f, 0x52, 0x45, 0x48, 0x03, 0x0e, 0x19, 0x14,\n    0x37, 0x3a, 0x2d, 0x20, 0x6d, 0x60, 0x77, 0x7a, 0x59, 0x54, 0x43, 0x4e,\n    0x05, 0x08, 0x1f, 0x12, 0x31, 0x3c, 0x2b, 0x26, 0xbd, 0xb0, 0xa7, 0xaa,\n    0x89, 0x84, 0x93, 0x9e, 0xd5, 0xd8, 0xcf, 0xc2, 0xe1, 0xec, 0xfb, 0xf6,\n    0xd6, 0xdb, 0xcc, 0xc1, 0xe2, 0xef, 0xf8, 0xf5, 0xbe, 0xb3, 0xa4, 0xa9,\n    0x8a, 0x87, 0x90, 0x9d, 0x06, 0x0b, 0x1c, 0x11, 0x32, 0x3f, 0x28, 0x25,\n    0x6e, 0x63, 0x74, 0x79, 0x5a, 0x57, 0x40, 0x4d, 0xda, 0xd7, 0xc0, 0xcd,\n    0xee, 0xe3, 0xf4, 0xf9, 0xb2, 0xbf, 0xa8, 0xa5, 0x86, 0x8b, 0x9c, 0x91,\n    0x0a, 0x07, 0x10, 0x1d, 0x3e, 0x33, 0x24, 0x29, 0x62, 0x6f, 0x78, 0x75,\n    0x56, 0x5b, 0x4c, 0x41, 0x61, 0x6c, 0x7b, 0x76, 0x55, 0x58, 0x4f, 0x42,\n    0x09, 0x04, 0x13, 0x1e, 0x3d, 0x30, 0x27, 0x2a, 0xb1, 0xbc, 0xab, 0xa6,\n    0x85, 0x88, 0x9f, 0x92, 0xd9, 0xd4, 0xc3, 0xce, 0xed, 0xe0, 0xf7, 0xfa,\n    0xb7, 0xba, 0xad, 0xa0, 0x83, 0x8e, 0x99, 0x94, 0xdf, 0xd2, 0xc5, 0xc8,\n    0xeb, 0xe6, 0xf1, 0xfc, 0x67, 0x6a, 0x7d, 0x70, 0x53, 0x5e, 0x49, 0x44,\n    0x0f, 0x02, 0x15, 0x18, 0x3b, 0x36, 0x21, 0x2c, 0x0c, 0x01, 0x16, 0x1b,\n    0x38, 0x35, 0x22, 0x2f, 0x64, 0x69, 0x7e, 0x73, 0x50, 0x5d, 0x4a, 0x47,\n    0xdc, 0xd1, 0xc6, 0xcb, 0xe8, 0xe5, 0xf2, 0xff, 0xb4, 0xb9, 0xae, 0xa3,\n    0x80, 0x8d, 0x9a, 0x97\n    ], //*/ GDX = Gx(0xd),\n\n/*\n    GEX = [\n    0x00, 0x0e, 0x1c, 0x12, 0x38, 0x36, 0x24, 0x2a, 0x70, 0x7e, 0x6c, 0x62,\n    0x48, 0x46, 0x54, 0x5a, 0xe0, 0xee, 0xfc, 0xf2, 0xd8, 0xd6, 0xc4, 0xca,\n    0x90, 0x9e, 0x8c, 0x82, 0xa8, 0xa6, 0xb4, 0xba, 0xdb, 0xd5, 0xc7, 0xc9,\n    0xe3, 0xed, 0xff, 0xf1, 0xab, 0xa5, 0xb7, 0xb9, 0x93, 0x9d, 0x8f, 0x81,\n    0x3b, 0x35, 0x27, 0x29, 0x03, 0x0d, 0x1f, 0x11, 0x4b, 0x45, 0x57, 0x59,\n    0x73, 0x7d, 0x6f, 0x61, 0xad, 0xa3, 0xb1, 0xbf, 0x95, 0x9b, 0x89, 0x87,\n    0xdd, 0xd3, 0xc1, 0xcf, 0xe5, 0xeb, 0xf9, 0xf7, 0x4d, 0x43, 0x51, 0x5f,\n    0x75, 0x7b, 0x69, 0x67, 0x3d, 0x33, 0x21, 0x2f, 0x05, 0x0b, 0x19, 0x17,\n    0x76, 0x78, 0x6a, 0x64, 0x4e, 0x40, 0x52, 0x5c, 0x06, 0x08, 0x1a, 0x14,\n    0x3e, 0x30, 0x22, 0x2c, 0x96, 0x98, 0x8a, 0x84, 0xae, 0xa0, 0xb2, 0xbc,\n    0xe6, 0xe8, 0xfa, 0xf4, 0xde, 0xd0, 0xc2, 0xcc, 0x41, 0x4f, 0x5d, 0x53,\n    0x79, 0x77, 0x65, 0x6b, 0x31, 0x3f, 0x2d, 0x23, 0x09, 0x07, 0x15, 0x1b,\n    0xa1, 0xaf, 0xbd, 0xb3, 0x99, 0x97, 0x85, 0x8b, 0xd1, 0xdf, 0xcd, 0xc3,\n    0xe9, 0xe7, 0xf5, 0xfb, 0x9a, 0x94, 0x86, 0x88, 0xa2, 0xac, 0xbe, 0xb0,\n    0xea, 0xe4, 0xf6, 0xf8, 0xd2, 0xdc, 0xce, 0xc0, 0x7a, 0x74, 0x66, 0x68,\n    0x42, 0x4c, 0x5e, 0x50, 0x0a, 0x04, 0x16, 0x18, 0x32, 0x3c, 0x2e, 0x20,\n    0xec, 0xe2, 0xf0, 0xfe, 0xd4, 0xda, 0xc8, 0xc6, 0x9c, 0x92, 0x80, 0x8e,\n    0xa4, 0xaa, 0xb8, 0xb6, 0x0c, 0x02, 0x10, 0x1e, 0x34, 0x3a, 0x28, 0x26,\n    0x7c, 0x72, 0x60, 0x6e, 0x44, 0x4a, 0x58, 0x56, 0x37, 0x39, 0x2b, 0x25,\n    0x0f, 0x01, 0x13, 0x1d, 0x47, 0x49, 0x5b, 0x55, 0x7f, 0x71, 0x63, 0x6d,\n    0xd7, 0xd9, 0xcb, 0xc5, 0xef, 0xe1, 0xf3, 0xfd, 0xa7, 0xa9, 0xbb, 0xb5,\n    0x9f, 0x91, 0x83, 0x8d\n    ], //*/ GEX = Gx(0xe),\n\n    enc = function(string, pass, binary) {\n        // string, password in plaintext\n        var salt = randArr(8),\n        pbe = openSSLKey(s2a(pass, binary), salt),\n        key = pbe.key,\n        iv = pbe.iv,\n        cipherBlocks,\n        saltBlock = [[83, 97, 108, 116, 101, 100, 95, 95].concat(salt)];\n        string = s2a(string, binary);\n        cipherBlocks = rawEncrypt(string, key, iv);\n        // Spells out 'Salted__'\n        cipherBlocks = saltBlock.concat(cipherBlocks);\n        return Base64.encode(cipherBlocks);\n    },\n\n    dec = function(string, pass, binary) {\n        // string, password in plaintext\n        var cryptArr = Base64.decode(string),\n        salt = cryptArr.slice(8, 16),\n        pbe = openSSLKey(s2a(pass, binary), salt),\n        key = pbe.key,\n        iv = pbe.iv;\n        cryptArr = cryptArr.slice(16, cryptArr.length);\n        // Take off the Salted__ffeeddcc\n        string = rawDecrypt(cryptArr, key, iv, binary);\n        return string;\n    },\n\n    MD5 = function(numArr) {\n\n        function rotateLeft(lValue, iShiftBits) {\n            return (lValue << iShiftBits) | (lValue >>> (32 - iShiftBits));\n        }\n\n        function addUnsigned(lX, lY) {\n            var lX4,\n            lY4,\n            lX8,\n            lY8,\n            lResult;\n            lX8 = (lX & 0x80000000);\n            lY8 = (lY & 0x80000000);\n            lX4 = (lX & 0x40000000);\n            lY4 = (lY & 0x40000000);\n            lResult = (lX & 0x3FFFFFFF) + (lY & 0x3FFFFFFF);\n            if (lX4 & lY4) {\n                return (lResult ^ 0x80000000 ^ lX8 ^ lY8);\n            }\n            if (lX4 | lY4) {\n                if (lResult & 0x40000000) {\n                    return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);\n                } else {\n                    return (lResult ^ 0x40000000 ^ lX8 ^ lY8);\n                }\n            } else {\n                return (lResult ^ lX8 ^ lY8);\n            }\n        }\n\n        function f(x, y, z) {\n            return (x & y) | ((~x) & z);\n        }\n        function g(x, y, z) {\n            return (x & z) | (y & (~z));\n        }\n        function h(x, y, z) {\n            return (x ^ y ^ z);\n        }\n        function funcI(x, y, z) {\n            return (y ^ (x | (~z)));\n        }\n\n        function ff(a, b, c, d, x, s, ac) {\n            a = addUnsigned(a, addUnsigned(addUnsigned(f(b, c, d), x), ac));\n            return addUnsigned(rotateLeft(a, s), b);\n        }\n\n        function gg(a, b, c, d, x, s, ac) {\n            a = addUnsigned(a, addUnsigned(addUnsigned(g(b, c, d), x), ac));\n            return addUnsigned(rotateLeft(a, s), b);\n        }\n\n        function hh(a, b, c, d, x, s, ac) {\n            a = addUnsigned(a, addUnsigned(addUnsigned(h(b, c, d), x), ac));\n            return addUnsigned(rotateLeft(a, s), b);\n        }\n\n        function ii(a, b, c, d, x, s, ac) {\n            a = addUnsigned(a, addUnsigned(addUnsigned(funcI(b, c, d), x), ac));\n            return addUnsigned(rotateLeft(a, s), b);\n        }\n\n        function convertToWordArray(numArr) {\n            var lWordCount,\n            lMessageLength = numArr.length,\n            lNumberOfWords_temp1 = lMessageLength + 8,\n            lNumberOfWords_temp2 = (lNumberOfWords_temp1 - (lNumberOfWords_temp1 % 64)) / 64,\n            lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16,\n            lWordArray = [],\n            lBytePosition = 0,\n            lByteCount = 0;\n            while (lByteCount < lMessageLength) {\n                lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n                lBytePosition = (lByteCount % 4) * 8;\n                lWordArray[lWordCount] = (lWordArray[lWordCount] | (numArr[lByteCount] << lBytePosition));\n                lByteCount++;\n            }\n            lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n            lBytePosition = (lByteCount % 4) * 8;\n            lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80 << lBytePosition);\n            lWordArray[lNumberOfWords - 2] = lMessageLength << 3;\n            lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;\n            return lWordArray;\n        }\n\n        function wordToHex(lValue) {\n            var lByte,\n            lCount,\n            wordToHexArr = [];\n            for (lCount = 0; lCount <= 3; lCount++) {\n                lByte = (lValue >>> (lCount * 8)) & 255;\n                wordToHexArr = wordToHexArr.concat(lByte);\n             }\n            return wordToHexArr;\n        }\n\n        /*function utf8Encode(string) {\n            string = string.replace(/\\r\\n/g, \"\\n\");\n            var utftext = \"\",\n            n,\n            c;\n\n            for (n = 0; n < string.length; n++) {\n\n                c = string.charCodeAt(n);\n\n                if (c < 128) {\n                    utftext += String.fromCharCode(c);\n                }\n                else if ((c > 127) && (c < 2048)) {\n                    utftext += String.fromCharCode((c >> 6) | 192);\n                    utftext += String.fromCharCode((c & 63) | 128);\n                }\n                else {\n                    utftext += String.fromCharCode((c >> 12) | 224);\n                    utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                    utftext += String.fromCharCode((c & 63) | 128);\n                }\n\n            }\n\n            return utftext;\n        }*/\n\n        var x = [],\n        k,\n        AA,\n        BB,\n        CC,\n        DD,\n        a,\n        b,\n        c,\n        d,\n        rnd = strhex('67452301efcdab8998badcfe10325476d76aa478e8c7b756242070dbc1bdceeef57c0faf4787c62aa8304613fd469501698098d88b44f7afffff5bb1895cd7be6b901122fd987193a679438e49b40821f61e2562c040b340265e5a51e9b6c7aad62f105d02441453d8a1e681e7d3fbc821e1cde6c33707d6f4d50d87455a14eda9e3e905fcefa3f8676f02d98d2a4c8afffa39428771f6816d9d6122fde5380ca4beea444bdecfa9f6bb4b60bebfbc70289b7ec6eaa127fad4ef308504881d05d9d4d039e6db99e51fa27cf8c4ac5665f4292244432aff97ab9423a7fc93a039655b59c38f0ccc92ffeff47d85845dd16fa87e4ffe2ce6e0a30143144e0811a1f7537e82bd3af2352ad7d2bbeb86d391',8);\n\n        x = convertToWordArray(numArr);\n\n        a = rnd[0];\n        b = rnd[1];\n        c = rnd[2];\n        d = rnd[3]\n\n        for (k = 0; k < x.length; k += 16) {\n            AA = a;\n            BB = b;\n            CC = c;\n            DD = d;\n            a = ff(a, b, c, d, x[k + 0], 7, rnd[4]);\n            d = ff(d, a, b, c, x[k + 1], 12, rnd[5]);\n            c = ff(c, d, a, b, x[k + 2], 17, rnd[6]);\n            b = ff(b, c, d, a, x[k + 3], 22, rnd[7]);\n            a = ff(a, b, c, d, x[k + 4], 7, rnd[8]);\n            d = ff(d, a, b, c, x[k + 5], 12, rnd[9]);\n            c = ff(c, d, a, b, x[k + 6], 17, rnd[10]);\n            b = ff(b, c, d, a, x[k + 7], 22, rnd[11]);\n            a = ff(a, b, c, d, x[k + 8], 7, rnd[12]);\n            d = ff(d, a, b, c, x[k + 9], 12, rnd[13]);\n            c = ff(c, d, a, b, x[k + 10], 17, rnd[14]);\n            b = ff(b, c, d, a, x[k + 11], 22, rnd[15]);\n            a = ff(a, b, c, d, x[k + 12], 7, rnd[16]);\n            d = ff(d, a, b, c, x[k + 13], 12, rnd[17]);\n            c = ff(c, d, a, b, x[k + 14], 17, rnd[18]);\n            b = ff(b, c, d, a, x[k + 15], 22, rnd[19]);\n            a = gg(a, b, c, d, x[k + 1], 5, rnd[20]);\n            d = gg(d, a, b, c, x[k + 6], 9, rnd[21]);\n            c = gg(c, d, a, b, x[k + 11], 14, rnd[22]);\n            b = gg(b, c, d, a, x[k + 0], 20, rnd[23]);\n            a = gg(a, b, c, d, x[k + 5], 5, rnd[24]);\n            d = gg(d, a, b, c, x[k + 10], 9, rnd[25]);\n            c = gg(c, d, a, b, x[k + 15], 14, rnd[26]);\n            b = gg(b, c, d, a, x[k + 4], 20, rnd[27]);\n            a = gg(a, b, c, d, x[k + 9], 5, rnd[28]);\n            d = gg(d, a, b, c, x[k + 14], 9, rnd[29]);\n            c = gg(c, d, a, b, x[k + 3], 14, rnd[30]);\n            b = gg(b, c, d, a, x[k + 8], 20, rnd[31]);\n            a = gg(a, b, c, d, x[k + 13], 5, rnd[32]);\n            d = gg(d, a, b, c, x[k + 2], 9, rnd[33]);\n            c = gg(c, d, a, b, x[k + 7], 14, rnd[34]);\n            b = gg(b, c, d, a, x[k + 12], 20, rnd[35]);\n            a = hh(a, b, c, d, x[k + 5], 4, rnd[36]);\n            d = hh(d, a, b, c, x[k + 8], 11, rnd[37]);\n            c = hh(c, d, a, b, x[k + 11], 16, rnd[38]);\n            b = hh(b, c, d, a, x[k + 14], 23, rnd[39]);\n            a = hh(a, b, c, d, x[k + 1], 4, rnd[40]);\n            d = hh(d, a, b, c, x[k + 4], 11, rnd[41]);\n            c = hh(c, d, a, b, x[k + 7], 16, rnd[42]);\n            b = hh(b, c, d, a, x[k + 10], 23, rnd[43]);\n            a = hh(a, b, c, d, x[k + 13], 4, rnd[44]);\n            d = hh(d, a, b, c, x[k + 0], 11, rnd[45]);\n            c = hh(c, d, a, b, x[k + 3], 16, rnd[46]);\n            b = hh(b, c, d, a, x[k + 6], 23, rnd[47]);\n            a = hh(a, b, c, d, x[k + 9], 4, rnd[48]);\n            d = hh(d, a, b, c, x[k + 12], 11, rnd[49]);\n            c = hh(c, d, a, b, x[k + 15], 16, rnd[50]);\n            b = hh(b, c, d, a, x[k + 2], 23, rnd[51]);\n            a = ii(a, b, c, d, x[k + 0], 6, rnd[52]);\n            d = ii(d, a, b, c, x[k + 7], 10, rnd[53]);\n            c = ii(c, d, a, b, x[k + 14], 15, rnd[54]);\n            b = ii(b, c, d, a, x[k + 5], 21, rnd[55]);\n            a = ii(a, b, c, d, x[k + 12], 6, rnd[56]);\n            d = ii(d, a, b, c, x[k + 3], 10, rnd[57]);\n            c = ii(c, d, a, b, x[k + 10], 15, rnd[58]);\n            b = ii(b, c, d, a, x[k + 1], 21, rnd[59]);\n            a = ii(a, b, c, d, x[k + 8], 6, rnd[60]);\n            d = ii(d, a, b, c, x[k + 15], 10, rnd[61]);\n            c = ii(c, d, a, b, x[k + 6], 15, rnd[62]);\n            b = ii(b, c, d, a, x[k + 13], 21, rnd[63]);\n            a = ii(a, b, c, d, x[k + 4], 6, rnd[64]);\n            d = ii(d, a, b, c, x[k + 11], 10, rnd[65]);\n            c = ii(c, d, a, b, x[k + 2], 15, rnd[66]);\n            b = ii(b, c, d, a, x[k + 9], 21, rnd[67]);\n            a = addUnsigned(a, AA);\n            b = addUnsigned(b, BB);\n            c = addUnsigned(c, CC);\n            d = addUnsigned(d, DD);\n        }\n\n        return wordToHex(a).concat(wordToHex(b), wordToHex(c), wordToHex(d));\n    },\n\n    encString = function(plaintext, key, iv) {\n        plaintext = s2a(plaintext);\n\n        key = s2a(key);\n        for (var i=key.length; i<32; i++)\n            key[i] = 0;\n\n        if (iv == null) {\n            iv = genIV();\n        } else {\n            iv = s2a(iv);\n            for (var i=iv.length; i<16; i++)\n                iv[i] = 0;\n        }\n\n        var ct = rawEncrypt(plaintext, key, iv);\n        var ret = [iv];\n        for (var i=0; i<ct.length; i++)\n            ret[ret.length] = ct[i];\n        return Base64.encode(ret);\n    },\n\n    decString = function(ciphertext, key) {\n        var tmp = Base64.decode(ciphertext);\n        var iv = tmp.slice(0, 16);\n        var ct = tmp.slice(16, tmp.length);\n\n        key = s2a(key);\n        for (var i=key.length; i<32; i++)\n            key[i] = 0;\n\n        var pt = rawDecrypt(ct, key, iv, false);\n        return pt;\n    },\n\n    Base64 = (function(){\n        // Takes a Nx16x1 byte array and converts it to Base64\n        var _chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n        chars = _chars.split(''),\n\n        encode = function(b, withBreaks) {\n            var flatArr = [],\n            b64 = '',\n            i,\n            broken_b64;\n            var totalChunks = Math.floor(b.length * 16 / 3);\n            for (i = 0; i < b.length * 16; i++) {\n                flatArr.push(b[Math.floor(i / 16)][i % 16]);\n            }\n            for (i = 0; i < flatArr.length; i = i + 3) {\n                b64 += chars[flatArr[i] >> 2];\n                b64 += chars[((flatArr[i] & 3) << 4) | (flatArr[i + 1] >> 4)];\n                if (! (flatArr[i + 1] === undefined)) {\n                    b64 += chars[((flatArr[i + 1] & 15) << 2) | (flatArr[i + 2] >> 6)];\n                } else {\n                    b64 += '=';\n                }\n                if (! (flatArr[i + 2] === undefined)) {\n                    b64 += chars[flatArr[i + 2] & 63];\n                } else {\n                    b64 += '=';\n                }\n            }\n            // OpenSSL is super particular about line breaks\n            broken_b64 = b64.slice(0, 64); // + '\\n';\n            for (i = 1; i < (Math['ceil'](b64.length / 64)); i++) {\n                broken_b64 += b64.slice(i * 64, i * 64 + 64) + (Math.ceil(b64.length / 64) == i + 1 ? '': '\\n');\n            }\n            return broken_b64;\n        },\n\n        decode = function(string) {\n            string = string['replace'](/\\n/g, '');\n            var flatArr = [],\n            c = [],\n            b = [],\n            i;\n            for (i = 0; i < string.length; i = i + 4) {\n                c[0] = _chars.indexOf(string.charAt(i));\n                c[1] = _chars.indexOf(string.charAt(i + 1));\n                c[2] = _chars.indexOf(string.charAt(i + 2));\n                c[3] = _chars.indexOf(string.charAt(i + 3));\n\n                b[0] = (c[0] << 2) | (c[1] >> 4);\n                b[1] = ((c[1] & 15) << 4) | (c[2] >> 2);\n                b[2] = ((c[2] & 3) << 6) | c[3];\n                flatArr.push(b[0], b[1], b[2]);\n            }\n            flatArr = flatArr.slice(0, flatArr.length - (flatArr.length % 16));\n            return flatArr;\n        };\n\n        //internet explorer\n        if(typeof Array.indexOf === \"function\") {\n            _chars = chars;\n        }\n\n        /*\n        //other way to solve internet explorer problem\n        if(!Array.indexOf){\n            Array.prototype.indexOf = function(obj){\n                for(var i=0; i<this.length; i++){\n                    if(this[i]===obj){\n                        return i;\n                    }\n                }\n                return -1;\n            }\n        }\n        */\n\n\n        return {\n            \"encode\": encode,\n            \"decode\": decode\n        };\n    })();\n\n    return {\n        \"size\": size,\n        \"h2a\":h2a,\n        \"expandKey\":expandKey,\n        \"encryptBlock\":encryptBlock,\n        \"decryptBlock\":decryptBlock,\n        \"Decrypt\":Decrypt,\n        \"s2a\":s2a,\n        \"rawEncrypt\":rawEncrypt,\n        \"rawDecrypt\":rawDecrypt,\n        \"dec\":dec,\n        \"openSSLKey\":openSSLKey,\n        \"a2h\":a2h,\n        \"enc\":enc,\n        \"Hash\":{\"MD5\":MD5},\n        \"Base64\":Base64\n    };\n\n})();\n\nfunction crypto_obj (){\n\n\nfunction SHA256(s) {\n\n    var chrsz = 8;\n    var hexcase = 0;\n\n    function safe_add(x, y) {\n        var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n        var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n        return (msw << 16) | (lsw & 0xFFFF);\n    }\n\n    function S(X, n) {\n        return ( X >>> n ) | (X << (32 - n));\n    }\n\n    function R(X, n) {\n        return ( X >>> n );\n    }\n\n    function Ch(x, y, z) {\n        return ((x & y) ^ ((~x) & z));\n    }\n\n    function Maj(x, y, z) {\n        return ((x & y) ^ (x & z) ^ (y & z));\n    }\n\n    function Sigma0256(x) {\n        return (S(x, 2) ^ S(x, 13) ^ S(x, 22));\n    }\n\n    function Sigma1256(x) {\n        return (S(x, 6) ^ S(x, 11) ^ S(x, 25));\n    }\n\n    function Gamma0256(x) {\n        return (S(x, 7) ^ S(x, 18) ^ R(x, 3));\n    }\n\n    function Gamma1256(x) {\n        return (S(x, 17) ^ S(x, 19) ^ R(x, 10));\n    }\n\n    function core_sha256(m, l) {\n        var K = new Array(0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5, 0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5, 0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3, 0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174, 0xE49B69C1, 0xEFBE4786, 0xFC19DC6, 0x240CA1CC, 0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA, 0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7, 0xC6E00BF3, 0xD5A79147, 0x6CA6351, 0x14292967, 0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13, 0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85, 0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3, 0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070, 0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5, 0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3, 0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208, 0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2);\n        var HASH = new Array(0x6A09E667, 0xBB67AE85, 0x3C6EF372, 0xA54FF53A, 0x510E527F, 0x9B05688C, 0x1F83D9AB, 0x5BE0CD19);\n        var W = new Array(64);\n        var a, b, c, d, e, f, g, h, i, j;\n        var T1, T2;\n\n        m[l >> 5] |= 0x80 << (24 - l % 32);\n        m[((l + 64 >> 9) << 4) + 15] = l;\n\n        for (var i = 0; i < m.length; i += 16) {\n            a = HASH[0];\n            b = HASH[1];\n            c = HASH[2];\n            d = HASH[3];\n            e = HASH[4];\n            f = HASH[5];\n            g = HASH[6];\n            h = HASH[7];\n\n            for (var j = 0; j < 64; j++) {\n                if (j < 16) W[j] = m[j + i];\n                else W[j] = safe_add(safe_add(safe_add(Gamma1256(W[j - 2]), W[j - 7]), Gamma0256(W[j - 15])), W[j - 16]);\n\n                T1 = safe_add(safe_add(safe_add(safe_add(h, Sigma1256(e)), Ch(e, f, g)), K[j]), W[j]);\n                T2 = safe_add(Sigma0256(a), Maj(a, b, c));\n\n                h = g;\n                g = f;\n                f = e;\n                e = safe_add(d, T1);\n                d = c;\n                c = b;\n                b = a;\n                a = safe_add(T1, T2);\n            }\n\n            HASH[0] = safe_add(a, HASH[0]);\n            HASH[1] = safe_add(b, HASH[1]);\n            HASH[2] = safe_add(c, HASH[2]);\n            HASH[3] = safe_add(d, HASH[3]);\n            HASH[4] = safe_add(e, HASH[4]);\n            HASH[5] = safe_add(f, HASH[5]);\n            HASH[6] = safe_add(g, HASH[6]);\n            HASH[7] = safe_add(h, HASH[7]);\n        }\n        return HASH;\n    }\n\n    function str2binb(str) {\n        var bin = Array();\n        var mask = (1 << chrsz) - 1;\n        for (var i = 0; i < str.length * chrsz; i += chrsz) {\n            bin[i >> 5] |= (str.charCodeAt(i / chrsz) & mask) << (24 - i % 32);\n        }\n        return bin;\n    }\n\n    function Utf8Encode(string) {\n        string = string['replace'](/\\r\\n/g, \"\\n\");\n        var utftext = \"\";\n\n        for (var n = 0; n < string['length']; n++) {\n\n            var c = string.charCodeAt(n);\n\n            if (c < 128) {\n                utftext += String.fromCharCode(c);\n            }\n            else if ((c > 127) && (c < 2048)) {\n                utftext += String.fromCharCode((c >> 6) | 192);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n            else {\n                utftext += String.fromCharCode((c >> 12) | 224);\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n\n        }\n\n        return utftext;\n    }\n\n    function binb2hex(binarray) {\n        var hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\n        var str = \"\";\n        for (var i = 0; i < binarray.length * 4; i++) {\n            str += hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8 + 4)) & 0xF) +\n                hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8  )) & 0xF);\n        }\n        return str;\n    }\n\n    s = Utf8Encode(s);\n    return binb2hex(core_sha256(str2binb(s), s.length * chrsz));\n}\n    var crypto = CRYPTO;\n    crypto['size'](256);\n\n    var cipher_key = \"\";\n    var iv = crypto['s2a'](\"0123456789012345\");\n\n    return {\n\n        'encrypt' : function(data, key) {\n            if (!key) return data;\n            var cipher_key = crypto['s2a'](SHA256(key)['slice'](0,32));\n            var hex_message = crypto['s2a'](JSON['stringify'](data));\n            var encryptedHexArray = crypto['rawEncrypt'](hex_message, cipher_key, iv);\n            var base_64_encrypted = crypto['Base64']['encode'](encryptedHexArray);\n            return base_64_encrypted || data;\n        } ,\n\n        'decrypt' : function(data, key) {\n            if (!key) return data;\n            var cipher_key = crypto['s2a'](SHA256(key)['slice'](0,32));\n            try {\n                var binary_enc = crypto['Base64']['decode'](data);\n                var json_plain = crypto['rawDecrypt'](binary_enc, cipher_key, iv, false);\n                var plaintext = JSON['parse'](json_plain);\n                return plaintext;\n            }\n            catch (e) {\n                return undefined;\n            }\n        }\n    };\n}\n/* ---------------------------------------------------------------------------\n--------------------------------------------------------------------------- */\n\n/* ---------------------------------------------------------------------------\nPubNub Real-time Cloud-Hosted Push API and Push Notification Client Frameworks\nCopyright (c) 2011 PubNub Inc.\nhttp://www.pubnub.com/\nhttp://www.pubnub.com/terms\n--------------------------------------------------------------------------- */\n\n/* ---------------------------------------------------------------------------\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n--------------------------------------------------------------------------- */\n(function(){\n\n/**\n * UTIL LOCALS\n */\nvar NOW        = 1\n,    PNSDK      = 'PubNub-JS-' + 'Modern' + '/' + '3.6.2'\n,   XHRTME     = 310000;\n\n\n\n/**\n * LOCAL STORAGE\n */\nvar db = (function(){\n    var ls = typeof localStorage != 'undefined' && localStorage;\n    return {\n        get : function(key) {\n            try {\n                if (ls) return ls.getItem(key);\n                if (document.cookie.indexOf(key) == -1) return null;\n                return ((document.cookie||'').match(\n                    RegExp(key+'=([^;]+)')\n                )||[])[1] || null;\n            } catch(e) { return }\n        },\n        set : function( key, value ) {\n            try {\n                if (ls) return ls.setItem( key, value ) && 0;\n                document.cookie = key + '=' + value +\n                    '; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/';\n            } catch(e) { return }\n        }\n    };\n})();\n\n\n/**\n * CORS XHR Request\n * ================\n *  xdr({\n *     url     : ['http://www.blah.com/url'],\n *     success : function(response) {},\n *     fail    : function() {}\n *  });\n */\nfunction xdr( setup ) {\n    var xhr\n    ,   finished = function() {\n            if (loaded) return;\n                loaded = 1;\n\n            clearTimeout(timer);\n\n            try       { response = JSON['parse'](xhr.responseText); }\n            catch (r) { return done(1); }\n\n            success(response);\n        }\n    ,   complete = 0\n    ,   loaded   = 0\n    ,   timer    = timeout( function(){done(1)}, XHRTME )\n    ,   data     = setup.data || {}\n    ,   fail     = setup.fail    || function(){}\n    ,   success  = setup.success || function(){}\n    ,   async    = ( typeof(setup.blocking) === 'undefined' )\n    ,   done     = function(failed, response) {\n            if (complete) return;\n                complete = 1;\n\n            clearTimeout(timer);\n\n            if (xhr) {\n                xhr.onerror = xhr.onload = null;\n                xhr.abort && xhr.abort();\n                xhr = null;\n            }\n\n            failed && fail(response);\n        };\n\n    // Send\n    try {\n        xhr = typeof XDomainRequest !== 'undefined' &&\n              new XDomainRequest()  ||\n              new XMLHttpRequest();\n\n        xhr.onerror = xhr.onabort   = function(){ done(1, xhr.responseText || { \"error\" : \"Network Connection Error\"}) };\n        xhr.onload  = xhr.onloadend = finished;\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState == 4) {\n                switch(xhr.status) {\n                    case 401:\n                    case 402:\n                    case 403:\n                        try {\n                            response = JSON['parse'](xhr.responseText);\n                            done(1,response);\n                        }\n                        catch (r) { return done(1, xhr.responseText); }\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        if (async) xhr.timeout = XHRTME;\n        data['pnsdk'] = PNSDK;\n        url = build_url(setup.url, data);\n        xhr.open( 'GET', url, async);\n        xhr.send();\n    }\n    catch(eee) {\n        done(0);\n        return xdr(setup);\n    }\n\n    // Return 'done'\n    return done;\n}\n\n/**\n * BIND\n * ====\n * bind( 'keydown', search('a')[0], function(element) {\n *     ...\n * } );\n */\nfunction bind( type, el, fun ) {\n    each( type.split(','), function(etype) {\n        var rapfun = function(e) {\n            if (!e) e = window.event;\n            if (!fun(e)) {\n                e.cancelBubble = true;\n                e.returnValue  = false;\n                e.preventDefault && e.preventDefault();\n                e.stopPropagation && e.stopPropagation();\n            }\n        };\n\n        if ( el.addEventListener ) el.addEventListener( etype, rapfun, false );\n        else if ( el.attachEvent ) el.attachEvent( 'on' + etype, rapfun );\n        else  el[ 'on' + etype ] = rapfun;\n    } );\n}\n\n/**\n * UNBIND\n * ======\n * unbind( 'keydown', search('a')[0] );\n */\nfunction unbind( type, el, fun ) {\n    if ( el.removeEventListener ) el.removeEventListener( type, false );\n    else if ( el.detachEvent ) el.detachEvent( 'on' + type, false );\n    else  el[ 'on' + type ] = null;\n}\n\n/**\n * ERROR\n * ===\n * error('message');\n */\nfunction error(message) { console['error'](message) }\n\n/**\n * EVENTS\n * ======\n * PUBNUB.events.bind( 'you-stepped-on-flower', function(message) {\n *     // Do Stuff with message\n * } );\n *\n * PUBNUB.events.fire( 'you-stepped-on-flower', \"message-data\" );\n * PUBNUB.events.fire( 'you-stepped-on-flower', {message:\"data\"} );\n * PUBNUB.events.fire( 'you-stepped-on-flower', [1,2,3] );\n *\n */\nvar events = {\n    'list'   : {},\n    'unbind' : function( name ) { events.list[name] = [] },\n    'bind'   : function( name, fun ) {\n        (events.list[name] = events.list[name] || []).push(fun);\n    },\n    'fire' : function( name, data ) {\n        each(\n            events.list[name] || [],\n            function(fun) { fun(data) }\n        );\n    }\n};\n\n/**\n * ATTR\n * ====\n * var attribute = attr( node, 'attribute' );\n */\nfunction attr( node, attribute, value ) {\n    if (value) node.setAttribute( attribute, value );\n    else return node && node.getAttribute && node.getAttribute(attribute);\n}\n\n/**\n * $\n * =\n * var div = $('divid');\n */\nfunction $(id) { return document.getElementById(id) }\n\n\n/**\n * SEARCH\n * ======\n * var elements = search('a div span');\n */\nfunction search( elements, start ) {\n    var list = [];\n    each( elements.split(/\\s+/), function(el) {\n        each( (start || document).getElementsByTagName(el), function(node) {\n            list.push(node);\n        } );\n    } );\n    return list;\n}\n\n/**\n * CSS\n * ===\n * var obj = create('div');\n */\nfunction css( element, styles ) {\n    for (var style in styles) if (styles.hasOwnProperty(style))\n        try {element.style[style] = styles[style] + (\n            '|width|height|top|left|'.indexOf(style) > 0 &&\n            typeof styles[style] == 'number'\n            ? 'px' : ''\n        )}catch(e){}\n}\n\n/**\n * CREATE\n * ======\n * var obj = create('div');\n */\nfunction create(element) { return document.createElement(element) }\n\n\nfunction get_hmac_SHA256(data,key) {\n    var hash = CryptoJS['HmacSHA256'](data, key);\n    return hash.toString(CryptoJS['enc']['Base64']);\n}\n\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n/* =-=========================     PUBNUB     ===========================-= */\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n\nfunction CREATE_PUBNUB(setup) {\n\n\n    setup['db'] = db;\n    setup['xdr'] = xdr;\n    setup['error'] = setup['error'] || error;\n    setup['PNSDK']      = PNSDK;\n    setup['hmac_SHA256']= get_hmac_SHA256;\n    setup['crypto_obj'] = crypto_obj();\n\n    SELF = function(setup) {\n        return CREATE_PUBNUB(setup);\n    }\n    var PN = PN_API(setup);\n    for (var prop in PN) {\n        if (PN.hasOwnProperty(prop)) {\n            SELF[prop] = PN[prop];\n        }\n    }\n\n    SELF['init'] = SELF;\n    SELF['$'] = $;\n    SELF['attr'] = attr;\n    SELF['search'] = search;\n    SELF['bind'] = bind;\n    SELF['css'] = css;\n    SELF['create'] = create;\n\n    if (typeof(window) !== 'undefined'){\n        bind( 'beforeunload', window, function() {\n            SELF['each-channel'](function(ch){ SELF['LEAVE']( ch.name, 1 ) });\n            return true;\n        });\n    }\n\n    // Return without Testing\n    if (setup['notest']) return SELF;\n\n    if (typeof(window) !== 'undefined'){\n        bind( 'offline', window,   SELF['_reset_offline'] );\n    }\n\n    if (typeof(document) !== 'undefined'){\n        bind( 'offline', document, SELF['_reset_offline'] );\n    }\n\n    SELF['ready']();\n    return SELF;\n}\nCREATE_PUBNUB['init'] = CREATE_PUBNUB\nCREATE_PUBNUB['secure'] = CREATE_PUBNUB\nPUBNUB = CREATE_PUBNUB({})\ntypeof module  !== 'undefined' && (module.exports = CREATE_PUBNUB) ||\ntypeof exports !== 'undefined' && (exports.PUBNUB = CREATE_PUBNUB) || (PUBNUB = CREATE_PUBNUB);\n\n})();\n(function(){\n\n// ---------------------------------------------------------------------------\n// WEBSOCKET INTERFACE\n// ---------------------------------------------------------------------------\nvar WS = PUBNUB['ws'] = function( url, protocols ) {\n    if (!(this instanceof WS)) return new WS( url, protocols );\n\n    var self     = this\n    ,   url      = self.url      = url || ''\n    ,   protocol = self.protocol = protocols || 'Sec-WebSocket-Protocol'\n    ,   bits     = url.split('/')\n    ,   setup    = {\n         'ssl'           : bits[0] === 'wss:'\n        ,'origin'        : bits[2]\n        ,'publish_key'   : bits[3]\n        ,'subscribe_key' : bits[4]\n        ,'channel'       : bits[5]\n    };\n\n    // READY STATES\n    self['CONNECTING'] = 0; // The connection is not yet open.\n    self['OPEN']       = 1; // The connection is open and ready to communicate.\n    self['CLOSING']    = 2; // The connection is in the process of closing.\n    self['CLOSED']     = 3; // The connection is closed or couldn't be opened.\n\n    // CLOSE STATES\n    self['CLOSE_NORMAL']         = 1000; // Normal Intended Close; completed.\n    self['CLOSE_GOING_AWAY']     = 1001; // Closed Unexpecttedly.\n    self['CLOSE_PROTOCOL_ERROR'] = 1002; // Server: Not Supported.\n    self['CLOSE_UNSUPPORTED']    = 1003; // Server: Unsupported Protocol.\n    self['CLOSE_TOO_LARGE']      = 1004; // Server: Too Much Data.\n    self['CLOSE_NO_STATUS']      = 1005; // Server: No reason.\n    self['CLOSE_ABNORMAL']       = 1006; // Abnormal Disconnect.\n\n    // Events Default\n    self['onclose']   = self['onerror'] =\n    self['onmessage'] = self['onopen']  =\n    self['onsend']    =  function(){};\n\n    // Attributes\n    self['binaryType']     = '';\n    self['extensions']     = '';\n    self['bufferedAmount'] = 0;\n    self['trasnmitting']   = false;\n    self['buffer']         = [];\n    self['readyState']     = self['CONNECTING'];\n\n    // Close if no setup.\n    if (!url) {\n        self['readyState'] = self['CLOSED'];\n        self['onclose']({\n            'code'     : self['CLOSE_ABNORMAL'],\n            'reason'   : 'Missing URL',\n            'wasClean' : true\n        });\n        return self;\n    }\n\n    // PubNub WebSocket Emulation\n    self.pubnub       = PUBNUB['init'](setup);\n    self.pubnub.setup = setup;\n    self.setup        = setup;\n\n    self.pubnub['subscribe']({\n        'restore'    : false,\n        'channel'    : setup['channel'],\n        'disconnect' : self['onerror'],\n        'reconnect'  : self['onopen'],\n        'error'      : function() {\n            self['onclose']({\n                'code'     : self['CLOSE_ABNORMAL'],\n                'reason'   : 'Missing URL',\n                'wasClean' : false\n            });\n        },\n        'callback'   : function(message) {\n            self['onmessage']({ 'data' : message });\n        },\n        'connect'    : function() {\n            self['readyState'] = self['OPEN'];\n            self['onopen']();\n        }\n    });\n};\n\n// ---------------------------------------------------------------------------\n// WEBSOCKET SEND\n// ---------------------------------------------------------------------------\nWS.prototype.send = function(data) {\n    var self = this;\n    self.pubnub['publish']({\n        'channel'  : self.pubnub.setup['channel'],\n        'message'  : data,\n        'callback' : function(response) {\n            self['onsend']({ 'data' : response });\n        }\n    });\n};\n\n// ---------------------------------------------------------------------------\n// WEBSOCKET CLOSE\n// ---------------------------------------------------------------------------\nWS.prototype.close = function() {\n    var self = this;\n    self.pubnub['unsubscribe']({ 'channel' : self.pubnub.setup['channel'] });\n    self['readyState'] = self['CLOSED'];\n    self['onclose']({});\n};\n\n})();\n"]}